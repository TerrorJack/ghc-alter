<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>FileCleanup</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/FileCleanup.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">ghc-8.3: The GHC API</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">FileCleanup</p></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">data</span> <a href="#t:TempFileLifetime">TempFileLifetime</a><ul class="subs"><li>= <a href="#v:TFL_CurrentModule">TFL_CurrentModule</a></li><li>| <a href="#v:TFL_GhcSession">TFL_GhcSession</a></li></ul></li><li class="src short"><a href="#v:cleanTempDirs">cleanTempDirs</a> :: <a href="DynFlags.html#t:DynFlags">DynFlags</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> ()</li><li class="src short"><a href="#v:cleanTempFiles">cleanTempFiles</a> :: <a href="DynFlags.html#t:DynFlags">DynFlags</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> ()</li><li class="src short"><a href="#v:cleanCurrentModuleTempFiles">cleanCurrentModuleTempFiles</a> :: <a href="DynFlags.html#t:DynFlags">DynFlags</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> ()</li><li class="src short"><a href="#v:addFilesToClean">addFilesToClean</a> :: <a href="DynFlags.html#t:DynFlags">DynFlags</a> -&gt; <a href="FileCleanup.html#t:TempFileLifetime">TempFileLifetime</a> -&gt; [<a href="../base-4.10.0.0/System-IO.html#t:FilePath">FilePath</a>] -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> ()</li><li class="src short"><a href="#v:changeTempFilesLifetime">changeTempFilesLifetime</a> :: <a href="DynFlags.html#t:DynFlags">DynFlags</a> -&gt; <a href="FileCleanup.html#t:TempFileLifetime">TempFileLifetime</a> -&gt; [<a href="../base-4.10.0.0/System-IO.html#t:FilePath">FilePath</a>] -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> ()</li><li class="src short"><a href="#v:newTempName">newTempName</a> :: <a href="DynFlags.html#t:DynFlags">DynFlags</a> -&gt; <a href="FileCleanup.html#t:TempFileLifetime">TempFileLifetime</a> -&gt; <a href="Util.html#t:Suffix">Suffix</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> <a href="../base-4.10.0.0/System-IO.html#t:FilePath">FilePath</a></li><li class="src short"><a href="#v:newTempLibName">newTempLibName</a> :: <a href="DynFlags.html#t:DynFlags">DynFlags</a> -&gt; <a href="FileCleanup.html#t:TempFileLifetime">TempFileLifetime</a> -&gt; <a href="Util.html#t:Suffix">Suffix</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> (<a href="../base-4.10.0.0/System-IO.html#t:FilePath">FilePath</a>, <a href="../base-4.10.0.0/System-IO.html#t:FilePath">FilePath</a>, <a href="../base-4.10.0.0/Data-String.html#t:String">String</a>)</li></ul></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:TempFileLifetime" class="def">TempFileLifetime</a> <a href="src/FileCleanup.html#TempFileLifetime" class="link">Source</a> <a href="#t:TempFileLifetime" class="selflink">#</a></p><div class="doc"><p>Used when a temp file is created. This determines which component Set of
 FilesToClean will get the temp file</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:TFL_CurrentModule" class="def">TFL_CurrentModule</a></td><td class="doc"><p>A file with lifetime TFL_CurrentModule will be cleaned up at the
 end of upweep_mod</p></td></tr><tr><td class="src"><a id="v:TFL_GhcSession" class="def">TFL_GhcSession</a></td><td class="doc"><p>A file with lifetime TFL_GhcSession will be cleaned up at the end of
 runGhc(T)</p></td></tr></table></div><div class="subs instances"><p id="control.i:TempFileLifetime" class="caption collapser" onclick="toggleSection('i:TempFileLifetime')">Instances</p><div id="section.i:TempFileLifetime" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:TempFileLifetime:Show:1" class="instance expander" onclick="toggleSection('i:id:TempFileLifetime:Show:1')"></span> <a href="../base-4.10.0.0/Text-Show.html#t:Show">Show</a> <a href="FileCleanup.html#t:TempFileLifetime">TempFileLifetime</a></span> <a href="#t:TempFileLifetime" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:TempFileLifetime:Show:1" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="../base-4.10.0.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="FileCleanup.html#t:TempFileLifetime">TempFileLifetime</a> -&gt; <a href="../base-4.10.0.0/Text-Show.html#t:ShowS">ShowS</a> <a href="../base-4.10.0.0/src/GHC-Show.html#showsPrec" class="link">Source</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="FileCleanup.html#t:TempFileLifetime">TempFileLifetime</a> -&gt; <a href="../base-4.10.0.0/Data-String.html#t:String">String</a> <a href="../base-4.10.0.0/src/GHC-Show.html#show" class="link">Source</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="FileCleanup.html#t:TempFileLifetime">TempFileLifetime</a>] -&gt; <a href="../base-4.10.0.0/Text-Show.html#t:ShowS">ShowS</a> <a href="../base-4.10.0.0/src/GHC-Show.html#showList" class="link">Source</a> <a href="#v:showList" class="selflink">#</a></p></div></div></td></tr></table></div></div></div><div class="top"><p class="src"><a id="v:cleanTempDirs" class="def">cleanTempDirs</a> :: <a href="DynFlags.html#t:DynFlags">DynFlags</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> () <a href="src/FileCleanup.html#cleanTempDirs" class="link">Source</a> <a href="#v:cleanTempDirs" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:cleanTempFiles" class="def">cleanTempFiles</a> :: <a href="DynFlags.html#t:DynFlags">DynFlags</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> () <a href="src/FileCleanup.html#cleanTempFiles" class="link">Source</a> <a href="#v:cleanTempFiles" class="selflink">#</a></p><div class="doc"><p>Delete all files in <code>filesToClean dflags</code>.</p></div></div><div class="top"><p class="src"><a id="v:cleanCurrentModuleTempFiles" class="def">cleanCurrentModuleTempFiles</a> :: <a href="DynFlags.html#t:DynFlags">DynFlags</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> () <a href="src/FileCleanup.html#cleanCurrentModuleTempFiles" class="link">Source</a> <a href="#v:cleanCurrentModuleTempFiles" class="selflink">#</a></p><div class="doc"><p>Delete all files in <code>filesToClean dflags</code>. That have lifetime
 TFL_CurrentModule.
 If a file must be cleaned eventually, but must survive a
 cleanCurrentModuleTempFiles, ensure it has lifetime TFL_GhcSession.</p></div></div><div class="top"><p class="src"><a id="v:addFilesToClean" class="def">addFilesToClean</a> :: <a href="DynFlags.html#t:DynFlags">DynFlags</a> -&gt; <a href="FileCleanup.html#t:TempFileLifetime">TempFileLifetime</a> -&gt; [<a href="../base-4.10.0.0/System-IO.html#t:FilePath">FilePath</a>] -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> () <a href="src/FileCleanup.html#addFilesToClean" class="link">Source</a> <a href="#v:addFilesToClean" class="selflink">#</a></p><div class="doc"><p>Ensure that new_files are cleaned on the next call of
 <code><a href="FileCleanup.html#v:cleanTempFiles">cleanTempFiles</a></code> or <code><a href="FileCleanup.html#v:cleanCurrentModuleTempFiles">cleanCurrentModuleTempFiles</a></code>, depending on lifetime.
 If any of new_files are already tracked, they will have their lifetime
 updated.</p></div></div><div class="top"><p class="src"><a id="v:changeTempFilesLifetime" class="def">changeTempFilesLifetime</a> :: <a href="DynFlags.html#t:DynFlags">DynFlags</a> -&gt; <a href="FileCleanup.html#t:TempFileLifetime">TempFileLifetime</a> -&gt; [<a href="../base-4.10.0.0/System-IO.html#t:FilePath">FilePath</a>] -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> () <a href="src/FileCleanup.html#changeTempFilesLifetime" class="link">Source</a> <a href="#v:changeTempFilesLifetime" class="selflink">#</a></p><div class="doc"><p>Update the lifetime of files already being tracked. If any files are
 not being tracked they will be discarded.</p></div></div><div class="top"><p class="src"><a id="v:newTempName" class="def">newTempName</a> :: <a href="DynFlags.html#t:DynFlags">DynFlags</a> -&gt; <a href="FileCleanup.html#t:TempFileLifetime">TempFileLifetime</a> -&gt; <a href="Util.html#t:Suffix">Suffix</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> <a href="../base-4.10.0.0/System-IO.html#t:FilePath">FilePath</a> <a href="src/FileCleanup.html#newTempName" class="link">Source</a> <a href="#v:newTempName" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:newTempLibName" class="def">newTempLibName</a> :: <a href="DynFlags.html#t:DynFlags">DynFlags</a> -&gt; <a href="FileCleanup.html#t:TempFileLifetime">TempFileLifetime</a> -&gt; <a href="Util.html#t:Suffix">Suffix</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> (<a href="../base-4.10.0.0/System-IO.html#t:FilePath">FilePath</a>, <a href="../base-4.10.0.0/System-IO.html#t:FilePath">FilePath</a>, <a href="../base-4.10.0.0/Data-String.html#t:String">String</a>) <a href="src/FileCleanup.html#newTempLibName" class="link">Source</a> <a href="#v:newTempLibName" class="selflink">#</a></p></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.18.2</p></div></body></html>