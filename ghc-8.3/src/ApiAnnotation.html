<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
<!-- Generated by HsColour, http://code.haskell.org/~malcolm/hscolour/ -->
<title>parser/ApiAnnotation.hs</title>
<link type='text/css' rel='stylesheet' href='hscolour.css' />
</head>
<body>
<pre><a name="line-1"></a><span class='hs-comment'>{-# LANGUAGE DeriveDataTypeable #-}</span>
<a name="line-2"></a>
<a name="line-3"></a><span class='hs-keyword'>module</span> <span class='hs-conid'>ApiAnnotation</span> <span class='hs-layout'>(</span>
<a name="line-4"></a>  <span class='hs-varid'>getAnnotation</span><span class='hs-layout'>,</span> <span class='hs-varid'>getAndRemoveAnnotation</span><span class='hs-layout'>,</span>
<a name="line-5"></a>  <span class='hs-varid'>getAnnotationComments</span><span class='hs-layout'>,</span><span class='hs-varid'>getAndRemoveAnnotationComments</span><span class='hs-layout'>,</span>
<a name="line-6"></a>  <span class='hs-conid'>ApiAnns</span><span class='hs-layout'>,</span>
<a name="line-7"></a>  <span class='hs-conid'>ApiAnnKey</span><span class='hs-layout'>,</span>
<a name="line-8"></a>  <span class='hs-conid'>AnnKeywordId</span><span class='hs-layout'>(</span><span class='hs-keyglyph'>..</span><span class='hs-layout'>)</span><span class='hs-layout'>,</span>
<a name="line-9"></a>  <span class='hs-conid'>AnnotationComment</span><span class='hs-layout'>(</span><span class='hs-keyglyph'>..</span><span class='hs-layout'>)</span><span class='hs-layout'>,</span>
<a name="line-10"></a>  <span class='hs-conid'>IsUnicodeSyntax</span><span class='hs-layout'>(</span><span class='hs-keyglyph'>..</span><span class='hs-layout'>)</span><span class='hs-layout'>,</span>
<a name="line-11"></a>  <span class='hs-varid'>unicodeAnn</span><span class='hs-layout'>,</span>
<a name="line-12"></a>  <span class='hs-conid'>HasE</span><span class='hs-layout'>(</span><span class='hs-keyglyph'>..</span><span class='hs-layout'>)</span><span class='hs-layout'>,</span>
<a name="line-13"></a>  <span class='hs-conid'>LRdrName</span> <span class='hs-comment'>-- Exists for haddocks only</span>
<a name="line-14"></a>  <span class='hs-layout'>)</span> <span class='hs-keyword'>where</span>
<a name="line-15"></a>
<a name="line-16"></a><span class='hs-keyword'>import</span> <span class='hs-conid'>RdrName</span>
<a name="line-17"></a><span class='hs-keyword'>import</span> <span class='hs-conid'>Outputable</span>
<a name="line-18"></a><span class='hs-keyword'>import</span> <span class='hs-conid'>SrcLoc</span>
<a name="line-19"></a><span class='hs-keyword'>import</span> <span class='hs-keyword'>qualified</span> <span class='hs-conid'>Data</span><span class='hs-varop'>.</span><span class='hs-conid'>Map</span> <span class='hs-keyword'>as</span> <span class='hs-conid'>Map</span>
<a name="line-20"></a><span class='hs-keyword'>import</span> <span class='hs-conid'>Data</span><span class='hs-varop'>.</span><span class='hs-conid'>Data</span>
<a name="line-21"></a>
<a name="line-22"></a>
<a name="line-23"></a><span class='hs-comment'>{-
<a name="line-24"></a>Note [Api annotations]
<a name="line-25"></a>~~~~~~~~~~~~~~~~~~~~~~
<a name="line-26"></a>Given a parse tree of a Haskell module, how can we reconstruct
<a name="line-27"></a>the original Haskell source code, retaining all whitespace and
<a name="line-28"></a>source code comments?  We need to track the locations of all
<a name="line-29"></a>elements from the original source: this includes keywords such as
<a name="line-30"></a>'let' / 'in' / 'do' etc as well as punctuation such as commas and
<a name="line-31"></a>braces, and also comments.  We collectively refer to this
<a name="line-32"></a>metadata as the "API annotations".
<a name="line-33"></a>
<a name="line-34"></a>Rather than annotate the resulting parse tree with these locations
<a name="line-35"></a>directly (this would be a major change to some fairly core data
<a name="line-36"></a>structures in GHC), we instead capture locations for these elements in a
<a name="line-37"></a>structure separate from the parse tree, and returned in the
<a name="line-38"></a>pm_annotations field of the ParsedModule type.
<a name="line-39"></a>
<a name="line-40"></a>The full ApiAnns type is
<a name="line-41"></a>
<a name="line-42"></a>&gt; type ApiAnns = ( Map.Map ApiAnnKey [SrcSpan]                  -- non-comments
<a name="line-43"></a>&gt;                , Map.Map SrcSpan [Located AnnotationComment]) -- comments
<a name="line-44"></a>
<a name="line-45"></a>NON-COMMENT ELEMENTS
<a name="line-46"></a>
<a name="line-47"></a>Intuitively, every AST element directly contains a bag of keywords
<a name="line-48"></a>(keywords can show up more than once in a node: a semicolon i.e. newline
<a name="line-49"></a>can show up multiple times before the next AST element), each of which
<a name="line-50"></a>needs to be associated with its location in the original source code.
<a name="line-51"></a>
<a name="line-52"></a>Consequently, the structure that records non-comment elements is logically
<a name="line-53"></a>a two level map, from the SrcSpan of the AST element containing it, to
<a name="line-54"></a>a map from keywords ('AnnKeyWord') to all locations of the keyword directly
<a name="line-55"></a>in the AST element:
<a name="line-56"></a>
<a name="line-57"></a>&gt; type ApiAnnKey = (SrcSpan,AnnKeywordId)
<a name="line-58"></a>&gt;
<a name="line-59"></a>&gt; Map.Map ApiAnnKey [SrcSpan]
<a name="line-60"></a>
<a name="line-61"></a>So
<a name="line-62"></a>
<a name="line-63"></a>&gt; let x = 1 in 2 *x
<a name="line-64"></a>
<a name="line-65"></a>would result in the AST element
<a name="line-66"></a>
<a name="line-67"></a>  L span (HsLet (binds for x = 1) (2 * x))
<a name="line-68"></a>
<a name="line-69"></a>and the annotations
<a name="line-70"></a>
<a name="line-71"></a>  (span,AnnLet) having the location of the 'let' keyword
<a name="line-72"></a>  (span,AnnEqual) having the location of the '=' sign
<a name="line-73"></a>  (span,AnnIn)  having the location of the 'in' keyword
<a name="line-74"></a>
<a name="line-75"></a>For any given element in the AST, there is only a set number of
<a name="line-76"></a>keywords that are applicable for it (e.g., you'll never see an
<a name="line-77"></a>'import' keyword associated with a let-binding.)  The set of allowed
<a name="line-78"></a>keywords is documented in a comment associated with the constructor
<a name="line-79"></a>of a given AST element, although the ground truth is in Parser
<a name="line-80"></a>and RdrHsSyn (which actually add the annotations; see #13012).
<a name="line-81"></a>
<a name="line-82"></a>COMMENT ELEMENTS
<a name="line-83"></a>
<a name="line-84"></a>Every comment is associated with a *located* AnnotationComment.
<a name="line-85"></a>We associate comments with the lowest (most specific) AST element
<a name="line-86"></a>enclosing them:
<a name="line-87"></a>
<a name="line-88"></a>&gt; Map.Map SrcSpan [Located AnnotationComment]
<a name="line-89"></a>
<a name="line-90"></a>PARSER STATE
<a name="line-91"></a>
<a name="line-92"></a>There are three fields in PState (the parser state) which play a role
<a name="line-93"></a>with annotations.
<a name="line-94"></a>
<a name="line-95"></a>&gt;  annotations :: [(ApiAnnKey,[SrcSpan])],
<a name="line-96"></a>&gt;  comment_q :: [Located AnnotationComment],
<a name="line-97"></a>&gt;  annotations_comments :: [(SrcSpan,[Located AnnotationComment])]
<a name="line-98"></a>
<a name="line-99"></a>The 'annotations' and 'annotations_comments' fields are simple: they simply
<a name="line-100"></a>accumulate annotations that will end up in 'ApiAnns' at the end
<a name="line-101"></a>(after they are passed to Map.fromList).
<a name="line-102"></a>
<a name="line-103"></a>The 'comment_q' field captures comments as they are seen in the token stream,
<a name="line-104"></a>so that when they are ready to be allocated via the parser they are
<a name="line-105"></a>available (at the time we lex a comment, we don't know what the enclosing
<a name="line-106"></a>AST node of it is, so we can't associate it with a SrcSpan in
<a name="line-107"></a>annotations_comments).
<a name="line-108"></a>
<a name="line-109"></a>PARSER EMISSION OF ANNOTATIONS
<a name="line-110"></a>
<a name="line-111"></a>The parser interacts with the lexer using the function
<a name="line-112"></a>
<a name="line-113"></a>&gt; addAnnotation :: SrcSpan -&gt; AnnKeywordId -&gt; SrcSpan -&gt; P ()
<a name="line-114"></a>
<a name="line-115"></a>which takes the AST element SrcSpan, the annotation keyword and the
<a name="line-116"></a>target SrcSpan.
<a name="line-117"></a>
<a name="line-118"></a>This adds the annotation to the `annotations` field of `PState` and
<a name="line-119"></a>transfers any comments in `comment_q` WHICH ARE ENCLOSED by
<a name="line-120"></a>the SrcSpan of this element to the `annotations_comments`
<a name="line-121"></a>field.  (Comments which are outside of this annotation are deferred
<a name="line-122"></a>until later. 'allocateComments' in 'Lexer' is responsible for
<a name="line-123"></a>making sure we only attach comments that actually fit in the 'SrcSpan'.)
<a name="line-124"></a>
<a name="line-125"></a>The wiki page describing this feature is
<a name="line-126"></a>https://ghc.haskell.org/trac/ghc/wiki/ApiAnnotations
<a name="line-127"></a>
<a name="line-128"></a>-}</span>
<a name="line-129"></a><span class='hs-comment'>-- ---------------------------------------------------------------------</span>
<a name="line-130"></a>
<a name="line-131"></a><a name="ApiAnns"></a><span class='hs-comment'>-- If you update this, update the Note [Api annotations] above</span>
<a name="line-132"></a><a name="ApiAnns"></a><span class='hs-keyword'>type</span> <span class='hs-conid'>ApiAnns</span> <span class='hs-keyglyph'>=</span> <span class='hs-layout'>(</span> <span class='hs-conid'>Map</span><span class='hs-varop'>.</span><span class='hs-conid'>Map</span> <span class='hs-conid'>ApiAnnKey</span> <span class='hs-keyglyph'>[</span><span class='hs-conid'>SrcSpan</span><span class='hs-keyglyph'>]</span>
<a name="line-133"></a>               <span class='hs-layout'>,</span> <span class='hs-conid'>Map</span><span class='hs-varop'>.</span><span class='hs-conid'>Map</span> <span class='hs-conid'>SrcSpan</span> <span class='hs-keyglyph'>[</span><span class='hs-conid'>Located</span> <span class='hs-conid'>AnnotationComment</span><span class='hs-keyglyph'>]</span><span class='hs-layout'>)</span>
<a name="line-134"></a>
<a name="line-135"></a><a name="ApiAnnKey"></a><span class='hs-comment'>-- If you update this, update the Note [Api annotations] above</span>
<a name="line-136"></a><a name="ApiAnnKey"></a><span class='hs-keyword'>type</span> <span class='hs-conid'>ApiAnnKey</span> <span class='hs-keyglyph'>=</span> <span class='hs-layout'>(</span><span class='hs-conid'>SrcSpan</span><span class='hs-layout'>,</span><span class='hs-conid'>AnnKeywordId</span><span class='hs-layout'>)</span>
<a name="line-137"></a>
<a name="line-138"></a>
<a name="line-139"></a><a name="getAnnotation"></a><span class='hs-comment'>-- | Retrieve a list of annotation 'SrcSpan's based on the 'SrcSpan'</span>
<a name="line-140"></a><span class='hs-comment'>-- of the annotated AST element, and the known type of the annotation.</span>
<a name="line-141"></a><span class='hs-definition'>getAnnotation</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>ApiAnns</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>SrcSpan</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>AnnKeywordId</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-keyglyph'>[</span><span class='hs-conid'>SrcSpan</span><span class='hs-keyglyph'>]</span>
<a name="line-142"></a><span class='hs-definition'>getAnnotation</span> <span class='hs-layout'>(</span><span class='hs-varid'>anns</span><span class='hs-layout'>,</span><span class='hs-keyword'>_</span><span class='hs-layout'>)</span> <span class='hs-varid'>span</span> <span class='hs-varid'>ann</span>
<a name="line-143"></a>   <span class='hs-keyglyph'>=</span> <span class='hs-keyword'>case</span> <span class='hs-conid'>Map</span><span class='hs-varop'>.</span><span class='hs-varid'>lookup</span> <span class='hs-layout'>(</span><span class='hs-varid'>span</span><span class='hs-layout'>,</span><span class='hs-varid'>ann</span><span class='hs-layout'>)</span> <span class='hs-varid'>anns</span> <span class='hs-keyword'>of</span>
<a name="line-144"></a>       <span class='hs-conid'>Nothing</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>[]</span>
<a name="line-145"></a>       <span class='hs-conid'>Just</span> <span class='hs-varid'>ss</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-varid'>ss</span>
<a name="line-146"></a>
<a name="line-147"></a><a name="getAndRemoveAnnotation"></a><span class='hs-comment'>-- | Retrieve a list of annotation 'SrcSpan's based on the 'SrcSpan'</span>
<a name="line-148"></a><span class='hs-comment'>-- of the annotated AST element, and the known type of the annotation.</span>
<a name="line-149"></a><span class='hs-comment'>-- The list is removed from the annotations.</span>
<a name="line-150"></a><span class='hs-definition'>getAndRemoveAnnotation</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>ApiAnns</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>SrcSpan</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>AnnKeywordId</span>
<a name="line-151"></a>                       <span class='hs-keyglyph'>-&gt;</span> <span class='hs-layout'>(</span><span class='hs-keyglyph'>[</span><span class='hs-conid'>SrcSpan</span><span class='hs-keyglyph'>]</span><span class='hs-layout'>,</span><span class='hs-conid'>ApiAnns</span><span class='hs-layout'>)</span>
<a name="line-152"></a><span class='hs-definition'>getAndRemoveAnnotation</span> <span class='hs-layout'>(</span><span class='hs-varid'>anns</span><span class='hs-layout'>,</span><span class='hs-varid'>cs</span><span class='hs-layout'>)</span> <span class='hs-varid'>span</span> <span class='hs-varid'>ann</span>
<a name="line-153"></a>   <span class='hs-keyglyph'>=</span> <span class='hs-keyword'>case</span> <span class='hs-conid'>Map</span><span class='hs-varop'>.</span><span class='hs-varid'>lookup</span> <span class='hs-layout'>(</span><span class='hs-varid'>span</span><span class='hs-layout'>,</span><span class='hs-varid'>ann</span><span class='hs-layout'>)</span> <span class='hs-varid'>anns</span> <span class='hs-keyword'>of</span>
<a name="line-154"></a>       <span class='hs-conid'>Nothing</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-layout'>(</span><span class='hs-conid'>[]</span><span class='hs-layout'>,</span><span class='hs-layout'>(</span><span class='hs-varid'>anns</span><span class='hs-layout'>,</span><span class='hs-varid'>cs</span><span class='hs-layout'>)</span><span class='hs-layout'>)</span>
<a name="line-155"></a>       <span class='hs-conid'>Just</span> <span class='hs-varid'>ss</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-layout'>(</span><span class='hs-varid'>ss</span><span class='hs-layout'>,</span><span class='hs-layout'>(</span><span class='hs-conid'>Map</span><span class='hs-varop'>.</span><span class='hs-varid'>delete</span> <span class='hs-layout'>(</span><span class='hs-varid'>span</span><span class='hs-layout'>,</span><span class='hs-varid'>ann</span><span class='hs-layout'>)</span> <span class='hs-varid'>anns</span><span class='hs-layout'>,</span><span class='hs-varid'>cs</span><span class='hs-layout'>)</span><span class='hs-layout'>)</span>
<a name="line-156"></a>
<a name="line-157"></a><a name="getAnnotationComments"></a><span class='hs-comment'>-- |Retrieve the comments allocated to the current 'SrcSpan'</span>
<a name="line-158"></a><span class='hs-comment'>--</span>
<a name="line-159"></a><span class='hs-comment'>--  Note: A given 'SrcSpan' may appear in multiple AST elements,</span>
<a name="line-160"></a><span class='hs-comment'>--  beware of duplicates</span>
<a name="line-161"></a><span class='hs-definition'>getAnnotationComments</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>ApiAnns</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>SrcSpan</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-keyglyph'>[</span><span class='hs-conid'>Located</span> <span class='hs-conid'>AnnotationComment</span><span class='hs-keyglyph'>]</span>
<a name="line-162"></a><span class='hs-definition'>getAnnotationComments</span> <span class='hs-layout'>(</span><span class='hs-keyword'>_</span><span class='hs-layout'>,</span><span class='hs-varid'>anns</span><span class='hs-layout'>)</span> <span class='hs-varid'>span</span> <span class='hs-keyglyph'>=</span>
<a name="line-163"></a>  <span class='hs-keyword'>case</span> <span class='hs-conid'>Map</span><span class='hs-varop'>.</span><span class='hs-varid'>lookup</span> <span class='hs-varid'>span</span> <span class='hs-varid'>anns</span> <span class='hs-keyword'>of</span>
<a name="line-164"></a>    <span class='hs-conid'>Just</span> <span class='hs-varid'>cs</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-varid'>cs</span>
<a name="line-165"></a>    <span class='hs-conid'>Nothing</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>[]</span>
<a name="line-166"></a>
<a name="line-167"></a><a name="getAndRemoveAnnotationComments"></a><span class='hs-comment'>-- |Retrieve the comments allocated to the current 'SrcSpan', and</span>
<a name="line-168"></a><span class='hs-comment'>-- remove them from the annotations</span>
<a name="line-169"></a><span class='hs-definition'>getAndRemoveAnnotationComments</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>ApiAnns</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>SrcSpan</span>
<a name="line-170"></a>                               <span class='hs-keyglyph'>-&gt;</span> <span class='hs-layout'>(</span><span class='hs-keyglyph'>[</span><span class='hs-conid'>Located</span> <span class='hs-conid'>AnnotationComment</span><span class='hs-keyglyph'>]</span><span class='hs-layout'>,</span><span class='hs-conid'>ApiAnns</span><span class='hs-layout'>)</span>
<a name="line-171"></a><span class='hs-definition'>getAndRemoveAnnotationComments</span> <span class='hs-layout'>(</span><span class='hs-varid'>anns</span><span class='hs-layout'>,</span><span class='hs-varid'>canns</span><span class='hs-layout'>)</span> <span class='hs-varid'>span</span> <span class='hs-keyglyph'>=</span>
<a name="line-172"></a>  <span class='hs-keyword'>case</span> <span class='hs-conid'>Map</span><span class='hs-varop'>.</span><span class='hs-varid'>lookup</span> <span class='hs-varid'>span</span> <span class='hs-varid'>canns</span> <span class='hs-keyword'>of</span>
<a name="line-173"></a>    <span class='hs-conid'>Just</span> <span class='hs-varid'>cs</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-layout'>(</span><span class='hs-varid'>cs</span><span class='hs-layout'>,</span><span class='hs-layout'>(</span><span class='hs-varid'>anns</span><span class='hs-layout'>,</span><span class='hs-conid'>Map</span><span class='hs-varop'>.</span><span class='hs-varid'>delete</span> <span class='hs-varid'>span</span> <span class='hs-varid'>canns</span><span class='hs-layout'>)</span><span class='hs-layout'>)</span>
<a name="line-174"></a>    <span class='hs-conid'>Nothing</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-layout'>(</span><span class='hs-conid'>[]</span><span class='hs-layout'>,</span><span class='hs-layout'>(</span><span class='hs-varid'>anns</span><span class='hs-layout'>,</span><span class='hs-varid'>canns</span><span class='hs-layout'>)</span><span class='hs-layout'>)</span>
<a name="line-175"></a>
<a name="line-176"></a><span class='hs-comment'>-- --------------------------------------------------------------------</span>
<a name="line-177"></a>
<a name="line-178"></a><a name="AnnKeywordId"></a><span class='hs-comment'>-- | API Annotations exist so that tools can perform source to source</span>
<a name="line-179"></a><a name="AnnKeywordId"></a><span class='hs-comment'>-- conversions of Haskell code. They are used to keep track of the</span>
<a name="line-180"></a><a name="AnnKeywordId"></a><span class='hs-comment'>-- various syntactic keywords that are not captured in the existing</span>
<a name="line-181"></a><a name="AnnKeywordId"></a><span class='hs-comment'>-- AST.</span>
<a name="line-182"></a><a name="AnnKeywordId"></a><span class='hs-comment'>--</span>
<a name="line-183"></a><a name="AnnKeywordId"></a><span class='hs-comment'>-- The annotations, together with original source comments are made</span>
<a name="line-184"></a><a name="AnnKeywordId"></a><span class='hs-comment'>-- available in the @'pm_annotations'@ field of @'GHC.ParsedModule'@.</span>
<a name="line-185"></a><a name="AnnKeywordId"></a><span class='hs-comment'>-- Comments are only retained if @'Opt_KeepRawTokenStream'@ is set in</span>
<a name="line-186"></a><a name="AnnKeywordId"></a><span class='hs-comment'>-- @'DynFlags.DynFlags'@ before parsing.</span>
<a name="line-187"></a><a name="AnnKeywordId"></a><span class='hs-comment'>--</span>
<a name="line-188"></a><a name="AnnKeywordId"></a><span class='hs-comment'>-- The wiki page describing this feature is</span>
<a name="line-189"></a><a name="AnnKeywordId"></a><span class='hs-comment'>-- https://ghc.haskell.org/trac/ghc/wiki/ApiAnnotations</span>
<a name="line-190"></a><a name="AnnKeywordId"></a><span class='hs-comment'>--</span>
<a name="line-191"></a><a name="AnnKeywordId"></a><span class='hs-comment'>-- Note: in general the names of these are taken from the</span>
<a name="line-192"></a><a name="AnnKeywordId"></a><span class='hs-comment'>-- corresponding token, unless otherwise noted</span>
<a name="line-193"></a><a name="AnnKeywordId"></a><span class='hs-comment'>-- See note [Api annotations] above for details of the usage</span>
<a name="line-194"></a><a name="AnnKeywordId"></a><span class='hs-keyword'>data</span> <span class='hs-conid'>AnnKeywordId</span>
<a name="line-195"></a>    <span class='hs-keyglyph'>=</span> <span class='hs-conid'>AnnAnyclass</span>
<a name="line-196"></a>    <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnAs</span>
<a name="line-197"></a>    <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnAt</span>
<a name="line-198"></a>    <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnBang</span>  <span class='hs-comment'>-- ^ '!'</span>
<a name="line-199"></a>    <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnBackquote</span> <span class='hs-comment'>-- ^ '`'</span>
<a name="line-200"></a>    <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnBy</span>
<a name="line-201"></a>    <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnCase</span> <span class='hs-comment'>-- ^ case or lambda case</span>
<a name="line-202"></a>    <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnClass</span>
<a name="line-203"></a>    <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnClose</span> <span class='hs-comment'>-- ^  '\#)' or '\#-}'  etc</span>
<a name="line-204"></a>    <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnCloseB</span> <span class='hs-comment'>-- ^ '|)'</span>
<a name="line-205"></a>    <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnCloseBU</span> <span class='hs-comment'>-- ^ '|)', unicode variant</span>
<a name="line-206"></a>    <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnCloseC</span> <span class='hs-comment'>-- ^ '}'</span>
<a name="line-207"></a>    <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnCloseQ</span>  <span class='hs-comment'>-- ^ '|]'</span>
<a name="line-208"></a>    <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnCloseQU</span> <span class='hs-comment'>-- ^ '|]', unicode variant</span>
<a name="line-209"></a>    <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnCloseP</span> <span class='hs-comment'>-- ^ ')'</span>
<a name="line-210"></a>    <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnCloseS</span> <span class='hs-comment'>-- ^ ']'</span>
<a name="line-211"></a>    <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnColon</span>
<a name="line-212"></a>    <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnComma</span> <span class='hs-comment'>-- ^ as a list separator</span>
<a name="line-213"></a>    <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnCommaTuple</span> <span class='hs-comment'>-- ^ in a RdrName for a tuple</span>
<a name="line-214"></a>    <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnDarrow</span> <span class='hs-comment'>-- ^ '=&gt;'</span>
<a name="line-215"></a>    <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnDarrowU</span> <span class='hs-comment'>-- ^ '=&gt;', unicode variant</span>
<a name="line-216"></a>    <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnData</span>
<a name="line-217"></a>    <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnDcolon</span> <span class='hs-comment'>-- ^ '::'</span>
<a name="line-218"></a>    <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnDcolonU</span> <span class='hs-comment'>-- ^ '::', unicode variant</span>
<a name="line-219"></a>    <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnDefault</span>
<a name="line-220"></a>    <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnDeriving</span>
<a name="line-221"></a>    <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnDo</span>
<a name="line-222"></a>    <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnDot</span>    <span class='hs-comment'>-- ^ '.'</span>
<a name="line-223"></a>    <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnDotdot</span> <span class='hs-comment'>-- ^ '..'</span>
<a name="line-224"></a>    <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnElse</span>
<a name="line-225"></a>    <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnEqual</span>
<a name="line-226"></a>    <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnExport</span>
<a name="line-227"></a>    <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnFamily</span>
<a name="line-228"></a>    <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnForall</span>
<a name="line-229"></a>    <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnForallU</span> <span class='hs-comment'>-- ^ Unicode variant</span>
<a name="line-230"></a>    <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnForeign</span>
<a name="line-231"></a>    <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnFunId</span> <span class='hs-comment'>-- ^ for function name in matches where there are</span>
<a name="line-232"></a>               <span class='hs-comment'>-- multiple equations for the function.</span>
<a name="line-233"></a>    <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnGroup</span>
<a name="line-234"></a>    <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnHeader</span> <span class='hs-comment'>-- ^ for CType</span>
<a name="line-235"></a>    <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnHiding</span>
<a name="line-236"></a>    <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnIf</span>
<a name="line-237"></a>    <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnImport</span>
<a name="line-238"></a>    <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnIn</span>
<a name="line-239"></a>    <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnInfix</span> <span class='hs-comment'>-- ^ 'infix' or 'infixl' or 'infixr'</span>
<a name="line-240"></a>    <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnInstance</span>
<a name="line-241"></a>    <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnLam</span>
<a name="line-242"></a>    <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnLarrow</span>     <span class='hs-comment'>-- ^ '&lt;-'</span>
<a name="line-243"></a>    <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnLarrowU</span>    <span class='hs-comment'>-- ^ '&lt;-', unicode variant</span>
<a name="line-244"></a>    <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnLet</span>
<a name="line-245"></a>    <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnMdo</span>
<a name="line-246"></a>    <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnMinus</span> <span class='hs-comment'>-- ^ '-'</span>
<a name="line-247"></a>    <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnModule</span>
<a name="line-248"></a>    <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnNewtype</span>
<a name="line-249"></a>    <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnName</span> <span class='hs-comment'>-- ^ where a name loses its location in the AST, this carries it</span>
<a name="line-250"></a>    <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnOf</span>
<a name="line-251"></a>    <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnOpen</span>    <span class='hs-comment'>-- ^ '(\#' or '{-\# LANGUAGE' etc</span>
<a name="line-252"></a>    <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnOpenB</span>   <span class='hs-comment'>-- ^ '(|'</span>
<a name="line-253"></a>    <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnOpenBU</span>  <span class='hs-comment'>-- ^ '(|', unicode variant</span>
<a name="line-254"></a>    <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnOpenC</span>   <span class='hs-comment'>-- ^ '{'</span>
<a name="line-255"></a>    <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnOpenE</span>   <span class='hs-comment'>-- ^ '[e|' or '[e||'</span>
<a name="line-256"></a>    <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnOpenEQ</span>  <span class='hs-comment'>-- ^ '[|'</span>
<a name="line-257"></a>    <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnOpenEQU</span> <span class='hs-comment'>-- ^ '[|', unicode variant</span>
<a name="line-258"></a>    <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnOpenP</span>   <span class='hs-comment'>-- ^ '('</span>
<a name="line-259"></a>    <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnOpenPE</span>  <span class='hs-comment'>-- ^ '$('</span>
<a name="line-260"></a>    <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnOpenPTE</span> <span class='hs-comment'>-- ^ '$$('</span>
<a name="line-261"></a>    <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnOpenS</span>   <span class='hs-comment'>-- ^ '['</span>
<a name="line-262"></a>    <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnPackageName</span>
<a name="line-263"></a>    <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnPattern</span>
<a name="line-264"></a>    <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnProc</span>
<a name="line-265"></a>    <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnQualified</span>
<a name="line-266"></a>    <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnRarrow</span> <span class='hs-comment'>-- ^ '-&gt;'</span>
<a name="line-267"></a>    <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnRarrowU</span> <span class='hs-comment'>-- ^ '-&gt;', unicode variant</span>
<a name="line-268"></a>    <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnRec</span>
<a name="line-269"></a>    <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnRole</span>
<a name="line-270"></a>    <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnSafe</span>
<a name="line-271"></a>    <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnSemi</span> <span class='hs-comment'>-- ^ ';'</span>
<a name="line-272"></a>    <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnSimpleQuote</span> <span class='hs-comment'>-- ^ '''</span>
<a name="line-273"></a>    <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnSignature</span>
<a name="line-274"></a>    <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnStatic</span> <span class='hs-comment'>-- ^ 'static'</span>
<a name="line-275"></a>    <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnStock</span>
<a name="line-276"></a>    <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnThen</span>
<a name="line-277"></a>    <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnThIdSplice</span> <span class='hs-comment'>-- ^ '$'</span>
<a name="line-278"></a>    <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnThIdTySplice</span> <span class='hs-comment'>-- ^ '$$'</span>
<a name="line-279"></a>    <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnThTyQuote</span> <span class='hs-comment'>-- ^ double '''</span>
<a name="line-280"></a>    <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnTilde</span> <span class='hs-comment'>-- ^ '~'</span>
<a name="line-281"></a>    <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnTildehsh</span> <span class='hs-comment'>-- ^ '~#'</span>
<a name="line-282"></a>    <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnType</span>
<a name="line-283"></a>    <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnUnit</span> <span class='hs-comment'>-- ^ '()' for types</span>
<a name="line-284"></a>    <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnUsing</span>
<a name="line-285"></a>    <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnVal</span>  <span class='hs-comment'>-- ^ e.g. INTEGER</span>
<a name="line-286"></a>    <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnValStr</span>  <span class='hs-comment'>-- ^ String value, will need quotes when output</span>
<a name="line-287"></a>    <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnVbar</span> <span class='hs-comment'>-- ^ '|'</span>
<a name="line-288"></a>    <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnWhere</span>
<a name="line-289"></a>    <span class='hs-keyglyph'>|</span> <span class='hs-conid'>Annlarrowtail</span> <span class='hs-comment'>-- ^ '-&lt;'</span>
<a name="line-290"></a>    <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnlarrowtailU</span> <span class='hs-comment'>-- ^ '-&lt;', unicode variant</span>
<a name="line-291"></a>    <span class='hs-keyglyph'>|</span> <span class='hs-conid'>Annrarrowtail</span> <span class='hs-comment'>-- ^ '-&gt;'</span>
<a name="line-292"></a>    <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnrarrowtailU</span> <span class='hs-comment'>-- ^ '-&gt;', unicode variant</span>
<a name="line-293"></a>    <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnLarrowtail</span> <span class='hs-comment'>-- ^ '-&lt;&lt;'</span>
<a name="line-294"></a>    <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnLarrowtailU</span> <span class='hs-comment'>-- ^ '-&lt;&lt;', unicode variant</span>
<a name="line-295"></a>    <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnRarrowtail</span> <span class='hs-comment'>-- ^ '&gt;&gt;-'</span>
<a name="line-296"></a>    <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnRarrowtailU</span> <span class='hs-comment'>-- ^ '&gt;&gt;-', unicode variant</span>
<a name="line-297"></a>    <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnEofPos</span>
<a name="line-298"></a>    <span class='hs-keyword'>deriving</span> <span class='hs-layout'>(</span><span class='hs-conid'>Eq</span><span class='hs-layout'>,</span> <span class='hs-conid'>Ord</span><span class='hs-layout'>,</span> <span class='hs-conid'>Data</span><span class='hs-layout'>,</span> <span class='hs-conid'>Show</span><span class='hs-layout'>)</span>
<a name="line-299"></a>
<a name="line-300"></a><a name="instance%20Outputable%20AnnKeywordId"></a><span class='hs-keyword'>instance</span> <span class='hs-conid'>Outputable</span> <span class='hs-conid'>AnnKeywordId</span> <span class='hs-keyword'>where</span>
<a name="line-301"></a>  <span class='hs-varid'>ppr</span> <span class='hs-varid'>x</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>text</span> <span class='hs-layout'>(</span><span class='hs-varid'>show</span> <span class='hs-varid'>x</span><span class='hs-layout'>)</span>
<a name="line-302"></a>
<a name="line-303"></a><span class='hs-comment'>-- ---------------------------------------------------------------------</span>
<a name="line-304"></a>
<a name="line-305"></a><a name="AnnotationComment"></a><span class='hs-keyword'>data</span> <span class='hs-conid'>AnnotationComment</span> <span class='hs-keyglyph'>=</span>
<a name="line-306"></a>  <span class='hs-comment'>-- Documentation annotations</span>
<a name="line-307"></a>    <span class='hs-conid'>AnnDocCommentNext</span>  <span class='hs-conid'>String</span>     <span class='hs-comment'>-- ^ something beginning '-- |'</span>
<a name="line-308"></a>  <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnDocCommentPrev</span>  <span class='hs-conid'>String</span>     <span class='hs-comment'>-- ^ something beginning '-- ^'</span>
<a name="line-309"></a>  <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnDocCommentNamed</span> <span class='hs-conid'>String</span>     <span class='hs-comment'>-- ^ something beginning '-- $'</span>
<a name="line-310"></a>  <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnDocSection</span>      <span class='hs-conid'>Int</span> <span class='hs-conid'>String</span> <span class='hs-comment'>-- ^ a section heading</span>
<a name="line-311"></a>  <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnDocOptions</span>      <span class='hs-conid'>String</span>     <span class='hs-comment'>-- ^ doc options (prune, ignore-exports, etc)</span>
<a name="line-312"></a>  <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnLineComment</span>     <span class='hs-conid'>String</span>     <span class='hs-comment'>-- ^ comment starting by "--"</span>
<a name="line-313"></a>  <span class='hs-keyglyph'>|</span> <span class='hs-conid'>AnnBlockComment</span>    <span class='hs-conid'>String</span>     <span class='hs-comment'>-- ^ comment in {- -}</span>
<a name="line-314"></a>    <span class='hs-keyword'>deriving</span> <span class='hs-layout'>(</span><span class='hs-conid'>Eq</span><span class='hs-layout'>,</span> <span class='hs-conid'>Ord</span><span class='hs-layout'>,</span> <span class='hs-conid'>Data</span><span class='hs-layout'>,</span> <span class='hs-conid'>Show</span><span class='hs-layout'>)</span>
<a name="line-315"></a><span class='hs-comment'>-- Note: these are based on the Token versions, but the Token type is</span>
<a name="line-316"></a><span class='hs-comment'>-- defined in Lexer.x and bringing it in here would create a loop</span>
<a name="line-317"></a>
<a name="line-318"></a><a name="instance%20Outputable%20AnnotationComment"></a><span class='hs-keyword'>instance</span> <span class='hs-conid'>Outputable</span> <span class='hs-conid'>AnnotationComment</span> <span class='hs-keyword'>where</span>
<a name="line-319"></a>  <span class='hs-varid'>ppr</span> <span class='hs-varid'>x</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>text</span> <span class='hs-layout'>(</span><span class='hs-varid'>show</span> <span class='hs-varid'>x</span><span class='hs-layout'>)</span>
<a name="line-320"></a>
<a name="line-321"></a><a name="LRdrName"></a><span class='hs-comment'>-- | - 'ApiAnnotation.AnnKeywordId' : 'ApiAnnotation.AnnOpen',</span>
<a name="line-322"></a><a name="LRdrName"></a><span class='hs-comment'>--             'ApiAnnotation.AnnClose','ApiAnnotation.AnnComma',</span>
<a name="line-323"></a><a name="LRdrName"></a><span class='hs-comment'>--             'ApiAnnotation.AnnRarrow','ApiAnnotation.AnnTildehsh',</span>
<a name="line-324"></a><a name="LRdrName"></a><span class='hs-comment'>--             'ApiAnnotation.AnnTilde'</span>
<a name="line-325"></a><a name="LRdrName"></a><span class='hs-comment'>--   - May have 'ApiAnnotation.AnnComma' when in a list</span>
<a name="line-326"></a><a name="LRdrName"></a><span class='hs-keyword'>type</span> <span class='hs-conid'>LRdrName</span> <span class='hs-keyglyph'>=</span> <span class='hs-conid'>Located</span> <span class='hs-conid'>RdrName</span>
<a name="line-327"></a>
<a name="line-328"></a>
<a name="line-329"></a><a name="IsUnicodeSyntax"></a><span class='hs-comment'>-- | Certain tokens can have alternate representations when unicode syntax is</span>
<a name="line-330"></a><a name="IsUnicodeSyntax"></a><span class='hs-comment'>-- enabled. This flag is attached to those tokens in the lexer so that the</span>
<a name="line-331"></a><a name="IsUnicodeSyntax"></a><span class='hs-comment'>-- original source representation can be reproduced in the corresponding</span>
<a name="line-332"></a><a name="IsUnicodeSyntax"></a><span class='hs-comment'>-- 'ApiAnnotation'</span>
<a name="line-333"></a><a name="IsUnicodeSyntax"></a><span class='hs-keyword'>data</span> <span class='hs-conid'>IsUnicodeSyntax</span> <span class='hs-keyglyph'>=</span> <span class='hs-conid'>UnicodeSyntax</span> <span class='hs-keyglyph'>|</span> <span class='hs-conid'>NormalSyntax</span>
<a name="line-334"></a>    <span class='hs-keyword'>deriving</span> <span class='hs-layout'>(</span><span class='hs-conid'>Eq</span><span class='hs-layout'>,</span> <span class='hs-conid'>Ord</span><span class='hs-layout'>,</span> <span class='hs-conid'>Data</span><span class='hs-layout'>,</span> <span class='hs-conid'>Show</span><span class='hs-layout'>)</span>
<a name="line-335"></a>
<a name="line-336"></a><a name="unicodeAnn"></a><span class='hs-comment'>-- | Convert a normal annotation into its unicode equivalent one</span>
<a name="line-337"></a><span class='hs-definition'>unicodeAnn</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>AnnKeywordId</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>AnnKeywordId</span>
<a name="line-338"></a><span class='hs-definition'>unicodeAnn</span> <span class='hs-conid'>AnnForall</span>     <span class='hs-keyglyph'>=</span> <span class='hs-conid'>AnnForallU</span>
<a name="line-339"></a><span class='hs-definition'>unicodeAnn</span> <span class='hs-conid'>AnnDcolon</span>     <span class='hs-keyglyph'>=</span> <span class='hs-conid'>AnnDcolonU</span>
<a name="line-340"></a><span class='hs-definition'>unicodeAnn</span> <span class='hs-conid'>AnnLarrow</span>     <span class='hs-keyglyph'>=</span> <span class='hs-conid'>AnnLarrowU</span>
<a name="line-341"></a><span class='hs-definition'>unicodeAnn</span> <span class='hs-conid'>AnnRarrow</span>     <span class='hs-keyglyph'>=</span> <span class='hs-conid'>AnnRarrowU</span>
<a name="line-342"></a><span class='hs-definition'>unicodeAnn</span> <span class='hs-conid'>AnnDarrow</span>     <span class='hs-keyglyph'>=</span> <span class='hs-conid'>AnnDarrowU</span>
<a name="line-343"></a><span class='hs-definition'>unicodeAnn</span> <span class='hs-conid'>Annlarrowtail</span> <span class='hs-keyglyph'>=</span> <span class='hs-conid'>AnnlarrowtailU</span>
<a name="line-344"></a><span class='hs-definition'>unicodeAnn</span> <span class='hs-conid'>Annrarrowtail</span> <span class='hs-keyglyph'>=</span> <span class='hs-conid'>AnnrarrowtailU</span>
<a name="line-345"></a><span class='hs-definition'>unicodeAnn</span> <span class='hs-conid'>AnnLarrowtail</span> <span class='hs-keyglyph'>=</span> <span class='hs-conid'>AnnLarrowtailU</span>
<a name="line-346"></a><span class='hs-definition'>unicodeAnn</span> <span class='hs-conid'>AnnRarrowtail</span> <span class='hs-keyglyph'>=</span> <span class='hs-conid'>AnnRarrowtailU</span>
<a name="line-347"></a><span class='hs-definition'>unicodeAnn</span> <span class='hs-conid'>AnnOpenB</span>      <span class='hs-keyglyph'>=</span> <span class='hs-conid'>AnnOpenBU</span>
<a name="line-348"></a><span class='hs-definition'>unicodeAnn</span> <span class='hs-conid'>AnnCloseB</span>     <span class='hs-keyglyph'>=</span> <span class='hs-conid'>AnnCloseBU</span>
<a name="line-349"></a><span class='hs-definition'>unicodeAnn</span> <span class='hs-conid'>AnnOpenEQ</span>     <span class='hs-keyglyph'>=</span> <span class='hs-conid'>AnnOpenEQU</span>
<a name="line-350"></a><span class='hs-definition'>unicodeAnn</span> <span class='hs-conid'>AnnCloseQ</span>     <span class='hs-keyglyph'>=</span> <span class='hs-conid'>AnnCloseQU</span>
<a name="line-351"></a><span class='hs-definition'>unicodeAnn</span> <span class='hs-varid'>ann</span>           <span class='hs-keyglyph'>=</span> <span class='hs-varid'>ann</span>
<a name="line-352"></a>
<a name="line-353"></a>
<a name="line-354"></a><a name="HasE"></a><span class='hs-comment'>-- | Some template haskell tokens have two variants, one with an `e` the other</span>
<a name="line-355"></a><a name="HasE"></a><span class='hs-comment'>-- not:</span>
<a name="line-356"></a><a name="HasE"></a><span class='hs-comment'>--</span>
<a name="line-357"></a><a name="HasE"></a><span class='hs-comment'>-- &gt;  [| or [e|</span>
<a name="line-358"></a><a name="HasE"></a><span class='hs-comment'>-- &gt;  [|| or [e||</span>
<a name="line-359"></a><a name="HasE"></a><span class='hs-comment'>--</span>
<a name="line-360"></a><a name="HasE"></a><span class='hs-comment'>-- This type indicates whether the 'e' is present or not.</span>
<a name="line-361"></a><a name="HasE"></a><span class='hs-keyword'>data</span> <span class='hs-conid'>HasE</span> <span class='hs-keyglyph'>=</span> <span class='hs-conid'>HasE</span> <span class='hs-keyglyph'>|</span> <span class='hs-conid'>NoE</span>
<a name="line-362"></a>     <span class='hs-keyword'>deriving</span> <span class='hs-layout'>(</span><span class='hs-conid'>Eq</span><span class='hs-layout'>,</span> <span class='hs-conid'>Ord</span><span class='hs-layout'>,</span> <span class='hs-conid'>Data</span><span class='hs-layout'>,</span> <span class='hs-conid'>Show</span><span class='hs-layout'>)</span>
</pre></body>
</html>
