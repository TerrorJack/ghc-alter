<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Vectorise.Monad.Global</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Vectorise-Monad-Global.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">ghc-8.3: The GHC API</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Vectorise.Monad.Global</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Configuration</a></li><li><a href="#g:2">Vars</a></li><li><a href="#g:3">Vectorisation declarations</a></li><li><a href="#g:4">Scalars</a></li><li><a href="#g:5">TyCons</a></li><li><a href="#g:6">Datacons</a></li><li><a href="#g:7">PA Dictionaries</a></li><li><a href="#g:8">PR Dictionaries</a></li></ul></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><a href="#v:readGEnv">readGEnv</a> :: (<a href="Vectorise-Env.html#t:GlobalEnv">GlobalEnv</a> -&gt; a) -&gt; <a href="Vectorise-Monad-Base.html#t:VM">VM</a> a</li><li class="src short"><a href="#v:setGEnv">setGEnv</a> :: <a href="Vectorise-Env.html#t:GlobalEnv">GlobalEnv</a> -&gt; <a href="Vectorise-Monad-Base.html#t:VM">VM</a> ()</li><li class="src short"><a href="#v:updGEnv">updGEnv</a> :: (<a href="Vectorise-Env.html#t:GlobalEnv">GlobalEnv</a> -&gt; <a href="Vectorise-Env.html#t:GlobalEnv">GlobalEnv</a>) -&gt; <a href="Vectorise-Monad-Base.html#t:VM">VM</a> ()</li><li class="src short"><a href="#v:isVectAvoidanceAggressive">isVectAvoidanceAggressive</a> :: <a href="Vectorise-Monad-Base.html#t:VM">VM</a> <a href="../base-4.10.0.0/Data-Bool.html#t:Bool">Bool</a></li><li class="src short"><a href="#v:defGlobalVar">defGlobalVar</a> :: <a href="Var.html#t:Var">Var</a> -&gt; <a href="Var.html#t:Var">Var</a> -&gt; <a href="Vectorise-Monad-Base.html#t:VM">VM</a> ()</li><li class="src short"><a href="#v:undefGlobalVar">undefGlobalVar</a> :: <a href="Var.html#t:Var">Var</a> -&gt; <a href="Vectorise-Monad-Base.html#t:VM">VM</a> ()</li><li class="src short"><a href="#v:lookupVectDecl">lookupVectDecl</a> :: <a href="Var.html#t:Var">Var</a> -&gt; <a href="Vectorise-Monad-Base.html#t:VM">VM</a> (<a href="../base-4.10.0.0/Data-Bool.html#t:Bool">Bool</a>, <a href="../base-4.10.0.0/Data-Maybe.html#t:Maybe">Maybe</a> (<a href="Type.html#t:Type">Type</a>, <a href="CoreSyn.html#t:CoreExpr">CoreExpr</a>))</li><li class="src short"><a href="#v:globalParallelVars">globalParallelVars</a> :: <a href="Vectorise-Monad-Base.html#t:VM">VM</a> <a href="VarSet.html#t:DVarSet">DVarSet</a></li><li class="src short"><a href="#v:globalParallelTyCons">globalParallelTyCons</a> :: <a href="Vectorise-Monad-Base.html#t:VM">VM</a> <a href="NameSet.html#t:NameSet">NameSet</a></li><li class="src short"><a href="#v:lookupTyCon">lookupTyCon</a> :: <a href="TyCon.html#t:TyCon">TyCon</a> -&gt; <a href="Vectorise-Monad-Base.html#t:VM">VM</a> (<a href="../base-4.10.0.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="TyCon.html#t:TyCon">TyCon</a>)</li><li class="src short"><a href="#v:defTyConName">defTyConName</a> :: <a href="TyCon.html#t:TyCon">TyCon</a> -&gt; <a href="Name.html#t:Name">Name</a> -&gt; <a href="TyCon.html#t:TyCon">TyCon</a> -&gt; <a href="Vectorise-Monad-Base.html#t:VM">VM</a> ()</li><li class="src short"><a href="#v:defTyCon">defTyCon</a> :: <a href="TyCon.html#t:TyCon">TyCon</a> -&gt; <a href="TyCon.html#t:TyCon">TyCon</a> -&gt; <a href="Vectorise-Monad-Base.html#t:VM">VM</a> ()</li><li class="src short"><a href="#v:globalVectTyCons">globalVectTyCons</a> :: <a href="Vectorise-Monad-Base.html#t:VM">VM</a> (<a href="NameEnv.html#t:NameEnv">NameEnv</a> <a href="TyCon.html#t:TyCon">TyCon</a>)</li><li class="src short"><a href="#v:lookupDataCon">lookupDataCon</a> :: <a href="DataCon.html#t:DataCon">DataCon</a> -&gt; <a href="Vectorise-Monad-Base.html#t:VM">VM</a> (<a href="../base-4.10.0.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="DataCon.html#t:DataCon">DataCon</a>)</li><li class="src short"><a href="#v:defDataCon">defDataCon</a> :: <a href="DataCon.html#t:DataCon">DataCon</a> -&gt; <a href="DataCon.html#t:DataCon">DataCon</a> -&gt; <a href="Vectorise-Monad-Base.html#t:VM">VM</a> ()</li><li class="src short"><a href="#v:lookupTyConPA">lookupTyConPA</a> :: <a href="TyCon.html#t:TyCon">TyCon</a> -&gt; <a href="Vectorise-Monad-Base.html#t:VM">VM</a> (<a href="../base-4.10.0.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Var.html#t:Var">Var</a>)</li><li class="src short"><a href="#v:defTyConPAs">defTyConPAs</a> :: [(<a href="TyCon.html#t:TyCon">TyCon</a>, <a href="Var.html#t:Var">Var</a>)] -&gt; <a href="Vectorise-Monad-Base.html#t:VM">VM</a> ()</li><li class="src short"><a href="#v:lookupTyConPR">lookupTyConPR</a> :: <a href="TyCon.html#t:TyCon">TyCon</a> -&gt; <a href="Vectorise-Monad-Base.html#t:VM">VM</a> (<a href="../base-4.10.0.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Var.html#t:Var">Var</a>)</li></ul></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><a id="v:readGEnv" class="def">readGEnv</a> :: (<a href="Vectorise-Env.html#t:GlobalEnv">GlobalEnv</a> -&gt; a) -&gt; <a href="Vectorise-Monad-Base.html#t:VM">VM</a> a <a href="src/Vectorise-Monad-Global.html#readGEnv" class="link">Source</a> <a href="#v:readGEnv" class="selflink">#</a></p><div class="doc"><p>Project something from the global environment.</p></div></div><div class="top"><p class="src"><a id="v:setGEnv" class="def">setGEnv</a> :: <a href="Vectorise-Env.html#t:GlobalEnv">GlobalEnv</a> -&gt; <a href="Vectorise-Monad-Base.html#t:VM">VM</a> () <a href="src/Vectorise-Monad-Global.html#setGEnv" class="link">Source</a> <a href="#v:setGEnv" class="selflink">#</a></p><div class="doc"><p>Set the value of the global environment.</p></div></div><div class="top"><p class="src"><a id="v:updGEnv" class="def">updGEnv</a> :: (<a href="Vectorise-Env.html#t:GlobalEnv">GlobalEnv</a> -&gt; <a href="Vectorise-Env.html#t:GlobalEnv">GlobalEnv</a>) -&gt; <a href="Vectorise-Monad-Base.html#t:VM">VM</a> () <a href="src/Vectorise-Monad-Global.html#updGEnv" class="link">Source</a> <a href="#v:updGEnv" class="selflink">#</a></p><div class="doc"><p>Update the global environment using the provided function.</p></div></div><h1 id="g:1">Configuration</h1><div class="top"><p class="src"><a id="v:isVectAvoidanceAggressive" class="def">isVectAvoidanceAggressive</a> :: <a href="Vectorise-Monad-Base.html#t:VM">VM</a> <a href="../base-4.10.0.0/Data-Bool.html#t:Bool">Bool</a> <a href="src/Vectorise-Monad-Global.html#isVectAvoidanceAggressive" class="link">Source</a> <a href="#v:isVectAvoidanceAggressive" class="selflink">#</a></p><div class="doc"><p>Should we avoid as much vectorisation as possible?</p><p>Set by '-f[no]-vectorisation-avoidance'</p></div></div><h1 id="g:2">Vars</h1><div class="top"><p class="src"><a id="v:defGlobalVar" class="def">defGlobalVar</a> :: <a href="Var.html#t:Var">Var</a> -&gt; <a href="Var.html#t:Var">Var</a> -&gt; <a href="Vectorise-Monad-Base.html#t:VM">VM</a> () <a href="src/Vectorise-Monad-Global.html#defGlobalVar" class="link">Source</a> <a href="#v:defGlobalVar" class="selflink">#</a></p><div class="doc"><p>Add a mapping between a global var and its vectorised version to the state.</p></div></div><div class="top"><p class="src"><a id="v:undefGlobalVar" class="def">undefGlobalVar</a> :: <a href="Var.html#t:Var">Var</a> -&gt; <a href="Vectorise-Monad-Base.html#t:VM">VM</a> () <a href="src/Vectorise-Monad-Global.html#undefGlobalVar" class="link">Source</a> <a href="#v:undefGlobalVar" class="selflink">#</a></p><div class="doc"><p>Remove the mapping of a variable in the vectorisation map.</p></div></div><h1 id="g:3">Vectorisation declarations</h1><div class="top"><p class="src"><a id="v:lookupVectDecl" class="def">lookupVectDecl</a> :: <a href="Var.html#t:Var">Var</a> -&gt; <a href="Vectorise-Monad-Base.html#t:VM">VM</a> (<a href="../base-4.10.0.0/Data-Bool.html#t:Bool">Bool</a>, <a href="../base-4.10.0.0/Data-Maybe.html#t:Maybe">Maybe</a> (<a href="Type.html#t:Type">Type</a>, <a href="CoreSyn.html#t:CoreExpr">CoreExpr</a>)) <a href="src/Vectorise-Monad-Global.html#lookupVectDecl" class="link">Source</a> <a href="#v:lookupVectDecl" class="selflink">#</a></p><div class="doc"><p>Check whether a variable has a vectorisation declaration.</p><p>The first component of the result indicates whether the variable has a <code>NOVECTORISE</code> declaration.
 The second component contains the given type and expression in case of a <code>VECTORISE</code> declaration.</p></div></div><h1 id="g:4">Scalars</h1><div class="top"><p class="src"><a id="v:globalParallelVars" class="def">globalParallelVars</a> :: <a href="Vectorise-Monad-Base.html#t:VM">VM</a> <a href="VarSet.html#t:DVarSet">DVarSet</a> <a href="src/Vectorise-Monad-Global.html#globalParallelVars" class="link">Source</a> <a href="#v:globalParallelVars" class="selflink">#</a></p><div class="doc"><p>Get the set of global parallel variables.</p></div></div><div class="top"><p class="src"><a id="v:globalParallelTyCons" class="def">globalParallelTyCons</a> :: <a href="Vectorise-Monad-Base.html#t:VM">VM</a> <a href="NameSet.html#t:NameSet">NameSet</a> <a href="src/Vectorise-Monad-Global.html#globalParallelTyCons" class="link">Source</a> <a href="#v:globalParallelTyCons" class="selflink">#</a></p><div class="doc"><p>Get the set of all parallel type constructors (those that may embed parallelism) including both
 both those parallel type constructors declared in an imported module and those declared in the
 current module.</p></div></div><h1 id="g:5">TyCons</h1><div class="top"><p class="src"><a id="v:lookupTyCon" class="def">lookupTyCon</a> :: <a href="TyCon.html#t:TyCon">TyCon</a> -&gt; <a href="Vectorise-Monad-Base.html#t:VM">VM</a> (<a href="../base-4.10.0.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="TyCon.html#t:TyCon">TyCon</a>) <a href="src/Vectorise-Monad-Global.html#lookupTyCon" class="link">Source</a> <a href="#v:lookupTyCon" class="selflink">#</a></p><div class="doc"><p>Determine the vectorised version of a <code><a href="TyCon.html#t:TyCon">TyCon</a></code>. The vectorisation map in the global environment
 contains a vectorised version if the original <code><a href="TyCon.html#t:TyCon">TyCon</a></code> embeds any parallel arrays.</p></div></div><div class="top"><p class="src"><a id="v:defTyConName" class="def">defTyConName</a> :: <a href="TyCon.html#t:TyCon">TyCon</a> -&gt; <a href="Name.html#t:Name">Name</a> -&gt; <a href="TyCon.html#t:TyCon">TyCon</a> -&gt; <a href="Vectorise-Monad-Base.html#t:VM">VM</a> () <a href="src/Vectorise-Monad-Global.html#defTyConName" class="link">Source</a> <a href="#v:defTyConName" class="selflink">#</a></p><div class="doc"><p>Add a mapping between plain and vectorised <code><a href="TyCon.html#t:TyCon">TyCon</a></code>s to the global environment.</p><p>The second argument is only to enable tracing for (mutually) recursively defined type
 constructors, where we <em>must not</em> pull at the vectorised type constructors (because that would
 pull too early at the recursive knot).</p></div></div><div class="top"><p class="src"><a id="v:defTyCon" class="def">defTyCon</a> :: <a href="TyCon.html#t:TyCon">TyCon</a> -&gt; <a href="TyCon.html#t:TyCon">TyCon</a> -&gt; <a href="Vectorise-Monad-Base.html#t:VM">VM</a> () <a href="src/Vectorise-Monad-Global.html#defTyCon" class="link">Source</a> <a href="#v:defTyCon" class="selflink">#</a></p><div class="doc"><p>Add a mapping between plain and vectorised <code><a href="TyCon.html#t:TyCon">TyCon</a></code>s to the global environment.</p></div></div><div class="top"><p class="src"><a id="v:globalVectTyCons" class="def">globalVectTyCons</a> :: <a href="Vectorise-Monad-Base.html#t:VM">VM</a> (<a href="NameEnv.html#t:NameEnv">NameEnv</a> <a href="TyCon.html#t:TyCon">TyCon</a>) <a href="src/Vectorise-Monad-Global.html#globalVectTyCons" class="link">Source</a> <a href="#v:globalVectTyCons" class="selflink">#</a></p><div class="doc"><p>Get the set of all vectorised type constructors.</p></div></div><h1 id="g:6">Datacons</h1><div class="top"><p class="src"><a id="v:lookupDataCon" class="def">lookupDataCon</a> :: <a href="DataCon.html#t:DataCon">DataCon</a> -&gt; <a href="Vectorise-Monad-Base.html#t:VM">VM</a> (<a href="../base-4.10.0.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="DataCon.html#t:DataCon">DataCon</a>) <a href="src/Vectorise-Monad-Global.html#lookupDataCon" class="link">Source</a> <a href="#v:lookupDataCon" class="selflink">#</a></p><div class="doc"><p>Lookup the vectorised version of a <code><a href="DataCon.html#t:DataCon">DataCon</a></code> from the global environment.</p></div></div><div class="top"><p class="src"><a id="v:defDataCon" class="def">defDataCon</a> :: <a href="DataCon.html#t:DataCon">DataCon</a> -&gt; <a href="DataCon.html#t:DataCon">DataCon</a> -&gt; <a href="Vectorise-Monad-Base.html#t:VM">VM</a> () <a href="src/Vectorise-Monad-Global.html#defDataCon" class="link">Source</a> <a href="#v:defDataCon" class="selflink">#</a></p><div class="doc"><p>Add the mapping between plain and vectorised <code><a href="DataCon.html#t:DataCon">DataCon</a></code>s to the global environment.</p></div></div><h1 id="g:7">PA Dictionaries</h1><div class="top"><p class="src"><a id="v:lookupTyConPA" class="def">lookupTyConPA</a> :: <a href="TyCon.html#t:TyCon">TyCon</a> -&gt; <a href="Vectorise-Monad-Base.html#t:VM">VM</a> (<a href="../base-4.10.0.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Var.html#t:Var">Var</a>) <a href="src/Vectorise-Monad-Global.html#lookupTyConPA" class="link">Source</a> <a href="#v:lookupTyConPA" class="selflink">#</a></p><div class="doc"><p>Lookup the <code>PA</code> dfun of a vectorised type constructor in the global environment.</p></div></div><div class="top"><p class="src"><a id="v:defTyConPAs" class="def">defTyConPAs</a> :: [(<a href="TyCon.html#t:TyCon">TyCon</a>, <a href="Var.html#t:Var">Var</a>)] -&gt; <a href="Vectorise-Monad-Base.html#t:VM">VM</a> () <a href="src/Vectorise-Monad-Global.html#defTyConPAs" class="link">Source</a> <a href="#v:defTyConPAs" class="selflink">#</a></p><div class="doc"><p>Associate vectorised type constructors with the dfun of their <code>PA</code> instances in the global
 environment.</p></div></div><h1 id="g:8">PR Dictionaries</h1><div class="top"><p class="src"><a id="v:lookupTyConPR" class="def">lookupTyConPR</a> :: <a href="TyCon.html#t:TyCon">TyCon</a> -&gt; <a href="Vectorise-Monad-Base.html#t:VM">VM</a> (<a href="../base-4.10.0.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Var.html#t:Var">Var</a>) <a href="src/Vectorise-Monad-Global.html#lookupTyConPR" class="link">Source</a> <a href="#v:lookupTyConPR" class="selflink">#</a></p></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.18.2</p></div></body></html>