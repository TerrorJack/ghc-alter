<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>TcDerivUtils</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/TcDerivUtils.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">ghc-8.3: The GHC API</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">TcDerivUtils</p></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">type</span> <a href="#t:DerivM">DerivM</a> = <a href="../transformers-0.5.4.0/Control-Monad-Trans-Reader.html#t:ReaderT">ReaderT</a> <a href="TcDerivUtils.html#t:DerivEnv">DerivEnv</a> <a href="TcRnTypes.html#t:TcRn">TcRn</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:DerivEnv">DerivEnv</a> = <a href="#v:DerivEnv">DerivEnv</a> {<ul class="subs"><li><a href="#v:denv_overlap_mode">denv_overlap_mode</a> :: <a href="../base-4.10.0.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="BasicTypes.html#t:OverlapMode">OverlapMode</a></li><li><a href="#v:denv_tvs">denv_tvs</a> :: [<a href="Var.html#t:TyVar">TyVar</a>]</li><li><a href="#v:denv_cls">denv_cls</a> :: <a href="Class.html#t:Class">Class</a></li><li><a href="#v:denv_cls_tys">denv_cls_tys</a> :: [<a href="Type.html#t:Type">Type</a>]</li><li><a href="#v:denv_tc">denv_tc</a> :: <a href="TyCon.html#t:TyCon">TyCon</a></li><li><a href="#v:denv_tc_args">denv_tc_args</a> :: [<a href="Type.html#t:Type">Type</a>]</li><li><a href="#v:denv_rep_tc">denv_rep_tc</a> :: <a href="TyCon.html#t:TyCon">TyCon</a></li><li><a href="#v:denv_rep_tc_args">denv_rep_tc_args</a> :: [<a href="Type.html#t:Type">Type</a>]</li><li><a href="#v:denv_mtheta">denv_mtheta</a> :: <a href="TcDerivUtils.html#t:DerivContext">DerivContext</a></li><li><a href="#v:denv_strat">denv_strat</a> :: <a href="../base-4.10.0.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="BasicTypes.html#t:DerivStrategy">DerivStrategy</a></li></ul>}</li><li class="src short"><span class="keyword">data</span> <a href="#t:DerivSpec">DerivSpec</a> theta = <a href="#v:DS">DS</a> {<ul class="subs"><li><a href="#v:ds_loc">ds_loc</a> :: <a href="SrcLoc.html#t:SrcSpan">SrcSpan</a></li><li><a href="#v:ds_name">ds_name</a> :: <a href="Name.html#t:Name">Name</a></li><li><a href="#v:ds_tvs">ds_tvs</a> :: [<a href="Var.html#t:TyVar">TyVar</a>]</li><li><a href="#v:ds_theta">ds_theta</a> :: theta</li><li><a href="#v:ds_cls">ds_cls</a> :: <a href="Class.html#t:Class">Class</a></li><li><a href="#v:ds_tys">ds_tys</a> :: [<a href="Type.html#t:Type">Type</a>]</li><li><a href="#v:ds_tc">ds_tc</a> :: <a href="TyCon.html#t:TyCon">TyCon</a></li><li><a href="#v:ds_overlap">ds_overlap</a> :: <a href="../base-4.10.0.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="BasicTypes.html#t:OverlapMode">OverlapMode</a></li><li><a href="#v:ds_mechanism">ds_mechanism</a> :: <a href="TcDerivUtils.html#t:DerivSpecMechanism">DerivSpecMechanism</a></li></ul>}</li><li class="src short"><a href="#v:pprDerivSpec">pprDerivSpec</a> :: <a href="Outputable.html#t:Outputable">Outputable</a> theta =&gt; <a href="TcDerivUtils.html#t:DerivSpec">DerivSpec</a> theta -&gt; <a href="Outputable.html#t:SDoc">SDoc</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:DerivSpecMechanism">DerivSpecMechanism</a><ul class="subs"><li>= <a href="#v:DerivSpecStock">DerivSpecStock</a> (<a href="SrcLoc.html#t:SrcSpan">SrcSpan</a> -&gt; <a href="TyCon.html#t:TyCon">TyCon</a> -&gt; [<a href="Type.html#t:Type">Type</a>] -&gt; <a href="TcRnTypes.html#t:TcM">TcM</a> (<a href="HsBinds.html#t:LHsBinds">LHsBinds</a> <a href="HsExtension.html#t:GhcPs">GhcPs</a>, <a href="TcGenDeriv.html#t:BagDerivStuff">BagDerivStuff</a>, [<a href="Name.html#t:Name">Name</a>]))</li><li>| <a href="#v:DerivSpecNewtype">DerivSpecNewtype</a> <a href="Type.html#t:Type">Type</a></li><li>| <a href="#v:DerivSpecAnyClass">DerivSpecAnyClass</a></li></ul></li><li class="src short"><a href="#v:isDerivSpecStock">isDerivSpecStock</a> :: <a href="TcDerivUtils.html#t:DerivSpecMechanism">DerivSpecMechanism</a> -&gt; <a href="../base-4.10.0.0/Data-Bool.html#t:Bool">Bool</a></li><li class="src short"><a href="#v:isDerivSpecNewtype">isDerivSpecNewtype</a> :: <a href="TcDerivUtils.html#t:DerivSpecMechanism">DerivSpecMechanism</a> -&gt; <a href="../base-4.10.0.0/Data-Bool.html#t:Bool">Bool</a></li><li class="src short"><a href="#v:isDerivSpecAnyClass">isDerivSpecAnyClass</a> :: <a href="TcDerivUtils.html#t:DerivSpecMechanism">DerivSpecMechanism</a> -&gt; <a href="../base-4.10.0.0/Data-Bool.html#t:Bool">Bool</a></li><li class="src short"><span class="keyword">type</span> <a href="#t:DerivContext">DerivContext</a> = <a href="../base-4.10.0.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Type.html#t:ThetaType">ThetaType</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:DerivStatus">DerivStatus</a><ul class="subs"><li>= <a href="#v:CanDerive">CanDerive</a></li><li>| <a href="#v:DerivableClassError">DerivableClassError</a> <a href="Outputable.html#t:SDoc">SDoc</a></li><li>| <a href="#v:DerivableViaInstance">DerivableViaInstance</a></li><li>| <a href="#v:NonDerivableClass">NonDerivableClass</a> <a href="Outputable.html#t:SDoc">SDoc</a></li></ul></li><li class="src short"><span class="keyword">data</span> <a href="#t:PredOrigin">PredOrigin</a> = <a href="#v:PredOrigin">PredOrigin</a> <a href="Type.html#t:PredType">PredType</a> <a href="TcRnTypes.html#t:CtOrigin">CtOrigin</a> <a href="TcRnTypes.html#t:TypeOrKind">TypeOrKind</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:ThetaOrigin">ThetaOrigin</a> = <a href="#v:ThetaOrigin">ThetaOrigin</a> {<ul class="subs"><li><a href="#v:to_tvs">to_tvs</a> :: [<a href="Var.html#t:TyVar">TyVar</a>]</li><li><a href="#v:to_givens">to_givens</a> :: <a href="Type.html#t:ThetaType">ThetaType</a></li><li><a href="#v:to_wanted_origins">to_wanted_origins</a> :: [<a href="TcDerivUtils.html#t:PredOrigin">PredOrigin</a>]</li></ul>}</li><li class="src short"><a href="#v:mkPredOrigin">mkPredOrigin</a> :: <a href="TcRnTypes.html#t:CtOrigin">CtOrigin</a> -&gt; <a href="TcRnTypes.html#t:TypeOrKind">TypeOrKind</a> -&gt; <a href="Type.html#t:PredType">PredType</a> -&gt; <a href="TcDerivUtils.html#t:PredOrigin">PredOrigin</a></li><li class="src short"><a href="#v:mkThetaOrigin">mkThetaOrigin</a> :: <a href="TcRnTypes.html#t:CtOrigin">CtOrigin</a> -&gt; <a href="TcRnTypes.html#t:TypeOrKind">TypeOrKind</a> -&gt; [<a href="Var.html#t:TyVar">TyVar</a>] -&gt; <a href="Type.html#t:ThetaType">ThetaType</a> -&gt; <a href="Type.html#t:ThetaType">ThetaType</a> -&gt; <a href="TcDerivUtils.html#t:ThetaOrigin">ThetaOrigin</a></li><li class="src short"><a href="#v:mkThetaOriginFromPreds">mkThetaOriginFromPreds</a> :: [<a href="TcDerivUtils.html#t:PredOrigin">PredOrigin</a>] -&gt; <a href="TcDerivUtils.html#t:ThetaOrigin">ThetaOrigin</a></li><li class="src short"><a href="#v:substPredOrigin">substPredOrigin</a> :: <a href="Util.html#t:HasCallStack">HasCallStack</a> =&gt; <a href="Type.html#t:TCvSubst">TCvSubst</a> -&gt; <a href="TcDerivUtils.html#t:PredOrigin">PredOrigin</a> -&gt; <a href="TcDerivUtils.html#t:PredOrigin">PredOrigin</a></li><li class="src short"><a href="#v:checkSideConditions">checkSideConditions</a> :: <a href="DynFlags.html#t:DynFlags">DynFlags</a> -&gt; <a href="TcDerivUtils.html#t:DerivContext">DerivContext</a> -&gt; <a href="Class.html#t:Class">Class</a> -&gt; [<a href="TcType.html#t:TcType">TcType</a>] -&gt; <a href="TyCon.html#t:TyCon">TyCon</a> -&gt; <a href="TcDerivUtils.html#t:DerivStatus">DerivStatus</a></li><li class="src short"><a href="#v:hasStockDeriving">hasStockDeriving</a> :: <a href="Class.html#t:Class">Class</a> -&gt; <a href="../base-4.10.0.0/Data-Maybe.html#t:Maybe">Maybe</a> (<a href="SrcLoc.html#t:SrcSpan">SrcSpan</a> -&gt; <a href="TyCon.html#t:TyCon">TyCon</a> -&gt; [<a href="Type.html#t:Type">Type</a>] -&gt; <a href="TcRnTypes.html#t:TcM">TcM</a> (<a href="HsBinds.html#t:LHsBinds">LHsBinds</a> <a href="HsExtension.html#t:GhcPs">GhcPs</a>, <a href="TcGenDeriv.html#t:BagDerivStuff">BagDerivStuff</a>, [<a href="Name.html#t:Name">Name</a>]))</li><li class="src short"><a href="#v:canDeriveAnyClass">canDeriveAnyClass</a> :: <a href="DynFlags.html#t:DynFlags">DynFlags</a> -&gt; <a href="ErrUtils.html#t:Validity">Validity</a></li><li class="src short"><a href="#v:std_class_via_coercible">std_class_via_coercible</a> :: <a href="Class.html#t:Class">Class</a> -&gt; <a href="../base-4.10.0.0/Data-Bool.html#t:Bool">Bool</a></li><li class="src short"><a href="#v:non_coercible_class">non_coercible_class</a> :: <a href="Class.html#t:Class">Class</a> -&gt; <a href="../base-4.10.0.0/Data-Bool.html#t:Bool">Bool</a></li><li class="src short"><a href="#v:newDerivClsInst">newDerivClsInst</a> :: <a href="Type.html#t:ThetaType">ThetaType</a> -&gt; <a href="TcDerivUtils.html#t:DerivSpec">DerivSpec</a> theta -&gt; <a href="TcRnTypes.html#t:TcM">TcM</a> <a href="InstEnv.html#t:ClsInst">ClsInst</a></li><li class="src short"><a href="#v:extendLocalInstEnv">extendLocalInstEnv</a> :: [<a href="InstEnv.html#t:ClsInst">ClsInst</a>] -&gt; <a href="TcRnTypes.html#t:TcM">TcM</a> a -&gt; <a href="TcRnTypes.html#t:TcM">TcM</a> a</li></ul></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:DerivM" class="def">DerivM</a> = <a href="../transformers-0.5.4.0/Control-Monad-Trans-Reader.html#t:ReaderT">ReaderT</a> <a href="TcDerivUtils.html#t:DerivEnv">DerivEnv</a> <a href="TcRnTypes.html#t:TcRn">TcRn</a> <a href="src/TcDerivUtils.html#DerivM" class="link">Source</a> <a href="#t:DerivM" class="selflink">#</a></p><div class="doc"><p>To avoid having to manually plumb everything in <code><a href="TcDerivUtils.html#t:DerivEnv">DerivEnv</a></code> throughout
 various functions in <code>TcDeriv</code> and <code>TcDerivInfer</code>, we use <code><a href="TcDerivUtils.html#t:DerivM">DerivM</a></code>, which
 is a simple reader around <code><a href="TcRnTypes.html#t:TcRn">TcRn</a></code>.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:DerivEnv" class="def">DerivEnv</a> <a href="src/TcDerivUtils.html#DerivEnv" class="link">Source</a> <a href="#t:DerivEnv" class="selflink">#</a></p><div class="doc"><p>Contains all of the information known about a derived instance when
 determining what its <code>EarlyDerivSpec</code> should be.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:DerivEnv" class="def">DerivEnv</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:denv_overlap_mode" class="def">denv_overlap_mode</a> :: <a href="../base-4.10.0.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="BasicTypes.html#t:OverlapMode">OverlapMode</a></dfn><div class="doc"><p>Is this an overlapping instance?</p></div></li><li><dfn class="src"><a id="v:denv_tvs" class="def">denv_tvs</a> :: [<a href="Var.html#t:TyVar">TyVar</a>]</dfn><div class="doc"><p>Universally quantified type variables in the instance</p></div></li><li><dfn class="src"><a id="v:denv_cls" class="def">denv_cls</a> :: <a href="Class.html#t:Class">Class</a></dfn><div class="doc"><p>Class for which we need to derive an instance</p></div></li><li><dfn class="src"><a id="v:denv_cls_tys" class="def">denv_cls_tys</a> :: [<a href="Type.html#t:Type">Type</a>]</dfn><div class="doc"><p>Other arguments to the class except the last</p></div></li><li><dfn class="src"><a id="v:denv_tc" class="def">denv_tc</a> :: <a href="TyCon.html#t:TyCon">TyCon</a></dfn><div class="doc"><p>Type constructor for which the instance is requested
   (last arguments to the type class)</p></div></li><li><dfn class="src"><a id="v:denv_tc_args" class="def">denv_tc_args</a> :: [<a href="Type.html#t:Type">Type</a>]</dfn><div class="doc"><p>Arguments to the type constructor</p></div></li><li><dfn class="src"><a id="v:denv_rep_tc" class="def">denv_rep_tc</a> :: <a href="TyCon.html#t:TyCon">TyCon</a></dfn><div class="doc"><p>The representation tycon for <code><a href="TcDerivUtils.html#v:denv_tc">denv_tc</a></code>
   (for data family instances)</p></div></li><li><dfn class="src"><a id="v:denv_rep_tc_args" class="def">denv_rep_tc_args</a> :: [<a href="Type.html#t:Type">Type</a>]</dfn><div class="doc"><p>The representation types for <code><a href="TcDerivUtils.html#v:denv_tc_args">denv_tc_args</a></code>
   (for data family instances)</p></div></li><li><dfn class="src"><a id="v:denv_mtheta" class="def">denv_mtheta</a> :: <a href="TcDerivUtils.html#t:DerivContext">DerivContext</a></dfn><div class="doc"><p><code><a href="../base-4.10.0.0/Data-Maybe.html#v:Just">Just</a></code> the context of the instance, for standalone deriving.
   <code><a href="../base-4.10.0.0/Data-Maybe.html#v:Nothing">Nothing</a></code> for <code>deriving</code> clauses.</p></div></li><li><dfn class="src"><a id="v:denv_strat" class="def">denv_strat</a> :: <a href="../base-4.10.0.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="BasicTypes.html#t:DerivStrategy">DerivStrategy</a></dfn><div class="doc"><p><code><a href="../base-4.10.0.0/Data-Maybe.html#v:Just">Just</a></code> if user requests a particular deriving strategy.
   Otherwise, <code><a href="../base-4.10.0.0/Data-Maybe.html#v:Nothing">Nothing</a></code>.</p></div></li></ul></div></td></tr></table></div><div class="subs instances"><p id="control.i:DerivEnv" class="caption collapser" onclick="toggleSection('i:DerivEnv')">Instances</p><div id="section.i:DerivEnv" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:DerivEnv:Outputable:1" class="instance expander" onclick="toggleSection('i:id:DerivEnv:Outputable:1')"></span> <a href="Outputable.html#t:Outputable">Outputable</a> <a href="TcDerivUtils.html#t:DerivEnv">DerivEnv</a></span> <a href="#t:DerivEnv" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:DerivEnv:Outputable:1" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:ppr">ppr</a> :: <a href="TcDerivUtils.html#t:DerivEnv">DerivEnv</a> -&gt; <a href="Outputable.html#t:SDoc">SDoc</a> <a href="src/Outputable.html#ppr" class="link">Source</a> <a href="#v:ppr" class="selflink">#</a></p><p class="src"><a href="#v:pprPrec">pprPrec</a> :: <a href="../base-4.10.0.0/Prelude.html#t:Rational">Rational</a> -&gt; <a href="TcDerivUtils.html#t:DerivEnv">DerivEnv</a> -&gt; <a href="Outputable.html#t:SDoc">SDoc</a> <a href="src/Outputable.html#pprPrec" class="link">Source</a> <a href="#v:pprPrec" class="selflink">#</a></p></div></div></td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:DerivSpec" class="def">DerivSpec</a> theta <a href="src/TcDerivUtils.html#DerivSpec" class="link">Source</a> <a href="#t:DerivSpec" class="selflink">#</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:DS" class="def">DS</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:ds_loc" class="def">ds_loc</a> :: <a href="SrcLoc.html#t:SrcSpan">SrcSpan</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:ds_name" class="def">ds_name</a> :: <a href="Name.html#t:Name">Name</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:ds_tvs" class="def">ds_tvs</a> :: [<a href="Var.html#t:TyVar">TyVar</a>]</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:ds_theta" class="def">ds_theta</a> :: theta</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:ds_cls" class="def">ds_cls</a> :: <a href="Class.html#t:Class">Class</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:ds_tys" class="def">ds_tys</a> :: [<a href="Type.html#t:Type">Type</a>]</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:ds_tc" class="def">ds_tc</a> :: <a href="TyCon.html#t:TyCon">TyCon</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:ds_overlap" class="def">ds_overlap</a> :: <a href="../base-4.10.0.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="BasicTypes.html#t:OverlapMode">OverlapMode</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:ds_mechanism" class="def">ds_mechanism</a> :: <a href="TcDerivUtils.html#t:DerivSpecMechanism">DerivSpecMechanism</a></dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div><div class="subs instances"><p id="control.i:DerivSpec" class="caption collapser" onclick="toggleSection('i:DerivSpec')">Instances</p><div id="section.i:DerivSpec" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:DerivSpec:Outputable:1" class="instance expander" onclick="toggleSection('i:id:DerivSpec:Outputable:1')"></span> <a href="Outputable.html#t:Outputable">Outputable</a> theta =&gt; <a href="Outputable.html#t:Outputable">Outputable</a> (<a href="TcDerivUtils.html#t:DerivSpec">DerivSpec</a> theta)</span> <a href="#t:DerivSpec" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:DerivSpec:Outputable:1" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:ppr">ppr</a> :: <a href="TcDerivUtils.html#t:DerivSpec">DerivSpec</a> theta -&gt; <a href="Outputable.html#t:SDoc">SDoc</a> <a href="src/Outputable.html#ppr" class="link">Source</a> <a href="#v:ppr" class="selflink">#</a></p><p class="src"><a href="#v:pprPrec">pprPrec</a> :: <a href="../base-4.10.0.0/Prelude.html#t:Rational">Rational</a> -&gt; <a href="TcDerivUtils.html#t:DerivSpec">DerivSpec</a> theta -&gt; <a href="Outputable.html#t:SDoc">SDoc</a> <a href="src/Outputable.html#pprPrec" class="link">Source</a> <a href="#v:pprPrec" class="selflink">#</a></p></div></div></td></tr></table></div></div></div><div class="top"><p class="src"><a id="v:pprDerivSpec" class="def">pprDerivSpec</a> :: <a href="Outputable.html#t:Outputable">Outputable</a> theta =&gt; <a href="TcDerivUtils.html#t:DerivSpec">DerivSpec</a> theta -&gt; <a href="Outputable.html#t:SDoc">SDoc</a> <a href="src/TcDerivUtils.html#pprDerivSpec" class="link">Source</a> <a href="#v:pprDerivSpec" class="selflink">#</a></p></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:DerivSpecMechanism" class="def">DerivSpecMechanism</a> <a href="src/TcDerivUtils.html#DerivSpecMechanism" class="link">Source</a> <a href="#t:DerivSpecMechanism" class="selflink">#</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:DerivSpecStock" class="def">DerivSpecStock</a> (<a href="SrcLoc.html#t:SrcSpan">SrcSpan</a> -&gt; <a href="TyCon.html#t:TyCon">TyCon</a> -&gt; [<a href="Type.html#t:Type">Type</a>] -&gt; <a href="TcRnTypes.html#t:TcM">TcM</a> (<a href="HsBinds.html#t:LHsBinds">LHsBinds</a> <a href="HsExtension.html#t:GhcPs">GhcPs</a>, <a href="TcGenDeriv.html#t:BagDerivStuff">BagDerivStuff</a>, [<a href="Name.html#t:Name">Name</a>]))</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:DerivSpecNewtype" class="def">DerivSpecNewtype</a> <a href="Type.html#t:Type">Type</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:DerivSpecAnyClass" class="def">DerivSpecAnyClass</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:DerivSpecMechanism" class="caption collapser" onclick="toggleSection('i:DerivSpecMechanism')">Instances</p><div id="section.i:DerivSpecMechanism" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:DerivSpecMechanism:Outputable:1" class="instance expander" onclick="toggleSection('i:id:DerivSpecMechanism:Outputable:1')"></span> <a href="Outputable.html#t:Outputable">Outputable</a> <a href="TcDerivUtils.html#t:DerivSpecMechanism">DerivSpecMechanism</a></span> <a href="#t:DerivSpecMechanism" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:DerivSpecMechanism:Outputable:1" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:ppr">ppr</a> :: <a href="TcDerivUtils.html#t:DerivSpecMechanism">DerivSpecMechanism</a> -&gt; <a href="Outputable.html#t:SDoc">SDoc</a> <a href="src/Outputable.html#ppr" class="link">Source</a> <a href="#v:ppr" class="selflink">#</a></p><p class="src"><a href="#v:pprPrec">pprPrec</a> :: <a href="../base-4.10.0.0/Prelude.html#t:Rational">Rational</a> -&gt; <a href="TcDerivUtils.html#t:DerivSpecMechanism">DerivSpecMechanism</a> -&gt; <a href="Outputable.html#t:SDoc">SDoc</a> <a href="src/Outputable.html#pprPrec" class="link">Source</a> <a href="#v:pprPrec" class="selflink">#</a></p></div></div></td></tr></table></div></div></div><div class="top"><p class="src"><a id="v:isDerivSpecStock" class="def">isDerivSpecStock</a> :: <a href="TcDerivUtils.html#t:DerivSpecMechanism">DerivSpecMechanism</a> -&gt; <a href="../base-4.10.0.0/Data-Bool.html#t:Bool">Bool</a> <a href="src/TcDerivUtils.html#isDerivSpecStock" class="link">Source</a> <a href="#v:isDerivSpecStock" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:isDerivSpecNewtype" class="def">isDerivSpecNewtype</a> :: <a href="TcDerivUtils.html#t:DerivSpecMechanism">DerivSpecMechanism</a> -&gt; <a href="../base-4.10.0.0/Data-Bool.html#t:Bool">Bool</a> <a href="src/TcDerivUtils.html#isDerivSpecNewtype" class="link">Source</a> <a href="#v:isDerivSpecNewtype" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:isDerivSpecAnyClass" class="def">isDerivSpecAnyClass</a> :: <a href="TcDerivUtils.html#t:DerivSpecMechanism">DerivSpecMechanism</a> -&gt; <a href="../base-4.10.0.0/Data-Bool.html#t:Bool">Bool</a> <a href="src/TcDerivUtils.html#isDerivSpecAnyClass" class="link">Source</a> <a href="#v:isDerivSpecAnyClass" class="selflink">#</a></p></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:DerivContext" class="def">DerivContext</a> = <a href="../base-4.10.0.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Type.html#t:ThetaType">ThetaType</a> <a href="src/TcDerivUtils.html#DerivContext" class="link">Source</a> <a href="#t:DerivContext" class="selflink">#</a></p></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:DerivStatus" class="def">DerivStatus</a> <a href="src/TcDerivUtils.html#DerivStatus" class="link">Source</a> <a href="#t:DerivStatus" class="selflink">#</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:CanDerive" class="def">CanDerive</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:DerivableClassError" class="def">DerivableClassError</a> <a href="Outputable.html#t:SDoc">SDoc</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:DerivableViaInstance" class="def">DerivableViaInstance</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:NonDerivableClass" class="def">NonDerivableClass</a> <a href="Outputable.html#t:SDoc">SDoc</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:PredOrigin" class="def">PredOrigin</a> <a href="src/TcDerivUtils.html#PredOrigin" class="link">Source</a> <a href="#t:PredOrigin" class="selflink">#</a></p><div class="doc"><p>A <code><a href="Type.html#t:PredType">PredType</a></code> annotated with the origin of the constraint <code><a href="TcRnTypes.html#t:CtOrigin">CtOrigin</a></code>,
 and whether or the constraint deals in types or kinds.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:PredOrigin" class="def">PredOrigin</a> <a href="Type.html#t:PredType">PredType</a> <a href="TcRnTypes.html#t:CtOrigin">CtOrigin</a> <a href="TcRnTypes.html#t:TypeOrKind">TypeOrKind</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:PredOrigin" class="caption collapser" onclick="toggleSection('i:PredOrigin')">Instances</p><div id="section.i:PredOrigin" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:PredOrigin:Outputable:1" class="instance expander" onclick="toggleSection('i:id:PredOrigin:Outputable:1')"></span> <a href="Outputable.html#t:Outputable">Outputable</a> <a href="TcDerivUtils.html#t:PredOrigin">PredOrigin</a></span> <a href="#t:PredOrigin" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:PredOrigin:Outputable:1" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:ppr">ppr</a> :: <a href="TcDerivUtils.html#t:PredOrigin">PredOrigin</a> -&gt; <a href="Outputable.html#t:SDoc">SDoc</a> <a href="src/Outputable.html#ppr" class="link">Source</a> <a href="#v:ppr" class="selflink">#</a></p><p class="src"><a href="#v:pprPrec">pprPrec</a> :: <a href="../base-4.10.0.0/Prelude.html#t:Rational">Rational</a> -&gt; <a href="TcDerivUtils.html#t:PredOrigin">PredOrigin</a> -&gt; <a href="Outputable.html#t:SDoc">SDoc</a> <a href="src/Outputable.html#pprPrec" class="link">Source</a> <a href="#v:pprPrec" class="selflink">#</a></p></div></div></td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:ThetaOrigin" class="def">ThetaOrigin</a> <a href="src/TcDerivUtils.html#ThetaOrigin" class="link">Source</a> <a href="#t:ThetaOrigin" class="selflink">#</a></p><div class="doc"><p>A list of wanted <code><a href="TcDerivUtils.html#t:PredOrigin">PredOrigin</a></code> constraints (<code><a href="TcDerivUtils.html#v:to_wanted_origins">to_wanted_origins</a></code>) alongside
 any corresponding given constraints (<code><a href="TcDerivUtils.html#v:to_givens">to_givens</a></code>) and locally quantified
 type variables (<code><a href="TcDerivUtils.html#v:to_tvs">to_tvs</a></code>).</p><p>In most cases, <code><a href="TcDerivUtils.html#v:to_givens">to_givens</a></code> will be empty, as most deriving mechanisms (e.g.,
 stock and newtype deriving) do not require given constraints. The exception
 is <code>DeriveAnyClass</code>, which can involve given constraints. For example,
 if you tried to derive an instance for the following class using
 <code>DeriveAnyClass</code>:</p><pre>class Foo a where
  bar :: a -&gt; b -&gt; String
  default bar :: (Show a, Ix b) =&gt; a -&gt; b -&gt; String
  bar = show

  baz :: Eq a =&gt; a -&gt; a -&gt; Bool
  default baz :: Ord a =&gt; a -&gt; a -&gt; Bool
  baz x y = compare x y == EQ
</pre><p>Then it would generate two <code><a href="TcDerivUtils.html#t:ThetaOrigin">ThetaOrigin</a></code>s, one for each method:</p><pre>[ ThetaOrigin { to_tvs            = [b]
              , to_givens         = []
              , to_wanted_origins = [Show a, Ix b] }
, ThetaOrigin { to_tvs            = []
              , to_givens         = [Eq a]
              , to_wanted_origins = [Ord a] }
]
</pre></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:ThetaOrigin" class="def">ThetaOrigin</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:to_tvs" class="def">to_tvs</a> :: [<a href="Var.html#t:TyVar">TyVar</a>]</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:to_givens" class="def">to_givens</a> :: <a href="Type.html#t:ThetaType">ThetaType</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:to_wanted_origins" class="def">to_wanted_origins</a> :: [<a href="TcDerivUtils.html#t:PredOrigin">PredOrigin</a>]</dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div><div class="subs instances"><p id="control.i:ThetaOrigin" class="caption collapser" onclick="toggleSection('i:ThetaOrigin')">Instances</p><div id="section.i:ThetaOrigin" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:ThetaOrigin:Outputable:1" class="instance expander" onclick="toggleSection('i:id:ThetaOrigin:Outputable:1')"></span> <a href="Outputable.html#t:Outputable">Outputable</a> <a href="TcDerivUtils.html#t:ThetaOrigin">ThetaOrigin</a></span> <a href="#t:ThetaOrigin" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:ThetaOrigin:Outputable:1" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:ppr">ppr</a> :: <a href="TcDerivUtils.html#t:ThetaOrigin">ThetaOrigin</a> -&gt; <a href="Outputable.html#t:SDoc">SDoc</a> <a href="src/Outputable.html#ppr" class="link">Source</a> <a href="#v:ppr" class="selflink">#</a></p><p class="src"><a href="#v:pprPrec">pprPrec</a> :: <a href="../base-4.10.0.0/Prelude.html#t:Rational">Rational</a> -&gt; <a href="TcDerivUtils.html#t:ThetaOrigin">ThetaOrigin</a> -&gt; <a href="Outputable.html#t:SDoc">SDoc</a> <a href="src/Outputable.html#pprPrec" class="link">Source</a> <a href="#v:pprPrec" class="selflink">#</a></p></div></div></td></tr></table></div></div></div><div class="top"><p class="src"><a id="v:mkPredOrigin" class="def">mkPredOrigin</a> :: <a href="TcRnTypes.html#t:CtOrigin">CtOrigin</a> -&gt; <a href="TcRnTypes.html#t:TypeOrKind">TypeOrKind</a> -&gt; <a href="Type.html#t:PredType">PredType</a> -&gt; <a href="TcDerivUtils.html#t:PredOrigin">PredOrigin</a> <a href="src/TcDerivUtils.html#mkPredOrigin" class="link">Source</a> <a href="#v:mkPredOrigin" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:mkThetaOrigin" class="def">mkThetaOrigin</a> :: <a href="TcRnTypes.html#t:CtOrigin">CtOrigin</a> -&gt; <a href="TcRnTypes.html#t:TypeOrKind">TypeOrKind</a> -&gt; [<a href="Var.html#t:TyVar">TyVar</a>] -&gt; <a href="Type.html#t:ThetaType">ThetaType</a> -&gt; <a href="Type.html#t:ThetaType">ThetaType</a> -&gt; <a href="TcDerivUtils.html#t:ThetaOrigin">ThetaOrigin</a> <a href="src/TcDerivUtils.html#mkThetaOrigin" class="link">Source</a> <a href="#v:mkThetaOrigin" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:mkThetaOriginFromPreds" class="def">mkThetaOriginFromPreds</a> :: [<a href="TcDerivUtils.html#t:PredOrigin">PredOrigin</a>] -&gt; <a href="TcDerivUtils.html#t:ThetaOrigin">ThetaOrigin</a> <a href="src/TcDerivUtils.html#mkThetaOriginFromPreds" class="link">Source</a> <a href="#v:mkThetaOriginFromPreds" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:substPredOrigin" class="def">substPredOrigin</a> :: <a href="Util.html#t:HasCallStack">HasCallStack</a> =&gt; <a href="Type.html#t:TCvSubst">TCvSubst</a> -&gt; <a href="TcDerivUtils.html#t:PredOrigin">PredOrigin</a> -&gt; <a href="TcDerivUtils.html#t:PredOrigin">PredOrigin</a> <a href="src/TcDerivUtils.html#substPredOrigin" class="link">Source</a> <a href="#v:substPredOrigin" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:checkSideConditions" class="def">checkSideConditions</a> :: <a href="DynFlags.html#t:DynFlags">DynFlags</a> -&gt; <a href="TcDerivUtils.html#t:DerivContext">DerivContext</a> -&gt; <a href="Class.html#t:Class">Class</a> -&gt; [<a href="TcType.html#t:TcType">TcType</a>] -&gt; <a href="TyCon.html#t:TyCon">TyCon</a> -&gt; <a href="TcDerivUtils.html#t:DerivStatus">DerivStatus</a> <a href="src/TcDerivUtils.html#checkSideConditions" class="link">Source</a> <a href="#v:checkSideConditions" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:hasStockDeriving" class="def">hasStockDeriving</a> :: <a href="Class.html#t:Class">Class</a> -&gt; <a href="../base-4.10.0.0/Data-Maybe.html#t:Maybe">Maybe</a> (<a href="SrcLoc.html#t:SrcSpan">SrcSpan</a> -&gt; <a href="TyCon.html#t:TyCon">TyCon</a> -&gt; [<a href="Type.html#t:Type">Type</a>] -&gt; <a href="TcRnTypes.html#t:TcM">TcM</a> (<a href="HsBinds.html#t:LHsBinds">LHsBinds</a> <a href="HsExtension.html#t:GhcPs">GhcPs</a>, <a href="TcGenDeriv.html#t:BagDerivStuff">BagDerivStuff</a>, [<a href="Name.html#t:Name">Name</a>])) <a href="src/TcDerivUtils.html#hasStockDeriving" class="link">Source</a> <a href="#v:hasStockDeriving" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:canDeriveAnyClass" class="def">canDeriveAnyClass</a> :: <a href="DynFlags.html#t:DynFlags">DynFlags</a> -&gt; <a href="ErrUtils.html#t:Validity">Validity</a> <a href="src/TcDerivUtils.html#canDeriveAnyClass" class="link">Source</a> <a href="#v:canDeriveAnyClass" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:std_class_via_coercible" class="def">std_class_via_coercible</a> :: <a href="Class.html#t:Class">Class</a> -&gt; <a href="../base-4.10.0.0/Data-Bool.html#t:Bool">Bool</a> <a href="src/TcDerivUtils.html#std_class_via_coercible" class="link">Source</a> <a href="#v:std_class_via_coercible" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:non_coercible_class" class="def">non_coercible_class</a> :: <a href="Class.html#t:Class">Class</a> -&gt; <a href="../base-4.10.0.0/Data-Bool.html#t:Bool">Bool</a> <a href="src/TcDerivUtils.html#non_coercible_class" class="link">Source</a> <a href="#v:non_coercible_class" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:newDerivClsInst" class="def">newDerivClsInst</a> :: <a href="Type.html#t:ThetaType">ThetaType</a> -&gt; <a href="TcDerivUtils.html#t:DerivSpec">DerivSpec</a> theta -&gt; <a href="TcRnTypes.html#t:TcM">TcM</a> <a href="InstEnv.html#t:ClsInst">ClsInst</a> <a href="src/TcDerivUtils.html#newDerivClsInst" class="link">Source</a> <a href="#v:newDerivClsInst" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:extendLocalInstEnv" class="def">extendLocalInstEnv</a> :: [<a href="InstEnv.html#t:ClsInst">ClsInst</a>] -&gt; <a href="TcRnTypes.html#t:TcM">TcM</a> a -&gt; <a href="TcRnTypes.html#t:TcM">TcM</a> a <a href="src/TcDerivUtils.html#extendLocalInstEnv" class="link">Source</a> <a href="#v:extendLocalInstEnv" class="selflink">#</a></p></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.18.2</p></div></body></html>