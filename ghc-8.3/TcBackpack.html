<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>TcBackpack</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/TcBackpack.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">ghc-8.3: The GHC API</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">TcBackpack</p></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><a href="#v:findExtraSigImports-39-">findExtraSigImports'</a> :: <a href="HscTypes.html#t:HscEnv">HscEnv</a> -&gt; <a href="DriverPhases.html#t:HscSource">HscSource</a> -&gt; <a href="Module.html#t:ModuleName">ModuleName</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> (<a href="UniqDSet.html#t:UniqDSet">UniqDSet</a> <a href="Module.html#t:ModuleName">ModuleName</a>)</li><li class="src short"><a href="#v:findExtraSigImports">findExtraSigImports</a> :: <a href="HscTypes.html#t:HscEnv">HscEnv</a> -&gt; <a href="DriverPhases.html#t:HscSource">HscSource</a> -&gt; <a href="Module.html#t:ModuleName">ModuleName</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> [(<a href="../base-4.10.0.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="FastString.html#t:FastString">FastString</a>, <a href="SrcLoc.html#t:Located">Located</a> <a href="Module.html#t:ModuleName">ModuleName</a>)]</li><li class="src short"><a href="#v:implicitRequirements-39-">implicitRequirements'</a> :: <a href="HscTypes.html#t:HscEnv">HscEnv</a> -&gt; [(<a href="../base-4.10.0.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="FastString.html#t:FastString">FastString</a>, <a href="SrcLoc.html#t:Located">Located</a> <a href="Module.html#t:ModuleName">ModuleName</a>)] -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> [<a href="Module.html#t:ModuleName">ModuleName</a>]</li><li class="src short"><a href="#v:implicitRequirements">implicitRequirements</a> :: <a href="HscTypes.html#t:HscEnv">HscEnv</a> -&gt; [(<a href="../base-4.10.0.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="FastString.html#t:FastString">FastString</a>, <a href="SrcLoc.html#t:Located">Located</a> <a href="Module.html#t:ModuleName">ModuleName</a>)] -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> [(<a href="../base-4.10.0.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="FastString.html#t:FastString">FastString</a>, <a href="SrcLoc.html#t:Located">Located</a> <a href="Module.html#t:ModuleName">ModuleName</a>)]</li><li class="src short"><a href="#v:checkUnitId">checkUnitId</a> :: <a href="Module.html#t:UnitId">UnitId</a> -&gt; <a href="TcRnTypes.html#t:TcM">TcM</a> ()</li><li class="src short"><a href="#v:tcRnCheckUnitId">tcRnCheckUnitId</a> :: <a href="HscTypes.html#t:HscEnv">HscEnv</a> -&gt; <a href="Module.html#t:UnitId">UnitId</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> (<a href="ErrUtils.html#t:Messages">Messages</a>, <a href="../base-4.10.0.0/Data-Maybe.html#t:Maybe">Maybe</a> ())</li><li class="src short"><a href="#v:tcRnMergeSignatures">tcRnMergeSignatures</a> :: <a href="HscTypes.html#t:HscEnv">HscEnv</a> -&gt; <a href="HscTypes.html#t:HsParsedModule">HsParsedModule</a> -&gt; <a href="TcRnTypes.html#t:TcGblEnv">TcGblEnv</a> -&gt; <a href="HscTypes.html#t:ModIface">ModIface</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> (<a href="ErrUtils.html#t:Messages">Messages</a>, <a href="../base-4.10.0.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="TcRnTypes.html#t:TcGblEnv">TcGblEnv</a>)</li><li class="src short"><a href="#v:mergeSignatures">mergeSignatures</a> :: <a href="HscTypes.html#t:HsParsedModule">HsParsedModule</a> -&gt; <a href="TcRnTypes.html#t:TcGblEnv">TcGblEnv</a> -&gt; <a href="HscTypes.html#t:ModIface">ModIface</a> -&gt; <a href="TcRnTypes.html#t:TcRn">TcRn</a> <a href="TcRnTypes.html#t:TcGblEnv">TcGblEnv</a></li><li class="src short"><a href="#v:tcRnInstantiateSignature">tcRnInstantiateSignature</a> :: <a href="HscTypes.html#t:HscEnv">HscEnv</a> -&gt; <a href="Module.html#t:Module">Module</a> -&gt; <a href="SrcLoc.html#t:RealSrcSpan">RealSrcSpan</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> (<a href="ErrUtils.html#t:Messages">Messages</a>, <a href="../base-4.10.0.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="TcRnTypes.html#t:TcGblEnv">TcGblEnv</a>)</li><li class="src short"><a href="#v:instantiateSignature">instantiateSignature</a> :: <a href="TcRnTypes.html#t:TcRn">TcRn</a> <a href="TcRnTypes.html#t:TcGblEnv">TcGblEnv</a></li></ul></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><a id="v:findExtraSigImports-39-" class="def">findExtraSigImports'</a> :: <a href="HscTypes.html#t:HscEnv">HscEnv</a> -&gt; <a href="DriverPhases.html#t:HscSource">HscSource</a> -&gt; <a href="Module.html#t:ModuleName">ModuleName</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> (<a href="UniqDSet.html#t:UniqDSet">UniqDSet</a> <a href="Module.html#t:ModuleName">ModuleName</a>) <a href="src/TcBackpack.html#findExtraSigImports%27" class="link">Source</a> <a href="#v:findExtraSigImports-39-" class="selflink">#</a></p><div class="doc"><p>For a module <code>modname</code> of type <code><a href="DriverPhases.html#t:HscSource">HscSource</a></code>, determine the list
 of extra &quot;imports&quot; of other requirements which should be considered part of
 the import of the requirement, because it transitively depends on those
 requirements by imports of modules from other packages.  The situation
 is something like this:</p><p>unit p where
          signature A
          signature B
              import A</p><p>unit q where
          dependency p[A=<a href="A">A</a>,B=<a href="B">B</a>]
          signature A
          signature B</p><p>Although q's B does not directly import A, we still have to make sure we
 process A first, because the merging process will cause B to indirectly
 import A.  This function finds the TRANSITIVE closure of all such imports
 we need to make.</p></div></div><div class="top"><p class="src"><a id="v:findExtraSigImports" class="def">findExtraSigImports</a> :: <a href="HscTypes.html#t:HscEnv">HscEnv</a> -&gt; <a href="DriverPhases.html#t:HscSource">HscSource</a> -&gt; <a href="Module.html#t:ModuleName">ModuleName</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> [(<a href="../base-4.10.0.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="FastString.html#t:FastString">FastString</a>, <a href="SrcLoc.html#t:Located">Located</a> <a href="Module.html#t:ModuleName">ModuleName</a>)] <a href="src/TcBackpack.html#findExtraSigImports" class="link">Source</a> <a href="#v:findExtraSigImports" class="selflink">#</a></p><div class="doc"><p><code><a href="TcBackpack.html#v:findExtraSigImports">findExtraSigImports</a></code>, but in a convenient form for <a href="GhcMake.html">GhcMake</a> and
 <a href="TcRnDriver.html">TcRnDriver</a>.</p></div></div><div class="top"><p class="src"><a id="v:implicitRequirements-39-" class="def">implicitRequirements'</a> :: <a href="HscTypes.html#t:HscEnv">HscEnv</a> -&gt; [(<a href="../base-4.10.0.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="FastString.html#t:FastString">FastString</a>, <a href="SrcLoc.html#t:Located">Located</a> <a href="Module.html#t:ModuleName">ModuleName</a>)] -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> [<a href="Module.html#t:ModuleName">ModuleName</a>] <a href="src/TcBackpack.html#implicitRequirements%27" class="link">Source</a> <a href="#v:implicitRequirements-39-" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:implicitRequirements" class="def">implicitRequirements</a> :: <a href="HscTypes.html#t:HscEnv">HscEnv</a> -&gt; [(<a href="../base-4.10.0.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="FastString.html#t:FastString">FastString</a>, <a href="SrcLoc.html#t:Located">Located</a> <a href="Module.html#t:ModuleName">ModuleName</a>)] -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> [(<a href="../base-4.10.0.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="FastString.html#t:FastString">FastString</a>, <a href="SrcLoc.html#t:Located">Located</a> <a href="Module.html#t:ModuleName">ModuleName</a>)] <a href="src/TcBackpack.html#implicitRequirements" class="link">Source</a> <a href="#v:implicitRequirements" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:checkUnitId" class="def">checkUnitId</a> :: <a href="Module.html#t:UnitId">UnitId</a> -&gt; <a href="TcRnTypes.html#t:TcM">TcM</a> () <a href="src/TcBackpack.html#checkUnitId" class="link">Source</a> <a href="#v:checkUnitId" class="selflink">#</a></p><div class="doc"><p>Given a <code><a href="Module.html#t:UnitId">UnitId</a></code>, make sure it is well typed.  This is because
 unit IDs come from Cabal, which does not know if things are well-typed or
 not; a component may have been filled with implementations for the holes
 that don't actually fulfill the requirements.</p><p>INVARIANT: the UnitId is NOT a InstalledUnitId</p></div></div><div class="top"><p class="src"><a id="v:tcRnCheckUnitId" class="def">tcRnCheckUnitId</a> :: <a href="HscTypes.html#t:HscEnv">HscEnv</a> -&gt; <a href="Module.html#t:UnitId">UnitId</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> (<a href="ErrUtils.html#t:Messages">Messages</a>, <a href="../base-4.10.0.0/Data-Maybe.html#t:Maybe">Maybe</a> ()) <a href="src/TcBackpack.html#tcRnCheckUnitId" class="link">Source</a> <a href="#v:tcRnCheckUnitId" class="selflink">#</a></p><div class="doc"><p>Top-level driver for signature instantiation (run when compiling
 an <code>hsig</code> file.)</p></div></div><div class="top"><p class="src"><a id="v:tcRnMergeSignatures" class="def">tcRnMergeSignatures</a> :: <a href="HscTypes.html#t:HscEnv">HscEnv</a> -&gt; <a href="HscTypes.html#t:HsParsedModule">HsParsedModule</a> -&gt; <a href="TcRnTypes.html#t:TcGblEnv">TcGblEnv</a> -&gt; <a href="HscTypes.html#t:ModIface">ModIface</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> (<a href="ErrUtils.html#t:Messages">Messages</a>, <a href="../base-4.10.0.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="TcRnTypes.html#t:TcGblEnv">TcGblEnv</a>) <a href="src/TcBackpack.html#tcRnMergeSignatures" class="link">Source</a> <a href="#v:tcRnMergeSignatures" class="selflink">#</a></p><div class="doc"><p>Top-level driver for signature merging (run after typechecking
 an <code>hsig</code> file).</p></div></div><div class="top"><p class="src"><a id="v:mergeSignatures" class="def">mergeSignatures</a> :: <a href="HscTypes.html#t:HsParsedModule">HsParsedModule</a> -&gt; <a href="TcRnTypes.html#t:TcGblEnv">TcGblEnv</a> -&gt; <a href="HscTypes.html#t:ModIface">ModIface</a> -&gt; <a href="TcRnTypes.html#t:TcRn">TcRn</a> <a href="TcRnTypes.html#t:TcGblEnv">TcGblEnv</a> <a href="src/TcBackpack.html#mergeSignatures" class="link">Source</a> <a href="#v:mergeSignatures" class="selflink">#</a></p><div class="doc"><p>Given a local <code><a href="HscTypes.html#t:ModIface">ModIface</a></code>, merge all inherited requirements
 from <code>requirementMerges</code> into this signature, producing
 a final <code><a href="TcRnTypes.html#t:TcGblEnv">TcGblEnv</a></code> that matches the local signature and
 all required signatures.</p></div></div><div class="top"><p class="src"><a id="v:tcRnInstantiateSignature" class="def">tcRnInstantiateSignature</a> :: <a href="HscTypes.html#t:HscEnv">HscEnv</a> -&gt; <a href="Module.html#t:Module">Module</a> -&gt; <a href="SrcLoc.html#t:RealSrcSpan">RealSrcSpan</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> (<a href="ErrUtils.html#t:Messages">Messages</a>, <a href="../base-4.10.0.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="TcRnTypes.html#t:TcGblEnv">TcGblEnv</a>) <a href="src/TcBackpack.html#tcRnInstantiateSignature" class="link">Source</a> <a href="#v:tcRnInstantiateSignature" class="selflink">#</a></p><div class="doc"><p>Top-level driver for signature instantiation (run when compiling
 an <code>hsig</code> file.)</p></div></div><div class="top"><p class="src"><a id="v:instantiateSignature" class="def">instantiateSignature</a> :: <a href="TcRnTypes.html#t:TcRn">TcRn</a> <a href="TcRnTypes.html#t:TcGblEnv">TcGblEnv</a> <a href="src/TcBackpack.html#instantiateSignature" class="link">Source</a> <a href="#v:instantiateSignature" class="selflink">#</a></p><div class="doc"><p>Given <code><a href="TcRnTypes.html#v:tcg_mod">tcg_mod</a></code>, instantiate a <code><a href="HscTypes.html#t:ModIface">ModIface</a></code> from the indefinite
 library to use the actual implementations of the relevant entities,
 checking that the implementation matches the signature.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.18.2</p></div></body></html>