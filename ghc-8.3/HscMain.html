<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>HscMain</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/HscMain.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">ghc-8.3: The GHC API</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">HscMain</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Making an HscEnv</a></li><li><a href="#g:2">Compiling complete source files</a></li><li><a href="#g:3">Running passes separately</a></li><li><a href="#g:4">Safe Haskell</a></li><li><a href="#g:5">Support for interactive evaluation</a></li><li><a href="#g:6">Low-level exports for hooks</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Main API for compiling plain Haskell source code.</p><p>This module implements compilation of a Haskell source. It is
 <em>not</em> concerned with preprocessing of source files; this is handled
 in <a href="DriverPipeline.html">DriverPipeline</a>.</p><p>There are various entry points depending on what mode we're in:
 &quot;batch&quot; mode (<code>--make</code>), &quot;one-shot&quot; mode (<code>-c</code>, <code>-S</code> etc.), and
 &quot;interactive&quot; mode (GHCi). There are also entry points for
 individual passes: parsing, typechecking/renaming, desugaring, and
 simplification.</p><p>All the functions here take an <code><a href="HscTypes.html#t:HscEnv">HscEnv</a></code> as a parameter, but none of
 them return a new one: <code><a href="HscTypes.html#t:HscEnv">HscEnv</a></code> is treated as an immutable value
 from here on in (although it has mutable components, for the
 caches).</p><p>We use the Hsc monad to deal with warning messages consistently:
 specifically, while executing within an Hsc monad, warnings are
 collected. When a Hsc monad returns to an IO monad, the
 warnings are printed, or compilation aborts if the <code>-Werror</code>
 flag is enabled.</p><p>(c) The GRASP/AQUA Project, Glasgow University, 1993-2000</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><a href="#v:newHscEnv">newHscEnv</a> :: <a href="DynFlags.html#t:DynFlags">DynFlags</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> <a href="HscTypes.html#t:HscEnv">HscEnv</a></li><li class="src short"><span class="keyword">type</span> <a href="#t:Messager">Messager</a> = <a href="HscTypes.html#t:HscEnv">HscEnv</a> -&gt; (<a href="../base-4.10.0.0/Data-Int.html#t:Int">Int</a>, <a href="../base-4.10.0.0/Data-Int.html#t:Int">Int</a>) -&gt; <a href="MkIface.html#t:RecompileRequired">RecompileRequired</a> -&gt; <a href="HscTypes.html#t:ModSummary">ModSummary</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> ()</li><li class="src short"><a href="#v:batchMsg">batchMsg</a> :: <a href="HscMain.html#t:Messager">Messager</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:HscStatus">HscStatus</a><ul class="subs"><li>= <a href="#v:HscNotGeneratingCode">HscNotGeneratingCode</a></li><li>| <a href="#v:HscUpToDate">HscUpToDate</a></li><li>| <a href="#v:HscUpdateBoot">HscUpdateBoot</a></li><li>| <a href="#v:HscUpdateSig">HscUpdateSig</a></li><li>| <a href="#v:HscRecomp">HscRecomp</a> <a href="HscTypes.html#t:CgGuts">CgGuts</a> <a href="HscTypes.html#t:ModSummary">ModSummary</a></li></ul></li><li class="src short"><a href="#v:hscIncrementalCompile">hscIncrementalCompile</a> :: <a href="../base-4.10.0.0/Data-Bool.html#t:Bool">Bool</a> -&gt; <a href="../base-4.10.0.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="TcRnTypes.html#t:TcGblEnv">TcGblEnv</a> -&gt; <a href="../base-4.10.0.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="HscMain.html#t:Messager">Messager</a> -&gt; <a href="HscTypes.html#t:HscEnv">HscEnv</a> -&gt; <a href="HscTypes.html#t:ModSummary">ModSummary</a> -&gt; <a href="HscTypes.html#t:SourceModified">SourceModified</a> -&gt; <a href="../base-4.10.0.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="HscTypes.html#t:ModIface">ModIface</a> -&gt; (<a href="../base-4.10.0.0/Data-Int.html#t:Int">Int</a>, <a href="../base-4.10.0.0/Data-Int.html#t:Int">Int</a>) -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> (<a href="HscMain.html#t:HscStatus">HscStatus</a>, <a href="HscTypes.html#t:HomeModInfo">HomeModInfo</a>)</li><li class="src short"><a href="#v:hscCompileCmmFile">hscCompileCmmFile</a> :: <a href="HscTypes.html#t:HscEnv">HscEnv</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> ()</li><li class="src short"><a href="#v:hscGenHardCode">hscGenHardCode</a> :: <a href="HscTypes.html#t:HscEnv">HscEnv</a> -&gt; <a href="HscTypes.html#t:CgGuts">CgGuts</a> -&gt; <a href="HscTypes.html#t:ModSummary">ModSummary</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> (<a href="../base-4.10.0.0/System-IO.html#t:FilePath">FilePath</a>, <a href="../base-4.10.0.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../base-4.10.0.0/System-IO.html#t:FilePath">FilePath</a>, [(<a href="HscTypes.html#t:ForeignSrcLang">ForeignSrcLang</a>, <a href="../base-4.10.0.0/System-IO.html#t:FilePath">FilePath</a>)])</li><li class="src short"><a href="#v:hscInteractive">hscInteractive</a> :: <a href="HscTypes.html#t:HscEnv">HscEnv</a> -&gt; <a href="HscTypes.html#t:CgGuts">CgGuts</a> -&gt; <a href="HscTypes.html#t:ModSummary">ModSummary</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> (<a href="../base-4.10.0.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../base-4.10.0.0/System-IO.html#t:FilePath">FilePath</a>, <a href="ByteCodeTypes.html#t:CompiledByteCode">CompiledByteCode</a>, [<a href="HscTypes.html#t:SptEntry">SptEntry</a>])</li><li class="src short"><a href="#v:hscParse">hscParse</a> :: <a href="HscTypes.html#t:HscEnv">HscEnv</a> -&gt; <a href="HscTypes.html#t:ModSummary">ModSummary</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> <a href="HscTypes.html#t:HsParsedModule">HsParsedModule</a></li><li class="src short"><a href="#v:hscTypecheckRename">hscTypecheckRename</a> :: <a href="HscTypes.html#t:HscEnv">HscEnv</a> -&gt; <a href="HscTypes.html#t:ModSummary">ModSummary</a> -&gt; <a href="HscTypes.html#t:HsParsedModule">HsParsedModule</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> (<a href="TcRnTypes.html#t:TcGblEnv">TcGblEnv</a>, RenamedStuff)</li><li class="src short"><a href="#v:hscDesugar">hscDesugar</a> :: <a href="HscTypes.html#t:HscEnv">HscEnv</a> -&gt; <a href="HscTypes.html#t:ModSummary">ModSummary</a> -&gt; <a href="TcRnTypes.html#t:TcGblEnv">TcGblEnv</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> <a href="HscTypes.html#t:ModGuts">ModGuts</a></li><li class="src short"><a href="#v:makeSimpleDetails">makeSimpleDetails</a> :: <a href="HscTypes.html#t:HscEnv">HscEnv</a> -&gt; <a href="TcRnTypes.html#t:TcGblEnv">TcGblEnv</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> <a href="HscTypes.html#t:ModDetails">ModDetails</a></li><li class="src short"><a href="#v:hscSimplify">hscSimplify</a> :: <a href="HscTypes.html#t:HscEnv">HscEnv</a> -&gt; <a href="HscTypes.html#t:ModGuts">ModGuts</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> <a href="HscTypes.html#t:ModGuts">ModGuts</a></li><li class="src short"><a href="#v:hscCheckSafe">hscCheckSafe</a> :: <a href="HscTypes.html#t:HscEnv">HscEnv</a> -&gt; <a href="Module.html#t:Module">Module</a> -&gt; <a href="SrcLoc.html#t:SrcSpan">SrcSpan</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> <a href="../base-4.10.0.0/Data-Bool.html#t:Bool">Bool</a></li><li class="src short"><a href="#v:hscGetSafe">hscGetSafe</a> :: <a href="HscTypes.html#t:HscEnv">HscEnv</a> -&gt; <a href="Module.html#t:Module">Module</a> -&gt; <a href="SrcLoc.html#t:SrcSpan">SrcSpan</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> (<a href="../base-4.10.0.0/Data-Bool.html#t:Bool">Bool</a>, <a href="../containers-0.5.10.2/Data-Set-Internal.html#t:Set">Set</a> <a href="Module.html#t:InstalledUnitId">InstalledUnitId</a>)</li><li class="src short"><a href="#v:hscParseIdentifier">hscParseIdentifier</a> :: <a href="HscTypes.html#t:HscEnv">HscEnv</a> -&gt; <a href="../base-4.10.0.0/Data-String.html#t:String">String</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> (<a href="SrcLoc.html#t:Located">Located</a> <a href="RdrName.html#t:RdrName">RdrName</a>)</li><li class="src short"><a href="#v:hscTcRcLookupName">hscTcRcLookupName</a> :: <a href="HscTypes.html#t:HscEnv">HscEnv</a> -&gt; <a href="Name.html#t:Name">Name</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> (<a href="../base-4.10.0.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Type.html#t:TyThing">TyThing</a>)</li><li class="src short"><a href="#v:hscTcRnGetInfo">hscTcRnGetInfo</a> :: <a href="HscTypes.html#t:HscEnv">HscEnv</a> -&gt; <a href="Name.html#t:Name">Name</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> (<a href="../base-4.10.0.0/Data-Maybe.html#t:Maybe">Maybe</a> (<a href="Type.html#t:TyThing">TyThing</a>, <a href="BasicTypes.html#t:Fixity">Fixity</a>, [<a href="InstEnv.html#t:ClsInst">ClsInst</a>], [<a href="FamInstEnv.html#t:FamInst">FamInst</a>], <a href="Outputable.html#t:SDoc">SDoc</a>))</li><li class="src short"><a href="#v:hscIsGHCiMonad">hscIsGHCiMonad</a> :: <a href="HscTypes.html#t:HscEnv">HscEnv</a> -&gt; <a href="../base-4.10.0.0/Data-String.html#t:String">String</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> <a href="Name.html#t:Name">Name</a></li><li class="src short"><a href="#v:hscGetModuleInterface">hscGetModuleInterface</a> :: <a href="HscTypes.html#t:HscEnv">HscEnv</a> -&gt; <a href="Module.html#t:Module">Module</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> <a href="HscTypes.html#t:ModIface">ModIface</a></li><li class="src short"><a href="#v:hscRnImportDecls">hscRnImportDecls</a> :: <a href="HscTypes.html#t:HscEnv">HscEnv</a> -&gt; [<a href="HsImpExp.html#t:LImportDecl">LImportDecl</a> <a href="HsExtension.html#t:GhcPs">GhcPs</a>] -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> <a href="RdrName.html#t:GlobalRdrEnv">GlobalRdrEnv</a></li><li class="src short"><a href="#v:hscTcRnLookupRdrName">hscTcRnLookupRdrName</a> :: <a href="HscTypes.html#t:HscEnv">HscEnv</a> -&gt; <a href="SrcLoc.html#t:Located">Located</a> <a href="RdrName.html#t:RdrName">RdrName</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> [<a href="Name.html#t:Name">Name</a>]</li><li class="src short"><a href="#v:hscStmt">hscStmt</a> :: <a href="HscTypes.html#t:HscEnv">HscEnv</a> -&gt; <a href="../base-4.10.0.0/Data-String.html#t:String">String</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> (<a href="../base-4.10.0.0/Data-Maybe.html#t:Maybe">Maybe</a> ([<a href="Var.html#t:Id">Id</a>], <a href="GHC.html#t:ForeignHValue">ForeignHValue</a>, <a href="HscTypes.html#t:FixityEnv">FixityEnv</a>))</li><li class="src short"><a href="#v:hscStmtWithLocation">hscStmtWithLocation</a> :: <a href="HscTypes.html#t:HscEnv">HscEnv</a> -&gt; <a href="../base-4.10.0.0/Data-String.html#t:String">String</a> -&gt; <a href="../base-4.10.0.0/Data-String.html#t:String">String</a> -&gt; <a href="../base-4.10.0.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> (<a href="../base-4.10.0.0/Data-Maybe.html#t:Maybe">Maybe</a> ([<a href="Var.html#t:Id">Id</a>], <a href="GHC.html#t:ForeignHValue">ForeignHValue</a>, <a href="HscTypes.html#t:FixityEnv">FixityEnv</a>))</li><li class="src short"><a href="#v:hscParsedStmt">hscParsedStmt</a> :: <a href="HscTypes.html#t:HscEnv">HscEnv</a> -&gt; <a href="HsExpr.html#t:GhciLStmt">GhciLStmt</a> <a href="HsExtension.html#t:GhcPs">GhcPs</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> (<a href="../base-4.10.0.0/Data-Maybe.html#t:Maybe">Maybe</a> ([<a href="Var.html#t:Id">Id</a>], <a href="GHC.html#t:ForeignHValue">ForeignHValue</a>, <a href="HscTypes.html#t:FixityEnv">FixityEnv</a>))</li><li class="src short"><a href="#v:hscDecls">hscDecls</a> :: <a href="HscTypes.html#t:HscEnv">HscEnv</a> -&gt; <a href="../base-4.10.0.0/Data-String.html#t:String">String</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> ([<a href="Type.html#t:TyThing">TyThing</a>], <a href="HscTypes.html#t:InteractiveContext">InteractiveContext</a>)</li><li class="src short"><a href="#v:hscDeclsWithLocation">hscDeclsWithLocation</a> :: <a href="HscTypes.html#t:HscEnv">HscEnv</a> -&gt; <a href="../base-4.10.0.0/Data-String.html#t:String">String</a> -&gt; <a href="../base-4.10.0.0/Data-String.html#t:String">String</a> -&gt; <a href="../base-4.10.0.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> ([<a href="Type.html#t:TyThing">TyThing</a>], <a href="HscTypes.html#t:InteractiveContext">InteractiveContext</a>)</li><li class="src short"><a href="#v:hscTcExpr">hscTcExpr</a> :: <a href="HscTypes.html#t:HscEnv">HscEnv</a> -&gt; <a href="HscMain.html#t:TcRnExprMode">TcRnExprMode</a> -&gt; <a href="../base-4.10.0.0/Data-String.html#t:String">String</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> <a href="Type.html#t:Type">Type</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:TcRnExprMode">TcRnExprMode</a><ul class="subs"><li>= <a href="#v:TM_Inst">TM_Inst</a></li><li>| <a href="#v:TM_NoInst">TM_NoInst</a></li><li>| <a href="#v:TM_Default">TM_Default</a></li></ul></li><li class="src short"><a href="#v:hscImport">hscImport</a> :: <a href="HscTypes.html#t:HscEnv">HscEnv</a> -&gt; <a href="../base-4.10.0.0/Data-String.html#t:String">String</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> (<a href="HsImpExp.html#t:ImportDecl">ImportDecl</a> <a href="HsExtension.html#t:GhcPs">GhcPs</a>)</li><li class="src short"><a href="#v:hscKcType">hscKcType</a> :: <a href="HscTypes.html#t:HscEnv">HscEnv</a> -&gt; <a href="../base-4.10.0.0/Data-Bool.html#t:Bool">Bool</a> -&gt; <a href="../base-4.10.0.0/Data-String.html#t:String">String</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> (<a href="Type.html#t:Type">Type</a>, <a href="Kind.html#t:Kind">Kind</a>)</li><li class="src short"><a href="#v:hscParseExpr">hscParseExpr</a> :: <a href="../base-4.10.0.0/Data-String.html#t:String">String</a> -&gt; <a href="HscTypes.html#t:Hsc">Hsc</a> (<a href="HsExpr.html#t:LHsExpr">LHsExpr</a> <a href="HsExtension.html#t:GhcPs">GhcPs</a>)</li><li class="src short"><a href="#v:hscCompileCoreExpr">hscCompileCoreExpr</a> :: <a href="HscTypes.html#t:HscEnv">HscEnv</a> -&gt; <a href="SrcLoc.html#t:SrcSpan">SrcSpan</a> -&gt; <a href="CoreSyn.html#t:CoreExpr">CoreExpr</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> <a href="GHC.html#t:ForeignHValue">ForeignHValue</a></li><li class="src short"><a href="#v:hscCompileCoreExpr-39-">hscCompileCoreExpr'</a> :: <a href="HscTypes.html#t:HscEnv">HscEnv</a> -&gt; <a href="SrcLoc.html#t:SrcSpan">SrcSpan</a> -&gt; <a href="CoreSyn.html#t:CoreExpr">CoreExpr</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> <a href="GHC.html#t:ForeignHValue">ForeignHValue</a></li><li class="src short"><a href="#v:hscParse-39-">hscParse'</a> :: <a href="HscTypes.html#t:ModSummary">ModSummary</a> -&gt; <a href="HscTypes.html#t:Hsc">Hsc</a> <a href="HscTypes.html#t:HsParsedModule">HsParsedModule</a></li><li class="src short"><a href="#v:hscSimplify-39-">hscSimplify'</a> :: <a href="HscTypes.html#t:ModGuts">ModGuts</a> -&gt; <a href="HscTypes.html#t:Hsc">Hsc</a> <a href="HscTypes.html#t:ModGuts">ModGuts</a></li><li class="src short"><a href="#v:hscDesugar-39-">hscDesugar'</a> :: <a href="Module.html#t:ModLocation">ModLocation</a> -&gt; <a href="TcRnTypes.html#t:TcGblEnv">TcGblEnv</a> -&gt; <a href="HscTypes.html#t:Hsc">Hsc</a> <a href="HscTypes.html#t:ModGuts">ModGuts</a></li><li class="src short"><a href="#v:tcRnModule-39-">tcRnModule'</a> :: <a href="HscTypes.html#t:HscEnv">HscEnv</a> -&gt; <a href="HscTypes.html#t:ModSummary">ModSummary</a> -&gt; <a href="../base-4.10.0.0/Data-Bool.html#t:Bool">Bool</a> -&gt; <a href="HscTypes.html#t:HsParsedModule">HsParsedModule</a> -&gt; <a href="HscTypes.html#t:Hsc">Hsc</a> <a href="TcRnTypes.html#t:TcGblEnv">TcGblEnv</a></li><li class="src short"><a href="#v:getHscEnv">getHscEnv</a> :: <a href="HscTypes.html#t:Hsc">Hsc</a> <a href="HscTypes.html#t:HscEnv">HscEnv</a></li><li class="src short"><a href="#v:hscSimpleIface-39-">hscSimpleIface'</a> :: <a href="TcRnTypes.html#t:TcGblEnv">TcGblEnv</a> -&gt; <a href="../base-4.10.0.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Fingerprint.html#t:Fingerprint">Fingerprint</a> -&gt; <a href="HscTypes.html#t:Hsc">Hsc</a> (<a href="HscTypes.html#t:ModIface">ModIface</a>, <a href="../base-4.10.0.0/Data-Bool.html#t:Bool">Bool</a>, <a href="HscTypes.html#t:ModDetails">ModDetails</a>)</li><li class="src short"><a href="#v:hscNormalIface-39-">hscNormalIface'</a> :: <a href="HscTypes.html#t:ModGuts">ModGuts</a> -&gt; <a href="../base-4.10.0.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Fingerprint.html#t:Fingerprint">Fingerprint</a> -&gt; <a href="HscTypes.html#t:Hsc">Hsc</a> (<a href="HscTypes.html#t:ModIface">ModIface</a>, <a href="../base-4.10.0.0/Data-Bool.html#t:Bool">Bool</a>, <a href="HscTypes.html#t:ModDetails">ModDetails</a>, <a href="HscTypes.html#t:CgGuts">CgGuts</a>)</li><li class="src short"><a href="#v:oneShotMsg">oneShotMsg</a> :: <a href="HscTypes.html#t:HscEnv">HscEnv</a> -&gt; <a href="MkIface.html#t:RecompileRequired">RecompileRequired</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> ()</li><li class="src short"><a href="#v:hscFileFrontEnd">hscFileFrontEnd</a> :: <a href="HscTypes.html#t:ModSummary">ModSummary</a> -&gt; <a href="HscTypes.html#t:Hsc">Hsc</a> <a href="TcRnTypes.html#t:TcGblEnv">TcGblEnv</a></li><li class="src short"><a href="#v:genericHscFrontend">genericHscFrontend</a> :: <a href="HscTypes.html#t:ModSummary">ModSummary</a> -&gt; <a href="HscTypes.html#t:Hsc">Hsc</a> <a href="TcRnTypes.html#t:FrontendResult">FrontendResult</a></li><li class="src short"><a href="#v:dumpIfaceStats">dumpIfaceStats</a> :: <a href="HscTypes.html#t:HscEnv">HscEnv</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> ()</li><li class="src short"><a href="#v:ioMsgMaybe">ioMsgMaybe</a> :: <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> (<a href="ErrUtils.html#t:Messages">Messages</a>, <a href="../base-4.10.0.0/Data-Maybe.html#t:Maybe">Maybe</a> a) -&gt; <a href="HscTypes.html#t:Hsc">Hsc</a> a</li><li class="src short"><a href="#v:showModuleIndex">showModuleIndex</a> :: (<a href="../base-4.10.0.0/Data-Int.html#t:Int">Int</a>, <a href="../base-4.10.0.0/Data-Int.html#t:Int">Int</a>) -&gt; <a href="../base-4.10.0.0/Data-String.html#t:String">String</a></li><li class="src short"><a href="#v:hscAddSptEntries">hscAddSptEntries</a> :: <a href="HscTypes.html#t:HscEnv">HscEnv</a> -&gt; [<a href="HscTypes.html#t:SptEntry">SptEntry</a>] -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> ()</li></ul></div><div id="interface"><h1 id="g:1">Making an HscEnv</h1><div class="top"><p class="src"><a id="v:newHscEnv" class="def">newHscEnv</a> :: <a href="DynFlags.html#t:DynFlags">DynFlags</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> <a href="HscTypes.html#t:HscEnv">HscEnv</a> <a href="src/HscMain.html#newHscEnv" class="link">Source</a> <a href="#v:newHscEnv" class="selflink">#</a></p></div><h1 id="g:2">Compiling complete source files</h1><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:Messager" class="def">Messager</a> = <a href="HscTypes.html#t:HscEnv">HscEnv</a> -&gt; (<a href="../base-4.10.0.0/Data-Int.html#t:Int">Int</a>, <a href="../base-4.10.0.0/Data-Int.html#t:Int">Int</a>) -&gt; <a href="MkIface.html#t:RecompileRequired">RecompileRequired</a> -&gt; <a href="HscTypes.html#t:ModSummary">ModSummary</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> () <a href="src/HscMain.html#Messager" class="link">Source</a> <a href="#t:Messager" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:batchMsg" class="def">batchMsg</a> :: <a href="HscMain.html#t:Messager">Messager</a> <a href="src/HscMain.html#batchMsg" class="link">Source</a> <a href="#v:batchMsg" class="selflink">#</a></p></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:HscStatus" class="def">HscStatus</a> <a href="src/HscTypes.html#HscStatus" class="link">Source</a> <a href="#t:HscStatus" class="selflink">#</a></p><div class="doc"><p>Status of a compilation to hard-code</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:HscNotGeneratingCode" class="def">HscNotGeneratingCode</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:HscUpToDate" class="def">HscUpToDate</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:HscUpdateBoot" class="def">HscUpdateBoot</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:HscUpdateSig" class="def">HscUpdateSig</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:HscRecomp" class="def">HscRecomp</a> <a href="HscTypes.html#t:CgGuts">CgGuts</a> <a href="HscTypes.html#t:ModSummary">ModSummary</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><a id="v:hscIncrementalCompile" class="def">hscIncrementalCompile</a> :: <a href="../base-4.10.0.0/Data-Bool.html#t:Bool">Bool</a> -&gt; <a href="../base-4.10.0.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="TcRnTypes.html#t:TcGblEnv">TcGblEnv</a> -&gt; <a href="../base-4.10.0.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="HscMain.html#t:Messager">Messager</a> -&gt; <a href="HscTypes.html#t:HscEnv">HscEnv</a> -&gt; <a href="HscTypes.html#t:ModSummary">ModSummary</a> -&gt; <a href="HscTypes.html#t:SourceModified">SourceModified</a> -&gt; <a href="../base-4.10.0.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="HscTypes.html#t:ModIface">ModIface</a> -&gt; (<a href="../base-4.10.0.0/Data-Int.html#t:Int">Int</a>, <a href="../base-4.10.0.0/Data-Int.html#t:Int">Int</a>) -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> (<a href="HscMain.html#t:HscStatus">HscStatus</a>, <a href="HscTypes.html#t:HomeModInfo">HomeModInfo</a>) <a href="src/HscMain.html#hscIncrementalCompile" class="link">Source</a> <a href="#v:hscIncrementalCompile" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:hscCompileCmmFile" class="def">hscCompileCmmFile</a> :: <a href="HscTypes.html#t:HscEnv">HscEnv</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> () <a href="src/HscMain.html#hscCompileCmmFile" class="link">Source</a> <a href="#v:hscCompileCmmFile" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:hscGenHardCode" class="def">hscGenHardCode</a> <a href="src/HscMain.html#hscGenHardCode" class="link">Source</a> <a href="#v:hscGenHardCode" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="HscTypes.html#t:HscEnv">HscEnv</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="HscTypes.html#t:CgGuts">CgGuts</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="HscTypes.html#t:ModSummary">ModSummary</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="../base-4.10.0.0/System-IO.html#t:FilePath">FilePath</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> (<a href="../base-4.10.0.0/System-IO.html#t:FilePath">FilePath</a>, <a href="../base-4.10.0.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../base-4.10.0.0/System-IO.html#t:FilePath">FilePath</a>, [(<a href="HscTypes.html#t:ForeignSrcLang">ForeignSrcLang</a>, <a href="../base-4.10.0.0/System-IO.html#t:FilePath">FilePath</a>)])</td><td class="doc"><p><code>Just f</code> <a href="=">=</a> _stub.c is f</p></td></tr></table></div><div class="doc"><p>Compile to hard-code.</p></div></div><div class="top"><p class="src"><a id="v:hscInteractive" class="def">hscInteractive</a> :: <a href="HscTypes.html#t:HscEnv">HscEnv</a> -&gt; <a href="HscTypes.html#t:CgGuts">CgGuts</a> -&gt; <a href="HscTypes.html#t:ModSummary">ModSummary</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> (<a href="../base-4.10.0.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../base-4.10.0.0/System-IO.html#t:FilePath">FilePath</a>, <a href="ByteCodeTypes.html#t:CompiledByteCode">CompiledByteCode</a>, [<a href="HscTypes.html#t:SptEntry">SptEntry</a>]) <a href="src/HscMain.html#hscInteractive" class="link">Source</a> <a href="#v:hscInteractive" class="selflink">#</a></p></div><h1 id="g:3">Running passes separately</h1><div class="top"><p class="src"><a id="v:hscParse" class="def">hscParse</a> :: <a href="HscTypes.html#t:HscEnv">HscEnv</a> -&gt; <a href="HscTypes.html#t:ModSummary">ModSummary</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> <a href="HscTypes.html#t:HsParsedModule">HsParsedModule</a> <a href="src/HscMain.html#hscParse" class="link">Source</a> <a href="#v:hscParse" class="selflink">#</a></p><div class="doc"><p>parse a file, returning the abstract syntax</p></div></div><div class="top"><p class="src"><a id="v:hscTypecheckRename" class="def">hscTypecheckRename</a> :: <a href="HscTypes.html#t:HscEnv">HscEnv</a> -&gt; <a href="HscTypes.html#t:ModSummary">ModSummary</a> -&gt; <a href="HscTypes.html#t:HsParsedModule">HsParsedModule</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> (<a href="TcRnTypes.html#t:TcGblEnv">TcGblEnv</a>, RenamedStuff) <a href="src/HscMain.html#hscTypecheckRename" class="link">Source</a> <a href="#v:hscTypecheckRename" class="selflink">#</a></p><div class="doc"><p>Rename and typecheck a module, additionally returning the renamed syntax</p></div></div><div class="top"><p class="src"><a id="v:hscDesugar" class="def">hscDesugar</a> :: <a href="HscTypes.html#t:HscEnv">HscEnv</a> -&gt; <a href="HscTypes.html#t:ModSummary">ModSummary</a> -&gt; <a href="TcRnTypes.html#t:TcGblEnv">TcGblEnv</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> <a href="HscTypes.html#t:ModGuts">ModGuts</a> <a href="src/HscMain.html#hscDesugar" class="link">Source</a> <a href="#v:hscDesugar" class="selflink">#</a></p><div class="doc"><p>Convert a typechecked module to Core</p></div></div><div class="top"><p class="src"><a id="v:makeSimpleDetails" class="def">makeSimpleDetails</a> :: <a href="HscTypes.html#t:HscEnv">HscEnv</a> -&gt; <a href="TcRnTypes.html#t:TcGblEnv">TcGblEnv</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> <a href="HscTypes.html#t:ModDetails">ModDetails</a> <a href="src/HscMain.html#makeSimpleDetails" class="link">Source</a> <a href="#v:makeSimpleDetails" class="selflink">#</a></p><div class="doc"><p>Make a <code><a href="HscTypes.html#t:ModDetails">ModDetails</a></code> from the results of typechecking. Used when
 typechecking only, as opposed to full compilation.</p></div></div><div class="top"><p class="src"><a id="v:hscSimplify" class="def">hscSimplify</a> :: <a href="HscTypes.html#t:HscEnv">HscEnv</a> -&gt; <a href="HscTypes.html#t:ModGuts">ModGuts</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> <a href="HscTypes.html#t:ModGuts">ModGuts</a> <a href="src/HscMain.html#hscSimplify" class="link">Source</a> <a href="#v:hscSimplify" class="selflink">#</a></p></div><h1 id="g:4">Safe Haskell</h1><div class="top"><p class="src"><a id="v:hscCheckSafe" class="def">hscCheckSafe</a> :: <a href="HscTypes.html#t:HscEnv">HscEnv</a> -&gt; <a href="Module.html#t:Module">Module</a> -&gt; <a href="SrcLoc.html#t:SrcSpan">SrcSpan</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> <a href="../base-4.10.0.0/Data-Bool.html#t:Bool">Bool</a> <a href="src/HscMain.html#hscCheckSafe" class="link">Source</a> <a href="#v:hscCheckSafe" class="selflink">#</a></p><div class="doc"><p>Check that a module is safe to import.</p><p>We return True to indicate the import is safe and False otherwise
 although in the False case an exception may be thrown first.</p></div></div><div class="top"><p class="src"><a id="v:hscGetSafe" class="def">hscGetSafe</a> :: <a href="HscTypes.html#t:HscEnv">HscEnv</a> -&gt; <a href="Module.html#t:Module">Module</a> -&gt; <a href="SrcLoc.html#t:SrcSpan">SrcSpan</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> (<a href="../base-4.10.0.0/Data-Bool.html#t:Bool">Bool</a>, <a href="../containers-0.5.10.2/Data-Set-Internal.html#t:Set">Set</a> <a href="Module.html#t:InstalledUnitId">InstalledUnitId</a>) <a href="src/HscMain.html#hscGetSafe" class="link">Source</a> <a href="#v:hscGetSafe" class="selflink">#</a></p><div class="doc"><p>Return if a module is trusted and the pkgs it depends on to be trusted.</p></div></div><h1 id="g:5">Support for interactive evaluation</h1><div class="top"><p class="src"><a id="v:hscParseIdentifier" class="def">hscParseIdentifier</a> :: <a href="HscTypes.html#t:HscEnv">HscEnv</a> -&gt; <a href="../base-4.10.0.0/Data-String.html#t:String">String</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> (<a href="SrcLoc.html#t:Located">Located</a> <a href="RdrName.html#t:RdrName">RdrName</a>) <a href="src/HscMain.html#hscParseIdentifier" class="link">Source</a> <a href="#v:hscParseIdentifier" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:hscTcRcLookupName" class="def">hscTcRcLookupName</a> :: <a href="HscTypes.html#t:HscEnv">HscEnv</a> -&gt; <a href="Name.html#t:Name">Name</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> (<a href="../base-4.10.0.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Type.html#t:TyThing">TyThing</a>) <a href="src/HscMain.html#hscTcRcLookupName" class="link">Source</a> <a href="#v:hscTcRcLookupName" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:hscTcRnGetInfo" class="def">hscTcRnGetInfo</a> :: <a href="HscTypes.html#t:HscEnv">HscEnv</a> -&gt; <a href="Name.html#t:Name">Name</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> (<a href="../base-4.10.0.0/Data-Maybe.html#t:Maybe">Maybe</a> (<a href="Type.html#t:TyThing">TyThing</a>, <a href="BasicTypes.html#t:Fixity">Fixity</a>, [<a href="InstEnv.html#t:ClsInst">ClsInst</a>], [<a href="FamInstEnv.html#t:FamInst">FamInst</a>], <a href="Outputable.html#t:SDoc">SDoc</a>)) <a href="src/HscMain.html#hscTcRnGetInfo" class="link">Source</a> <a href="#v:hscTcRnGetInfo" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:hscIsGHCiMonad" class="def">hscIsGHCiMonad</a> :: <a href="HscTypes.html#t:HscEnv">HscEnv</a> -&gt; <a href="../base-4.10.0.0/Data-String.html#t:String">String</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> <a href="Name.html#t:Name">Name</a> <a href="src/HscMain.html#hscIsGHCiMonad" class="link">Source</a> <a href="#v:hscIsGHCiMonad" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:hscGetModuleInterface" class="def">hscGetModuleInterface</a> :: <a href="HscTypes.html#t:HscEnv">HscEnv</a> -&gt; <a href="Module.html#t:Module">Module</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> <a href="HscTypes.html#t:ModIface">ModIface</a> <a href="src/HscMain.html#hscGetModuleInterface" class="link">Source</a> <a href="#v:hscGetModuleInterface" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:hscRnImportDecls" class="def">hscRnImportDecls</a> :: <a href="HscTypes.html#t:HscEnv">HscEnv</a> -&gt; [<a href="HsImpExp.html#t:LImportDecl">LImportDecl</a> <a href="HsExtension.html#t:GhcPs">GhcPs</a>] -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> <a href="RdrName.html#t:GlobalRdrEnv">GlobalRdrEnv</a> <a href="src/HscMain.html#hscRnImportDecls" class="link">Source</a> <a href="#v:hscRnImportDecls" class="selflink">#</a></p><div class="doc"><p>Rename some import declarations</p></div></div><div class="top"><p class="src"><a id="v:hscTcRnLookupRdrName" class="def">hscTcRnLookupRdrName</a> :: <a href="HscTypes.html#t:HscEnv">HscEnv</a> -&gt; <a href="SrcLoc.html#t:Located">Located</a> <a href="RdrName.html#t:RdrName">RdrName</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> [<a href="Name.html#t:Name">Name</a>] <a href="src/HscMain.html#hscTcRnLookupRdrName" class="link">Source</a> <a href="#v:hscTcRnLookupRdrName" class="selflink">#</a></p><div class="doc"><p>Lookup things in the compiler's environment</p></div></div><div class="top"><p class="src"><a id="v:hscStmt" class="def">hscStmt</a> :: <a href="HscTypes.html#t:HscEnv">HscEnv</a> -&gt; <a href="../base-4.10.0.0/Data-String.html#t:String">String</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> (<a href="../base-4.10.0.0/Data-Maybe.html#t:Maybe">Maybe</a> ([<a href="Var.html#t:Id">Id</a>], <a href="GHC.html#t:ForeignHValue">ForeignHValue</a>, <a href="HscTypes.html#t:FixityEnv">FixityEnv</a>)) <a href="src/HscMain.html#hscStmt" class="link">Source</a> <a href="#v:hscStmt" class="selflink">#</a></p><div class="doc"><p>Compile a stmt all the way to an HValue, but don't run it</p><p>We return Nothing to indicate an empty statement (or comment only), not a
 parse error.</p></div></div><div class="top"><p class="src"><a id="v:hscStmtWithLocation" class="def">hscStmtWithLocation</a> <a href="src/HscMain.html#hscStmtWithLocation" class="link">Source</a> <a href="#v:hscStmtWithLocation" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="HscTypes.html#t:HscEnv">HscEnv</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="../base-4.10.0.0/Data-String.html#t:String">String</a></td><td class="doc"><p>The statement</p></td></tr><tr><td class="src">-&gt; <a href="../base-4.10.0.0/Data-String.html#t:String">String</a></td><td class="doc"><p>The source</p></td></tr><tr><td class="src">-&gt; <a href="../base-4.10.0.0/Data-Int.html#t:Int">Int</a></td><td class="doc"><p>Starting line</p></td></tr><tr><td class="src">-&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> (<a href="../base-4.10.0.0/Data-Maybe.html#t:Maybe">Maybe</a> ([<a href="Var.html#t:Id">Id</a>], <a href="GHC.html#t:ForeignHValue">ForeignHValue</a>, <a href="HscTypes.html#t:FixityEnv">FixityEnv</a>))</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Compile a stmt all the way to an HValue, but don't run it</p><p>We return Nothing to indicate an empty statement (or comment only), not a
 parse error.</p></div></div><div class="top"><p class="src"><a id="v:hscParsedStmt" class="def">hscParsedStmt</a> <a href="src/HscMain.html#hscParsedStmt" class="link">Source</a> <a href="#v:hscParsedStmt" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="HscTypes.html#t:HscEnv">HscEnv</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="HsExpr.html#t:GhciLStmt">GhciLStmt</a> <a href="HsExtension.html#t:GhcPs">GhcPs</a></td><td class="doc"><p>The parsed statement</p></td></tr><tr><td class="src">-&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> (<a href="../base-4.10.0.0/Data-Maybe.html#t:Maybe">Maybe</a> ([<a href="Var.html#t:Id">Id</a>], <a href="GHC.html#t:ForeignHValue">ForeignHValue</a>, <a href="HscTypes.html#t:FixityEnv">FixityEnv</a>))</td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><a id="v:hscDecls" class="def">hscDecls</a> <a href="src/HscMain.html#hscDecls" class="link">Source</a> <a href="#v:hscDecls" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="HscTypes.html#t:HscEnv">HscEnv</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="../base-4.10.0.0/Data-String.html#t:String">String</a></td><td class="doc"><p>The statement</p></td></tr><tr><td class="src">-&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> ([<a href="Type.html#t:TyThing">TyThing</a>], <a href="HscTypes.html#t:InteractiveContext">InteractiveContext</a>)</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Compile a decls</p></div></div><div class="top"><p class="src"><a id="v:hscDeclsWithLocation" class="def">hscDeclsWithLocation</a> <a href="src/HscMain.html#hscDeclsWithLocation" class="link">Source</a> <a href="#v:hscDeclsWithLocation" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="HscTypes.html#t:HscEnv">HscEnv</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="../base-4.10.0.0/Data-String.html#t:String">String</a></td><td class="doc"><p>The statement</p></td></tr><tr><td class="src">-&gt; <a href="../base-4.10.0.0/Data-String.html#t:String">String</a></td><td class="doc"><p>The source</p></td></tr><tr><td class="src">-&gt; <a href="../base-4.10.0.0/Data-Int.html#t:Int">Int</a></td><td class="doc"><p>Starting line</p></td></tr><tr><td class="src">-&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> ([<a href="Type.html#t:TyThing">TyThing</a>], <a href="HscTypes.html#t:InteractiveContext">InteractiveContext</a>)</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Compile a decls</p></div></div><div class="top"><p class="src"><a id="v:hscTcExpr" class="def">hscTcExpr</a> <a href="src/HscMain.html#hscTcExpr" class="link">Source</a> <a href="#v:hscTcExpr" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="HscTypes.html#t:HscEnv">HscEnv</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="HscMain.html#t:TcRnExprMode">TcRnExprMode</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="../base-4.10.0.0/Data-String.html#t:String">String</a></td><td class="doc"><p>The expression</p></td></tr><tr><td class="src">-&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> <a href="Type.html#t:Type">Type</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Typecheck an expression (but don't run it)</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:TcRnExprMode" class="def">TcRnExprMode</a> <a href="src/TcRnDriver.html#TcRnExprMode" class="link">Source</a> <a href="#t:TcRnExprMode" class="selflink">#</a></p><div class="doc"><p>How should we infer a type? See Note [TcRnExprMode]</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:TM_Inst" class="def">TM_Inst</a></td><td class="doc"><p>Instantiate the type fully (:type)</p></td></tr><tr><td class="src"><a id="v:TM_NoInst" class="def">TM_NoInst</a></td><td class="doc"><p>Do not instantiate the type (:type +v)</p></td></tr><tr><td class="src"><a id="v:TM_Default" class="def">TM_Default</a></td><td class="doc"><p>Default the type eagerly (:type +d)</p></td></tr></table></div></div><div class="top"><p class="src"><a id="v:hscImport" class="def">hscImport</a> :: <a href="HscTypes.html#t:HscEnv">HscEnv</a> -&gt; <a href="../base-4.10.0.0/Data-String.html#t:String">String</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> (<a href="HsImpExp.html#t:ImportDecl">ImportDecl</a> <a href="HsExtension.html#t:GhcPs">GhcPs</a>) <a href="src/HscMain.html#hscImport" class="link">Source</a> <a href="#v:hscImport" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:hscKcType" class="def">hscKcType</a> <a href="src/HscMain.html#hscKcType" class="link">Source</a> <a href="#v:hscKcType" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="HscTypes.html#t:HscEnv">HscEnv</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="../base-4.10.0.0/Data-Bool.html#t:Bool">Bool</a></td><td class="doc"><p>Normalise the type</p></td></tr><tr><td class="src">-&gt; <a href="../base-4.10.0.0/Data-String.html#t:String">String</a></td><td class="doc"><p>The type as a string</p></td></tr><tr><td class="src">-&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> (<a href="Type.html#t:Type">Type</a>, <a href="Kind.html#t:Kind">Kind</a>)</td><td class="doc"><p>Resulting type (possibly normalised) and kind</p></td></tr></table></div><div class="doc"><p>Find the kind of a type
 Currently this does *not* generalise the kinds of the type</p></div></div><div class="top"><p class="src"><a id="v:hscParseExpr" class="def">hscParseExpr</a> :: <a href="../base-4.10.0.0/Data-String.html#t:String">String</a> -&gt; <a href="HscTypes.html#t:Hsc">Hsc</a> (<a href="HsExpr.html#t:LHsExpr">LHsExpr</a> <a href="HsExtension.html#t:GhcPs">GhcPs</a>) <a href="src/HscMain.html#hscParseExpr" class="link">Source</a> <a href="#v:hscParseExpr" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:hscCompileCoreExpr" class="def">hscCompileCoreExpr</a> :: <a href="HscTypes.html#t:HscEnv">HscEnv</a> -&gt; <a href="SrcLoc.html#t:SrcSpan">SrcSpan</a> -&gt; <a href="CoreSyn.html#t:CoreExpr">CoreExpr</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> <a href="GHC.html#t:ForeignHValue">ForeignHValue</a> <a href="src/HscMain.html#hscCompileCoreExpr" class="link">Source</a> <a href="#v:hscCompileCoreExpr" class="selflink">#</a></p></div><h1 id="g:6">Low-level exports for hooks</h1><div class="top"><p class="src"><a id="v:hscCompileCoreExpr-39-" class="def">hscCompileCoreExpr'</a> :: <a href="HscTypes.html#t:HscEnv">HscEnv</a> -&gt; <a href="SrcLoc.html#t:SrcSpan">SrcSpan</a> -&gt; <a href="CoreSyn.html#t:CoreExpr">CoreExpr</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> <a href="GHC.html#t:ForeignHValue">ForeignHValue</a> <a href="src/HscMain.html#hscCompileCoreExpr%27" class="link">Source</a> <a href="#v:hscCompileCoreExpr-39-" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:hscParse-39-" class="def">hscParse'</a> :: <a href="HscTypes.html#t:ModSummary">ModSummary</a> -&gt; <a href="HscTypes.html#t:Hsc">Hsc</a> <a href="HscTypes.html#t:HsParsedModule">HsParsedModule</a> <a href="src/HscMain.html#hscParse%27" class="link">Source</a> <a href="#v:hscParse-39-" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:hscSimplify-39-" class="def">hscSimplify'</a> :: <a href="HscTypes.html#t:ModGuts">ModGuts</a> -&gt; <a href="HscTypes.html#t:Hsc">Hsc</a> <a href="HscTypes.html#t:ModGuts">ModGuts</a> <a href="src/HscMain.html#hscSimplify%27" class="link">Source</a> <a href="#v:hscSimplify-39-" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:hscDesugar-39-" class="def">hscDesugar'</a> :: <a href="Module.html#t:ModLocation">ModLocation</a> -&gt; <a href="TcRnTypes.html#t:TcGblEnv">TcGblEnv</a> -&gt; <a href="HscTypes.html#t:Hsc">Hsc</a> <a href="HscTypes.html#t:ModGuts">ModGuts</a> <a href="src/HscMain.html#hscDesugar%27" class="link">Source</a> <a href="#v:hscDesugar-39-" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:tcRnModule-39-" class="def">tcRnModule'</a> :: <a href="HscTypes.html#t:HscEnv">HscEnv</a> -&gt; <a href="HscTypes.html#t:ModSummary">ModSummary</a> -&gt; <a href="../base-4.10.0.0/Data-Bool.html#t:Bool">Bool</a> -&gt; <a href="HscTypes.html#t:HsParsedModule">HsParsedModule</a> -&gt; <a href="HscTypes.html#t:Hsc">Hsc</a> <a href="TcRnTypes.html#t:TcGblEnv">TcGblEnv</a> <a href="src/HscMain.html#tcRnModule%27" class="link">Source</a> <a href="#v:tcRnModule-39-" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:getHscEnv" class="def">getHscEnv</a> :: <a href="HscTypes.html#t:Hsc">Hsc</a> <a href="HscTypes.html#t:HscEnv">HscEnv</a> <a href="src/HscMain.html#getHscEnv" class="link">Source</a> <a href="#v:getHscEnv" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:hscSimpleIface-39-" class="def">hscSimpleIface'</a> :: <a href="TcRnTypes.html#t:TcGblEnv">TcGblEnv</a> -&gt; <a href="../base-4.10.0.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Fingerprint.html#t:Fingerprint">Fingerprint</a> -&gt; <a href="HscTypes.html#t:Hsc">Hsc</a> (<a href="HscTypes.html#t:ModIface">ModIface</a>, <a href="../base-4.10.0.0/Data-Bool.html#t:Bool">Bool</a>, <a href="HscTypes.html#t:ModDetails">ModDetails</a>) <a href="src/HscMain.html#hscSimpleIface%27" class="link">Source</a> <a href="#v:hscSimpleIface-39-" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:hscNormalIface-39-" class="def">hscNormalIface'</a> :: <a href="HscTypes.html#t:ModGuts">ModGuts</a> -&gt; <a href="../base-4.10.0.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Fingerprint.html#t:Fingerprint">Fingerprint</a> -&gt; <a href="HscTypes.html#t:Hsc">Hsc</a> (<a href="HscTypes.html#t:ModIface">ModIface</a>, <a href="../base-4.10.0.0/Data-Bool.html#t:Bool">Bool</a>, <a href="HscTypes.html#t:ModDetails">ModDetails</a>, <a href="HscTypes.html#t:CgGuts">CgGuts</a>) <a href="src/HscMain.html#hscNormalIface%27" class="link">Source</a> <a href="#v:hscNormalIface-39-" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:oneShotMsg" class="def">oneShotMsg</a> :: <a href="HscTypes.html#t:HscEnv">HscEnv</a> -&gt; <a href="MkIface.html#t:RecompileRequired">RecompileRequired</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> () <a href="src/HscMain.html#oneShotMsg" class="link">Source</a> <a href="#v:oneShotMsg" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:hscFileFrontEnd" class="def">hscFileFrontEnd</a> :: <a href="HscTypes.html#t:ModSummary">ModSummary</a> -&gt; <a href="HscTypes.html#t:Hsc">Hsc</a> <a href="TcRnTypes.html#t:TcGblEnv">TcGblEnv</a> <a href="src/HscMain.html#hscFileFrontEnd" class="link">Source</a> <a href="#v:hscFileFrontEnd" class="selflink">#</a></p><div class="doc"><p>Given a <code><a href="HscTypes.html#t:ModSummary">ModSummary</a></code>, parses and typechecks it, returning the
 <code><a href="TcRnTypes.html#t:TcGblEnv">TcGblEnv</a></code> resulting from type-checking.</p></div></div><div class="top"><p class="src"><a id="v:genericHscFrontend" class="def">genericHscFrontend</a> :: <a href="HscTypes.html#t:ModSummary">ModSummary</a> -&gt; <a href="HscTypes.html#t:Hsc">Hsc</a> <a href="TcRnTypes.html#t:FrontendResult">FrontendResult</a> <a href="src/HscMain.html#genericHscFrontend" class="link">Source</a> <a href="#v:genericHscFrontend" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:dumpIfaceStats" class="def">dumpIfaceStats</a> :: <a href="HscTypes.html#t:HscEnv">HscEnv</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> () <a href="src/HscMain.html#dumpIfaceStats" class="link">Source</a> <a href="#v:dumpIfaceStats" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:ioMsgMaybe" class="def">ioMsgMaybe</a> :: <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> (<a href="ErrUtils.html#t:Messages">Messages</a>, <a href="../base-4.10.0.0/Data-Maybe.html#t:Maybe">Maybe</a> a) -&gt; <a href="HscTypes.html#t:Hsc">Hsc</a> a <a href="src/HscMain.html#ioMsgMaybe" class="link">Source</a> <a href="#v:ioMsgMaybe" class="selflink">#</a></p><div class="doc"><p>Deal with errors and warnings returned by a compilation step</p><p>In order to reduce dependencies to other parts of the compiler, functions
 outside the &quot;main&quot; parts of GHC return warnings and errors as a parameter
 and signal success via by wrapping the result in a <code><a href="../base-4.10.0.0/Data-Maybe.html#t:Maybe">Maybe</a></code> type. This
 function logs the returned warnings and propagates errors as exceptions
 (of type <code><a href="HscTypes.html#t:SourceError">SourceError</a></code>).</p><p>This function assumes the following invariants:</p><ol><li>If the second result indicates success (is of the form 'Just x'),
     there must be no error messages in the first result.</li><li>If there are no error messages, but the second result indicates failure
     there should be warnings in the first result. That is, if the action
     failed, it must have been due to the warnings (i.e., <code>-Werror</code>).</li></ol></div></div><div class="top"><p class="src"><a id="v:showModuleIndex" class="def">showModuleIndex</a> :: (<a href="../base-4.10.0.0/Data-Int.html#t:Int">Int</a>, <a href="../base-4.10.0.0/Data-Int.html#t:Int">Int</a>) -&gt; <a href="../base-4.10.0.0/Data-String.html#t:String">String</a> <a href="src/HscMain.html#showModuleIndex" class="link">Source</a> <a href="#v:showModuleIndex" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:hscAddSptEntries" class="def">hscAddSptEntries</a> :: <a href="HscTypes.html#t:HscEnv">HscEnv</a> -&gt; [<a href="HscTypes.html#t:SptEntry">SptEntry</a>] -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> () <a href="src/HscMain.html#hscAddSptEntries" class="link">Source</a> <a href="#v:hscAddSptEntries" class="selflink">#</a></p><div class="doc"><p>Load the given static-pointer table entries into the interpreter.
 See Note [Grand plan for static forms] in StaticPtrTable.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.18.2</p></div></body></html>