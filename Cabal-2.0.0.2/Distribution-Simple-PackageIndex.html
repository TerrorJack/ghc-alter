<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Distribution.Simple.PackageIndex</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Distribution-Simple-PackageIndex.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">Cabal-2.0.0.2: A framework for packaging Haskell software</p></div><div id="content"><div id="module-header"><table class="info"><tr><th valign="top">Copyright</th><td>(c) David Himmelstrup 2005<br />Bjorn Bringert 2007<br />Duncan Coutts 2008-2009</td></tr><tr><th>Maintainer</th><td>cabal-devel@haskell.org</td></tr><tr><th>Portability</th><td>portable</td></tr><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Distribution.Simple.PackageIndex</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Package index data type</a></li><li><a href="#g:2">Creating an index</a></li><li><a href="#g:3">Updates</a></li><li><a href="#g:4">Queries</a><ul><li><a href="#g:5">Precise lookups</a></li><li><a href="#g:6">Case-insensitive searches</a></li><li><a href="#g:7">Bulk queries</a></li><li><a href="#g:8">Special queries</a></li></ul></li><li><a href="#g:9">Backwards compatibility</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>An index of packages whose primary key is <code><a href="Distribution-Types-UnitId.html#t:UnitId">UnitId</a></code>.  Public libraries
 are additionally indexed by <code><a href="Distribution-Types-PackageName.html#t:PackageName">PackageName</a></code> and <code><a href="Distribution-Version.html#t:Version">Version</a></code>.
 Technically, these are an index of *units* (so we should eventually
 rename it to <code>UnitIndex</code>); but in the absence of internal libraries
 or Backpack each unit is equivalent to a package.</p><p>While <code><a href="Distribution-Simple-PackageIndex.html#t:PackageIndex">PackageIndex</a></code> is parametric over what it actually records,
 it is in fact only ever instantiated with a single element:
 The <code><a href="Distribution-Simple-PackageIndex.html#t:InstalledPackageIndex">InstalledPackageIndex</a></code> (defined here) contains a graph of
 <code>InstalledPackageInfo</code>s representing the packages in a
 package database stack.  It is used in a variety of ways:</p><ul><li>The primary use to let Cabal access the same installed
     package database which is used by GHC during compilation.
     For example, this data structure is used by 'ghc-pkg'
     and <code>Cabal</code> to do consistency checks on the database
     (are the references closed).</li><li>Given a set of dependencies, we can compute the transitive
     closure of dependencies.  This is to check if the versions
     of packages are consistent, and also needed by multiple
     tools (Haddock must be explicitly told about the every
     transitive package to do cross-package linking;
     preprocessors must know about the include paths of all
     transitive dependencies.)</li></ul><p>This <code><a href="Distribution-Simple-PackageIndex.html#t:PackageIndex">PackageIndex</a></code> is NOT to be confused with
 <code><a href="Distribution-Client.html#v:PackageIndex">PackageIndex</a></code>, which indexes packages only by
 <code><a href="Distribution-Types-PackageName.html#t:PackageName">PackageName</a></code> (this makes it suitable for indexing source packages,
 for which we don't know <code><a href="Distribution-Types-UnitId.html#t:UnitId">UnitId</a></code>s.)</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">type</span> <a href="#t:InstalledPackageIndex">InstalledPackageIndex</a> = <a href="Distribution-Simple-PackageIndex.html#t:PackageIndex">PackageIndex</a> <a href="Distribution-InstalledPackageInfo.html#t:InstalledPackageInfo">InstalledPackageInfo</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:PackageIndex">PackageIndex</a> a</li><li class="src short"><a href="#v:fromList">fromList</a> :: [<a href="Distribution-InstalledPackageInfo.html#t:InstalledPackageInfo">InstalledPackageInfo</a>] -&gt; <a href="Distribution-Simple-PackageIndex.html#t:InstalledPackageIndex">InstalledPackageIndex</a></li><li class="src short"><a href="#v:merge">merge</a> :: <a href="Distribution-Simple-PackageIndex.html#t:InstalledPackageIndex">InstalledPackageIndex</a> -&gt; <a href="Distribution-Simple-PackageIndex.html#t:InstalledPackageIndex">InstalledPackageIndex</a> -&gt; <a href="Distribution-Simple-PackageIndex.html#t:InstalledPackageIndex">InstalledPackageIndex</a></li><li class="src short"><a href="#v:insert">insert</a> :: <a href="Distribution-InstalledPackageInfo.html#t:InstalledPackageInfo">InstalledPackageInfo</a> -&gt; <a href="Distribution-Simple-PackageIndex.html#t:InstalledPackageIndex">InstalledPackageIndex</a> -&gt; <a href="Distribution-Simple-PackageIndex.html#t:InstalledPackageIndex">InstalledPackageIndex</a></li><li class="src short"><a href="#v:deleteUnitId">deleteUnitId</a> :: <a href="Distribution-Types-UnitId.html#t:UnitId">UnitId</a> -&gt; <a href="Distribution-Simple-PackageIndex.html#t:InstalledPackageIndex">InstalledPackageIndex</a> -&gt; <a href="Distribution-Simple-PackageIndex.html#t:InstalledPackageIndex">InstalledPackageIndex</a></li><li class="src short"><a href="#v:deleteSourcePackageId">deleteSourcePackageId</a> :: <a href="Distribution-Types-PackageId.html#t:PackageId">PackageId</a> -&gt; <a href="Distribution-Simple-PackageIndex.html#t:InstalledPackageIndex">InstalledPackageIndex</a> -&gt; <a href="Distribution-Simple-PackageIndex.html#t:InstalledPackageIndex">InstalledPackageIndex</a></li><li class="src short"><a href="#v:deletePackageName">deletePackageName</a> :: <a href="Distribution-Types-PackageName.html#t:PackageName">PackageName</a> -&gt; <a href="Distribution-Simple-PackageIndex.html#t:InstalledPackageIndex">InstalledPackageIndex</a> -&gt; <a href="Distribution-Simple-PackageIndex.html#t:InstalledPackageIndex">InstalledPackageIndex</a></li><li class="src short"><a href="#v:lookupUnitId">lookupUnitId</a> :: <a href="Distribution-Simple-PackageIndex.html#t:PackageIndex">PackageIndex</a> a -&gt; <a href="Distribution-Types-UnitId.html#t:UnitId">UnitId</a> -&gt; <a href="../base-4.10.0.0/Data-Maybe.html#t:Maybe">Maybe</a> a</li><li class="src short"><a href="#v:lookupComponentId">lookupComponentId</a> :: <a href="Distribution-Simple-PackageIndex.html#t:PackageIndex">PackageIndex</a> a -&gt; <a href="Distribution-Types-ComponentId.html#t:ComponentId">ComponentId</a> -&gt; <a href="../base-4.10.0.0/Data-Maybe.html#t:Maybe">Maybe</a> a</li><li class="src short"><a href="#v:lookupSourcePackageId">lookupSourcePackageId</a> :: <a href="Distribution-Simple-PackageIndex.html#t:PackageIndex">PackageIndex</a> a -&gt; <a href="Distribution-Types-PackageId.html#t:PackageId">PackageId</a> -&gt; [a]</li><li class="src short"><a href="#v:lookupPackageId">lookupPackageId</a> :: <a href="Distribution-Simple-PackageIndex.html#t:PackageIndex">PackageIndex</a> a -&gt; <a href="Distribution-Types-PackageId.html#t:PackageId">PackageId</a> -&gt; <a href="../base-4.10.0.0/Data-Maybe.html#t:Maybe">Maybe</a> a</li><li class="src short"><a href="#v:lookupPackageName">lookupPackageName</a> :: <a href="Distribution-Simple-PackageIndex.html#t:PackageIndex">PackageIndex</a> a -&gt; <a href="Distribution-Types-PackageName.html#t:PackageName">PackageName</a> -&gt; [(<a href="Distribution-Version.html#t:Version">Version</a>, [a])]</li><li class="src short"><a href="#v:lookupDependency">lookupDependency</a> :: <a href="Distribution-Simple-PackageIndex.html#t:InstalledPackageIndex">InstalledPackageIndex</a> -&gt; <a href="Distribution-Types-Dependency.html#t:Dependency">Dependency</a> -&gt; [(<a href="Distribution-Version.html#t:Version">Version</a>, [<a href="Distribution-InstalledPackageInfo.html#t:InstalledPackageInfo">InstalledPackageInfo</a>])]</li><li class="src short"><a href="#v:lookupInternalDependency">lookupInternalDependency</a> :: <a href="Distribution-Simple-PackageIndex.html#t:InstalledPackageIndex">InstalledPackageIndex</a> -&gt; <a href="Distribution-Types-Dependency.html#t:Dependency">Dependency</a> -&gt; <a href="../base-4.10.0.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Distribution-Types-UnqualComponentName.html#t:UnqualComponentName">UnqualComponentName</a> -&gt; [(<a href="Distribution-Version.html#t:Version">Version</a>, [<a href="Distribution-InstalledPackageInfo.html#t:InstalledPackageInfo">InstalledPackageInfo</a>])]</li><li class="src short"><a href="#v:searchByName">searchByName</a> :: <a href="Distribution-Simple-PackageIndex.html#t:PackageIndex">PackageIndex</a> a -&gt; <a href="../base-4.10.0.0/Data-String.html#t:String">String</a> -&gt; <a href="Distribution-Simple-PackageIndex.html#t:SearchResult">SearchResult</a> [a]</li><li class="src short"><span class="keyword">data</span> <a href="#t:SearchResult">SearchResult</a> a<ul class="subs"><li>= <a href="#v:None">None</a></li><li>| <a href="#v:Unambiguous">Unambiguous</a> a</li><li>| <a href="#v:Ambiguous">Ambiguous</a> [a]</li></ul></li><li class="src short"><a href="#v:searchByNameSubstring">searchByNameSubstring</a> :: <a href="Distribution-Simple-PackageIndex.html#t:PackageIndex">PackageIndex</a> a -&gt; <a href="../base-4.10.0.0/Data-String.html#t:String">String</a> -&gt; [a]</li><li class="src short"><a href="#v:allPackages">allPackages</a> :: <a href="Distribution-Simple-PackageIndex.html#t:PackageIndex">PackageIndex</a> a -&gt; [a]</li><li class="src short"><a href="#v:allPackagesByName">allPackagesByName</a> :: <a href="Distribution-Simple-PackageIndex.html#t:PackageIndex">PackageIndex</a> a -&gt; [(<a href="Distribution-Types-PackageName.html#t:PackageName">PackageName</a>, [a])]</li><li class="src short"><a href="#v:allPackagesBySourcePackageId">allPackagesBySourcePackageId</a> :: <a href="Distribution-Package.html#t:HasUnitId">HasUnitId</a> a =&gt; <a href="Distribution-Simple-PackageIndex.html#t:PackageIndex">PackageIndex</a> a -&gt; [(<a href="Distribution-Types-PackageId.html#t:PackageId">PackageId</a>, [a])]</li><li class="src short"><a href="#v:allPackagesBySourcePackageIdAndLibName">allPackagesBySourcePackageIdAndLibName</a> :: <a href="Distribution-Package.html#t:HasUnitId">HasUnitId</a> a =&gt; <a href="Distribution-Simple-PackageIndex.html#t:PackageIndex">PackageIndex</a> a -&gt; [((<a href="Distribution-Types-PackageId.html#t:PackageId">PackageId</a>, <a href="../base-4.10.0.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Distribution-Types-UnqualComponentName.html#t:UnqualComponentName">UnqualComponentName</a>), [a])]</li><li class="src short"><a href="#v:brokenPackages">brokenPackages</a> :: <a href="Distribution-Package.html#t:PackageInstalled">PackageInstalled</a> a =&gt; <a href="Distribution-Simple-PackageIndex.html#t:PackageIndex">PackageIndex</a> a -&gt; [(a, [<a href="Distribution-Types-UnitId.html#t:UnitId">UnitId</a>])]</li><li class="src short"><a href="#v:dependencyClosure">dependencyClosure</a> :: <a href="Distribution-Simple-PackageIndex.html#t:InstalledPackageIndex">InstalledPackageIndex</a> -&gt; [<a href="Distribution-Types-UnitId.html#t:UnitId">UnitId</a>] -&gt; <a href="../base-4.10.0.0/Data-Either.html#t:Either">Either</a> <a href="Distribution-Simple-PackageIndex.html#t:InstalledPackageIndex">InstalledPackageIndex</a> [(<a href="Distribution-InstalledPackageInfo.html#t:InstalledPackageInfo">InstalledPackageInfo</a>, [<a href="Distribution-Types-UnitId.html#t:UnitId">UnitId</a>])]</li><li class="src short"><a href="#v:reverseDependencyClosure">reverseDependencyClosure</a> :: <a href="Distribution-Package.html#t:PackageInstalled">PackageInstalled</a> a =&gt; <a href="Distribution-Simple-PackageIndex.html#t:PackageIndex">PackageIndex</a> a -&gt; [<a href="Distribution-Types-UnitId.html#t:UnitId">UnitId</a>] -&gt; [a]</li><li class="src short"><a href="#v:topologicalOrder">topologicalOrder</a> :: <a href="Distribution-Package.html#t:PackageInstalled">PackageInstalled</a> a =&gt; <a href="Distribution-Simple-PackageIndex.html#t:PackageIndex">PackageIndex</a> a -&gt; [a]</li><li class="src short"><a href="#v:reverseTopologicalOrder">reverseTopologicalOrder</a> :: <a href="Distribution-Package.html#t:PackageInstalled">PackageInstalled</a> a =&gt; <a href="Distribution-Simple-PackageIndex.html#t:PackageIndex">PackageIndex</a> a -&gt; [a]</li><li class="src short"><a href="#v:dependencyInconsistencies">dependencyInconsistencies</a> :: <a href="Distribution-Simple-PackageIndex.html#t:InstalledPackageIndex">InstalledPackageIndex</a> -&gt; [(DepUniqueKey, [(<a href="Distribution-Types-UnitId.html#t:UnitId">UnitId</a>, [<a href="Distribution-InstalledPackageInfo.html#t:InstalledPackageInfo">InstalledPackageInfo</a>])])]</li><li class="src short"><a href="#v:dependencyCycles">dependencyCycles</a> :: <a href="Distribution-Package.html#t:PackageInstalled">PackageInstalled</a> a =&gt; <a href="Distribution-Simple-PackageIndex.html#t:PackageIndex">PackageIndex</a> a -&gt; [[a]]</li><li class="src short"><a href="#v:dependencyGraph">dependencyGraph</a> :: <a href="Distribution-Package.html#t:PackageInstalled">PackageInstalled</a> a =&gt; <a href="Distribution-Simple-PackageIndex.html#t:PackageIndex">PackageIndex</a> a -&gt; (<a href="../containers-0.5.10.2/Data-Graph.html#t:Graph">Graph</a>, <a href="../containers-0.5.10.2/Data-Graph.html#t:Vertex">Vertex</a> -&gt; a, <a href="Distribution-Types-UnitId.html#t:UnitId">UnitId</a> -&gt; <a href="../base-4.10.0.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../containers-0.5.10.2/Data-Graph.html#t:Vertex">Vertex</a>)</li><li class="src short"><a href="#v:moduleNameIndex">moduleNameIndex</a> :: <a href="Distribution-Simple-PackageIndex.html#t:InstalledPackageIndex">InstalledPackageIndex</a> -&gt; <a href="Distribution-Compat-Prelude-Internal.html#t:Map">Map</a> <a href="Distribution-ModuleName.html#t:ModuleName">ModuleName</a> [<a href="Distribution-InstalledPackageInfo.html#t:InstalledPackageInfo">InstalledPackageInfo</a>]</li><li class="src short"><a href="#v:deleteInstalledPackageId">deleteInstalledPackageId</a> :: <a href="Distribution-Types-UnitId.html#t:UnitId">UnitId</a> -&gt; <a href="Distribution-Simple-PackageIndex.html#t:InstalledPackageIndex">InstalledPackageIndex</a> -&gt; <a href="Distribution-Simple-PackageIndex.html#t:InstalledPackageIndex">InstalledPackageIndex</a></li><li class="src short"><a href="#v:lookupInstalledPackageId">lookupInstalledPackageId</a> :: <a href="Distribution-Simple-PackageIndex.html#t:PackageIndex">PackageIndex</a> a -&gt; <a href="Distribution-Types-UnitId.html#t:UnitId">UnitId</a> -&gt; <a href="../base-4.10.0.0/Data-Maybe.html#t:Maybe">Maybe</a> a</li></ul></div><div id="interface"><h1 id="g:1">Package index data type</h1><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:InstalledPackageIndex" class="def">InstalledPackageIndex</a> = <a href="Distribution-Simple-PackageIndex.html#t:PackageIndex">PackageIndex</a> <a href="Distribution-InstalledPackageInfo.html#t:InstalledPackageInfo">InstalledPackageInfo</a> <a href="src/Distribution-Simple-PackageIndex.html#InstalledPackageIndex" class="link">Source</a> <a href="#t:InstalledPackageIndex" class="selflink">#</a></p><div class="doc"><p>The default package index which contains <code>InstalledPackageInfo</code>.  Normally
 use this.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:PackageIndex" class="def">PackageIndex</a> a <a href="src/Distribution-Simple-PackageIndex.html#PackageIndex" class="link">Source</a> <a href="#t:PackageIndex" class="selflink">#</a></p><div class="doc"><p>The collection of information about packages from one or more <code>PackageDB</code>s.
 These packages generally should have an instance of <code><a href="Distribution-Package.html#t:PackageInstalled">PackageInstalled</a></code></p><p>Packages are uniquely identified in by their <code><a href="Distribution-Types-UnitId.html#t:UnitId">UnitId</a></code>, they can
 also be efficiently looked up by package name or by name and version.</p></div><div class="subs instances"><p id="control.i:PackageIndex" class="caption collapser" onclick="toggleSection('i:PackageIndex')">Instances</p><div id="section.i:PackageIndex" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:PackageIndex:Eq:1" class="instance expander" onclick="toggleSection('i:id:PackageIndex:Eq:1')"></span> <a href="../base-4.10.0.0/Data-Eq.html#t:Eq">Eq</a> a =&gt; <a href="../base-4.10.0.0/Data-Eq.html#t:Eq">Eq</a> (<a href="Distribution-Simple-PackageIndex.html#t:PackageIndex">PackageIndex</a> a)</span> <a href="#t:PackageIndex" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:PackageIndex:Eq:1" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="Distribution-Simple-PackageIndex.html#t:PackageIndex">PackageIndex</a> a -&gt; <a href="Distribution-Simple-PackageIndex.html#t:PackageIndex">PackageIndex</a> a -&gt; <a href="../base-4.10.0.0/Data-Bool.html#t:Bool">Bool</a> <a href="#v:-61--61-" class="selflink">#</a></p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="Distribution-Simple-PackageIndex.html#t:PackageIndex">PackageIndex</a> a -&gt; <a href="Distribution-Simple-PackageIndex.html#t:PackageIndex">PackageIndex</a> a -&gt; <a href="../base-4.10.0.0/Data-Bool.html#t:Bool">Bool</a> <a href="#v:-47--61-" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:PackageIndex:Read:2" class="instance expander" onclick="toggleSection('i:id:PackageIndex:Read:2')"></span> <a href="../base-4.10.0.0/Text-Read.html#t:Read">Read</a> a =&gt; <a href="../base-4.10.0.0/Text-Read.html#t:Read">Read</a> (<a href="Distribution-Simple-PackageIndex.html#t:PackageIndex">PackageIndex</a> a)</span> <a href="#t:PackageIndex" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:PackageIndex:Read:2" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:readsPrec">readsPrec</a> :: <a href="../base-4.10.0.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="Distribution-Compat-ReadP.html#t:ReadS">ReadS</a> (<a href="Distribution-Simple-PackageIndex.html#t:PackageIndex">PackageIndex</a> a) <a href="../base-4.10.0.0/src/GHC-Read.html#readsPrec" class="link">Source</a> <a href="#v:readsPrec" class="selflink">#</a></p><p class="src"><a href="#v:readList">readList</a> :: <a href="Distribution-Compat-ReadP.html#t:ReadS">ReadS</a> [<a href="Distribution-Simple-PackageIndex.html#t:PackageIndex">PackageIndex</a> a] <a href="../base-4.10.0.0/src/GHC-Read.html#readList" class="link">Source</a> <a href="#v:readList" class="selflink">#</a></p><p class="src"><a href="#v:readPrec">readPrec</a> :: <a href="../base-4.10.0.0/Text-ParserCombinators-ReadPrec.html#t:ReadPrec">ReadPrec</a> (<a href="Distribution-Simple-PackageIndex.html#t:PackageIndex">PackageIndex</a> a) <a href="../base-4.10.0.0/src/GHC-Read.html#readPrec" class="link">Source</a> <a href="#v:readPrec" class="selflink">#</a></p><p class="src"><a href="#v:readListPrec">readListPrec</a> :: <a href="../base-4.10.0.0/Text-ParserCombinators-ReadPrec.html#t:ReadPrec">ReadPrec</a> [<a href="Distribution-Simple-PackageIndex.html#t:PackageIndex">PackageIndex</a> a] <a href="../base-4.10.0.0/src/GHC-Read.html#readListPrec" class="link">Source</a> <a href="#v:readListPrec" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:PackageIndex:Show:3" class="instance expander" onclick="toggleSection('i:id:PackageIndex:Show:3')"></span> <a href="../base-4.10.0.0/Text-Show.html#t:Show">Show</a> a =&gt; <a href="../base-4.10.0.0/Text-Show.html#t:Show">Show</a> (<a href="Distribution-Simple-PackageIndex.html#t:PackageIndex">PackageIndex</a> a)</span> <a href="#t:PackageIndex" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:PackageIndex:Show:3" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="../base-4.10.0.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="Distribution-Simple-PackageIndex.html#t:PackageIndex">PackageIndex</a> a -&gt; <a href="../base-4.10.0.0/Text-Show.html#t:ShowS">ShowS</a> <a href="../base-4.10.0.0/src/GHC-Show.html#showsPrec" class="link">Source</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Distribution-Simple-PackageIndex.html#t:PackageIndex">PackageIndex</a> a -&gt; <a href="../base-4.10.0.0/Data-String.html#t:String">String</a> <a href="../base-4.10.0.0/src/GHC-Show.html#show" class="link">Source</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Distribution-Simple-PackageIndex.html#t:PackageIndex">PackageIndex</a> a] -&gt; <a href="../base-4.10.0.0/Text-Show.html#t:ShowS">ShowS</a> <a href="../base-4.10.0.0/src/GHC-Show.html#showList" class="link">Source</a> <a href="#v:showList" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:PackageIndex:Generic:4" class="instance expander" onclick="toggleSection('i:id:PackageIndex:Generic:4')"></span> <a href="Distribution-Compat-Prelude-Internal.html#t:Generic">Generic</a> (<a href="Distribution-Simple-PackageIndex.html#t:PackageIndex">PackageIndex</a> a)</span> <a href="#t:PackageIndex" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:PackageIndex:Generic:4" class="inst-details hide"><div class="subs associated-types"><p class="caption">Associated Types</p><p class="src"><span class="keyword">type</span> <a href="../base-4.10.0.0/GHC-Generics.html#t:Rep">Rep</a> (<a href="Distribution-Simple-PackageIndex.html#t:PackageIndex">PackageIndex</a> a) :: <a href="../base-4.10.0.0/Data-Kind.html#t:-42-">*</a> -&gt; <a href="../base-4.10.0.0/Data-Kind.html#t:-42-">*</a> <a href="../base-4.10.0.0/src/GHC-Generics.html#Rep" class="link">Source</a> <a href="#t:Rep" class="selflink">#</a></p></div> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:from">from</a> :: <a href="Distribution-Simple-PackageIndex.html#t:PackageIndex">PackageIndex</a> a -&gt; <a href="../base-4.10.0.0/GHC-Generics.html#t:Rep">Rep</a> (<a href="Distribution-Simple-PackageIndex.html#t:PackageIndex">PackageIndex</a> a) x <a href="../base-4.10.0.0/src/GHC-Generics.html#from" class="link">Source</a> <a href="#v:from" class="selflink">#</a></p><p class="src"><a href="#v:to">to</a> :: <a href="../base-4.10.0.0/GHC-Generics.html#t:Rep">Rep</a> (<a href="Distribution-Simple-PackageIndex.html#t:PackageIndex">PackageIndex</a> a) x -&gt; <a href="Distribution-Simple-PackageIndex.html#t:PackageIndex">PackageIndex</a> a <a href="../base-4.10.0.0/src/GHC-Generics.html#to" class="link">Source</a> <a href="#v:to" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:PackageIndex:Semigroup:5" class="instance expander" onclick="toggleSection('i:id:PackageIndex:Semigroup:5')"></span> <a href="Distribution-Compat-Semigroup.html#t:Semigroup">Semigroup</a> (<a href="Distribution-Simple-PackageIndex.html#t:PackageIndex">PackageIndex</a> <a href="Distribution-InstalledPackageInfo.html#t:InstalledPackageInfo">InstalledPackageInfo</a>)</span> <a href="#t:PackageIndex" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:PackageIndex:Semigroup:5" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-60--62-">(&lt;&gt;)</a> :: <a href="Distribution-Simple-PackageIndex.html#t:PackageIndex">PackageIndex</a> <a href="Distribution-InstalledPackageInfo.html#t:InstalledPackageInfo">InstalledPackageInfo</a> -&gt; <a href="Distribution-Simple-PackageIndex.html#t:PackageIndex">PackageIndex</a> <a href="Distribution-InstalledPackageInfo.html#t:InstalledPackageInfo">InstalledPackageInfo</a> -&gt; <a href="Distribution-Simple-PackageIndex.html#t:PackageIndex">PackageIndex</a> <a href="Distribution-InstalledPackageInfo.html#t:InstalledPackageInfo">InstalledPackageInfo</a> <a href="../base-4.10.0.0/src/GHC-Base.html#%3C%3E" class="link">Source</a> <a href="#v:-60--62-" class="selflink">#</a></p><p class="src"><a href="#v:sconcat">sconcat</a> :: <a href="../base-4.10.0.0/Data-List-NonEmpty.html#t:NonEmpty">NonEmpty</a> (<a href="Distribution-Simple-PackageIndex.html#t:PackageIndex">PackageIndex</a> <a href="Distribution-InstalledPackageInfo.html#t:InstalledPackageInfo">InstalledPackageInfo</a>) -&gt; <a href="Distribution-Simple-PackageIndex.html#t:PackageIndex">PackageIndex</a> <a href="Distribution-InstalledPackageInfo.html#t:InstalledPackageInfo">InstalledPackageInfo</a> <a href="../base-4.10.0.0/src/GHC-Base.html#sconcat" class="link">Source</a> <a href="#v:sconcat" class="selflink">#</a></p><p class="src"><a href="#v:stimes">stimes</a> :: <a href="../base-4.10.0.0/Prelude.html#t:Integral">Integral</a> b =&gt; b -&gt; <a href="Distribution-Simple-PackageIndex.html#t:PackageIndex">PackageIndex</a> <a href="Distribution-InstalledPackageInfo.html#t:InstalledPackageInfo">InstalledPackageInfo</a> -&gt; <a href="Distribution-Simple-PackageIndex.html#t:PackageIndex">PackageIndex</a> <a href="Distribution-InstalledPackageInfo.html#t:InstalledPackageInfo">InstalledPackageInfo</a> <a href="../base-4.10.0.0/src/GHC-Base.html#stimes" class="link">Source</a> <a href="#v:stimes" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:PackageIndex:Monoid:6" class="instance expander" onclick="toggleSection('i:id:PackageIndex:Monoid:6')"></span> <a href="Distribution-Compat-Semigroup.html#t:Monoid">Monoid</a> (<a href="Distribution-Simple-PackageIndex.html#t:PackageIndex">PackageIndex</a> <a href="Distribution-InstalledPackageInfo.html#t:InstalledPackageInfo">InstalledPackageInfo</a>)</span> <a href="#t:PackageIndex" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:PackageIndex:Monoid:6" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:mempty">mempty</a> :: <a href="Distribution-Simple-PackageIndex.html#t:PackageIndex">PackageIndex</a> <a href="Distribution-InstalledPackageInfo.html#t:InstalledPackageInfo">InstalledPackageInfo</a> <a href="../base-4.10.0.0/src/GHC-Base.html#mempty" class="link">Source</a> <a href="#v:mempty" class="selflink">#</a></p><p class="src"><a href="#v:mappend">mappend</a> :: <a href="Distribution-Simple-PackageIndex.html#t:PackageIndex">PackageIndex</a> <a href="Distribution-InstalledPackageInfo.html#t:InstalledPackageInfo">InstalledPackageInfo</a> -&gt; <a href="Distribution-Simple-PackageIndex.html#t:PackageIndex">PackageIndex</a> <a href="Distribution-InstalledPackageInfo.html#t:InstalledPackageInfo">InstalledPackageInfo</a> -&gt; <a href="Distribution-Simple-PackageIndex.html#t:PackageIndex">PackageIndex</a> <a href="Distribution-InstalledPackageInfo.html#t:InstalledPackageInfo">InstalledPackageInfo</a> <a href="../base-4.10.0.0/src/GHC-Base.html#mappend" class="link">Source</a> <a href="#v:mappend" class="selflink">#</a></p><p class="src"><a href="#v:mconcat">mconcat</a> :: [<a href="Distribution-Simple-PackageIndex.html#t:PackageIndex">PackageIndex</a> <a href="Distribution-InstalledPackageInfo.html#t:InstalledPackageInfo">InstalledPackageInfo</a>] -&gt; <a href="Distribution-Simple-PackageIndex.html#t:PackageIndex">PackageIndex</a> <a href="Distribution-InstalledPackageInfo.html#t:InstalledPackageInfo">InstalledPackageInfo</a> <a href="../base-4.10.0.0/src/GHC-Base.html#mconcat" class="link">Source</a> <a href="#v:mconcat" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:PackageIndex:Binary:7" class="instance expander" onclick="toggleSection('i:id:PackageIndex:Binary:7')"></span> <a href="Distribution-Compat-Prelude-Internal.html#t:Binary">Binary</a> a =&gt; <a href="Distribution-Compat-Prelude-Internal.html#t:Binary">Binary</a> (<a href="Distribution-Simple-PackageIndex.html#t:PackageIndex">PackageIndex</a> a)</span> <a href="#t:PackageIndex" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:PackageIndex:Binary:7" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:put">put</a> :: <a href="Distribution-Simple-PackageIndex.html#t:PackageIndex">PackageIndex</a> a -&gt; <a href="../binary-0.8.5.1/Data-Binary-Put.html#t:Put">Put</a> <a href="../binary-0.8.5.1/src/Data-Binary-Class.html#put" class="link">Source</a> <a href="#v:put" class="selflink">#</a></p><p class="src"><a href="#v:get">get</a> :: <a href="../binary-0.8.5.1/Data-Binary-Get-Internal.html#t:Get">Get</a> (<a href="Distribution-Simple-PackageIndex.html#t:PackageIndex">PackageIndex</a> a) <a href="../binary-0.8.5.1/src/Data-Binary-Class.html#get" class="link">Source</a> <a href="#v:get" class="selflink">#</a></p><p class="src"><a href="#v:putList">putList</a> :: [<a href="Distribution-Simple-PackageIndex.html#t:PackageIndex">PackageIndex</a> a] -&gt; <a href="../binary-0.8.5.1/Data-Binary-Put.html#t:Put">Put</a> <a href="../binary-0.8.5.1/src/Data-Binary-Class.html#putList" class="link">Source</a> <a href="#v:putList" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:PackageIndex:Rep:8" class="instance expander" onclick="toggleSection('i:id:PackageIndex:Rep:8')"></span> <span class="keyword">type</span> <a href="../base-4.10.0.0/GHC-Generics.html#t:Rep">Rep</a> (<a href="Distribution-Simple-PackageIndex.html#t:PackageIndex">PackageIndex</a> a)</span> <a href="#t:PackageIndex" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:PackageIndex:Rep:8" class="inst-details hide"><div class="src"><span class="keyword">type</span> <a href="../base-4.10.0.0/GHC-Generics.html#t:Rep">Rep</a> (<a href="Distribution-Simple-PackageIndex.html#t:PackageIndex">PackageIndex</a> a) = <a href="../base-4.10.0.0/GHC-Generics.html#t:D1">D1</a> <a href="../base-4.10.0.0/Data-Kind.html#t:-42-">*</a> (<a href="../base-4.10.0.0/GHC-Generics.html#v:MetaData">MetaData</a> &quot;PackageIndex&quot; &quot;Distribution.Simple.PackageIndex&quot; &quot;Cabal-2.0.0.2&quot; <a href="../base-4.10.0.0/Data-Bool.html#v:False">False</a>) (<a href="../base-4.10.0.0/GHC-Generics.html#t:C1">C1</a> <a href="../base-4.10.0.0/Data-Kind.html#t:-42-">*</a> (<a href="../base-4.10.0.0/GHC-Generics.html#v:MetaCons">MetaCons</a> &quot;PackageIndex&quot; <a href="../base-4.10.0.0/GHC-Generics.html#v:PrefixI">PrefixI</a> <a href="../base-4.10.0.0/Data-Bool.html#v:True">True</a>) (<a href="../base-4.10.0.0/GHC-Generics.html#t::-42-:">(:*:)</a> <a href="../base-4.10.0.0/Data-Kind.html#t:-42-">*</a> (<a href="../base-4.10.0.0/GHC-Generics.html#t:S1">S1</a> <a href="../base-4.10.0.0/Data-Kind.html#t:-42-">*</a> (<a href="../base-4.10.0.0/GHC-Generics.html#v:MetaSel">MetaSel</a> (<a href="../base-4.10.0.0/Data-Maybe.html#v:Just">Just</a> <a href="../base-4.10.0.0/GHC-TypeLits.html#t:Symbol">Symbol</a> &quot;unitIdIndex&quot;) <a href="../base-4.10.0.0/GHC-Generics.html#v:NoSourceUnpackedness">NoSourceUnpackedness</a> <a href="../base-4.10.0.0/GHC-Generics.html#v:SourceStrict">SourceStrict</a> <a href="../base-4.10.0.0/GHC-Generics.html#v:DecidedStrict">DecidedStrict</a>) (<a href="../base-4.10.0.0/GHC-Generics.html#t:Rec0">Rec0</a> <a href="../base-4.10.0.0/Data-Kind.html#t:-42-">*</a> (<a href="Distribution-Compat-Prelude-Internal.html#t:Map">Map</a> <a href="Distribution-Types-UnitId.html#t:UnitId">UnitId</a> a))) (<a href="../base-4.10.0.0/GHC-Generics.html#t:S1">S1</a> <a href="../base-4.10.0.0/Data-Kind.html#t:-42-">*</a> (<a href="../base-4.10.0.0/GHC-Generics.html#v:MetaSel">MetaSel</a> (<a href="../base-4.10.0.0/Data-Maybe.html#v:Just">Just</a> <a href="../base-4.10.0.0/GHC-TypeLits.html#t:Symbol">Symbol</a> &quot;packageIdIndex&quot;) <a href="../base-4.10.0.0/GHC-Generics.html#v:NoSourceUnpackedness">NoSourceUnpackedness</a> <a href="../base-4.10.0.0/GHC-Generics.html#v:SourceStrict">SourceStrict</a> <a href="../base-4.10.0.0/GHC-Generics.html#v:DecidedStrict">DecidedStrict</a>) (<a href="../base-4.10.0.0/GHC-Generics.html#t:Rec0">Rec0</a> <a href="../base-4.10.0.0/Data-Kind.html#t:-42-">*</a> (<a href="Distribution-Compat-Prelude-Internal.html#t:Map">Map</a> (<a href="Distribution-Types-PackageName.html#t:PackageName">PackageName</a>, <a href="../base-4.10.0.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Distribution-Types-UnqualComponentName.html#t:UnqualComponentName">UnqualComponentName</a>) (<a href="Distribution-Compat-Prelude-Internal.html#t:Map">Map</a> <a href="Distribution-Version.html#t:Version">Version</a> [a]))))))</div></div></td></tr></table></div></div></div><h1 id="g:2">Creating an index</h1><div class="top"><p class="src"><a id="v:fromList" class="def">fromList</a> :: [<a href="Distribution-InstalledPackageInfo.html#t:InstalledPackageInfo">InstalledPackageInfo</a>] -&gt; <a href="Distribution-Simple-PackageIndex.html#t:InstalledPackageIndex">InstalledPackageIndex</a> <a href="src/Distribution-Simple-PackageIndex.html#fromList" class="link">Source</a> <a href="#v:fromList" class="selflink">#</a></p><div class="doc"><p>Build an index out of a bunch of packages.</p><p>If there are duplicates by <code><a href="Distribution-Types-UnitId.html#t:UnitId">UnitId</a></code> then later ones mask earlier
 ones.</p></div></div><h1 id="g:3">Updates</h1><div class="top"><p class="src"><a id="v:merge" class="def">merge</a> :: <a href="Distribution-Simple-PackageIndex.html#t:InstalledPackageIndex">InstalledPackageIndex</a> -&gt; <a href="Distribution-Simple-PackageIndex.html#t:InstalledPackageIndex">InstalledPackageIndex</a> -&gt; <a href="Distribution-Simple-PackageIndex.html#t:InstalledPackageIndex">InstalledPackageIndex</a> <a href="src/Distribution-Simple-PackageIndex.html#merge" class="link">Source</a> <a href="#v:merge" class="selflink">#</a></p><div class="doc"><p>Merge two indexes.</p><p>Packages from the second mask packages from the first if they have the exact
 same <code><a href="Distribution-Types-UnitId.html#t:UnitId">UnitId</a></code>.</p><p>For packages with the same source <code><a href="Distribution-Types-PackageId.html#t:PackageId">PackageId</a></code>, packages from the second are
 &quot;preferred&quot; over those from the first. Being preferred means they are top
 result when we do a lookup by source <code><a href="Distribution-Types-PackageId.html#t:PackageId">PackageId</a></code>. This is the mechanism we
 use to prefer user packages over global packages.</p></div></div><div class="top"><p class="src"><a id="v:insert" class="def">insert</a> :: <a href="Distribution-InstalledPackageInfo.html#t:InstalledPackageInfo">InstalledPackageInfo</a> -&gt; <a href="Distribution-Simple-PackageIndex.html#t:InstalledPackageIndex">InstalledPackageIndex</a> -&gt; <a href="Distribution-Simple-PackageIndex.html#t:InstalledPackageIndex">InstalledPackageIndex</a> <a href="src/Distribution-Simple-PackageIndex.html#insert" class="link">Source</a> <a href="#v:insert" class="selflink">#</a></p><div class="doc"><p>Inserts a single package into the index.</p><p>This is equivalent to (but slightly quicker than) using <code><a href="Distribution-Compat-Semigroup.html#v:mappend">mappend</a></code> or
 <code><a href="Distribution-Simple-PackageIndex.html#v:merge">merge</a></code> with a singleton index.</p></div></div><div class="top"><p class="src"><a id="v:deleteUnitId" class="def">deleteUnitId</a> :: <a href="Distribution-Types-UnitId.html#t:UnitId">UnitId</a> -&gt; <a href="Distribution-Simple-PackageIndex.html#t:InstalledPackageIndex">InstalledPackageIndex</a> -&gt; <a href="Distribution-Simple-PackageIndex.html#t:InstalledPackageIndex">InstalledPackageIndex</a> <a href="src/Distribution-Simple-PackageIndex.html#deleteUnitId" class="link">Source</a> <a href="#v:deleteUnitId" class="selflink">#</a></p><div class="doc"><p>Removes a single installed package from the index.</p></div></div><div class="top"><p class="src"><a id="v:deleteSourcePackageId" class="def">deleteSourcePackageId</a> :: <a href="Distribution-Types-PackageId.html#t:PackageId">PackageId</a> -&gt; <a href="Distribution-Simple-PackageIndex.html#t:InstalledPackageIndex">InstalledPackageIndex</a> -&gt; <a href="Distribution-Simple-PackageIndex.html#t:InstalledPackageIndex">InstalledPackageIndex</a> <a href="src/Distribution-Simple-PackageIndex.html#deleteSourcePackageId" class="link">Source</a> <a href="#v:deleteSourcePackageId" class="selflink">#</a></p><div class="doc"><p>Removes all packages with this source <code><a href="Distribution-Types-PackageId.html#t:PackageId">PackageId</a></code> from the index.</p></div></div><div class="top"><p class="src"><a id="v:deletePackageName" class="def">deletePackageName</a> :: <a href="Distribution-Types-PackageName.html#t:PackageName">PackageName</a> -&gt; <a href="Distribution-Simple-PackageIndex.html#t:InstalledPackageIndex">InstalledPackageIndex</a> -&gt; <a href="Distribution-Simple-PackageIndex.html#t:InstalledPackageIndex">InstalledPackageIndex</a> <a href="src/Distribution-Simple-PackageIndex.html#deletePackageName" class="link">Source</a> <a href="#v:deletePackageName" class="selflink">#</a></p><div class="doc"><p>Removes all packages with this (case-sensitive) name from the index.</p><p>NB: Does NOT delete internal libraries from this package.</p></div></div><h1 id="g:4">Queries</h1><h2 id="g:5">Precise lookups</h2><div class="top"><p class="src"><a id="v:lookupUnitId" class="def">lookupUnitId</a> :: <a href="Distribution-Simple-PackageIndex.html#t:PackageIndex">PackageIndex</a> a -&gt; <a href="Distribution-Types-UnitId.html#t:UnitId">UnitId</a> -&gt; <a href="../base-4.10.0.0/Data-Maybe.html#t:Maybe">Maybe</a> a <a href="src/Distribution-Simple-PackageIndex.html#lookupUnitId" class="link">Source</a> <a href="#v:lookupUnitId" class="selflink">#</a></p><div class="doc"><p>Does a lookup by unit identifier.</p><p>Since multiple package DBs mask each other by <code><a href="Distribution-Types-UnitId.html#t:UnitId">UnitId</a></code>,
 then we get back at most one package.</p></div></div><div class="top"><p class="src"><a id="v:lookupComponentId" class="def">lookupComponentId</a> :: <a href="Distribution-Simple-PackageIndex.html#t:PackageIndex">PackageIndex</a> a -&gt; <a href="Distribution-Types-ComponentId.html#t:ComponentId">ComponentId</a> -&gt; <a href="../base-4.10.0.0/Data-Maybe.html#t:Maybe">Maybe</a> a <a href="src/Distribution-Simple-PackageIndex.html#lookupComponentId" class="link">Source</a> <a href="#v:lookupComponentId" class="selflink">#</a></p><div class="doc"><p>Does a lookup by component identifier.  In the absence
 of Backpack, this is just a <code><a href="Distribution-Simple-PackageIndex.html#v:lookupUnitId">lookupUnitId</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:lookupSourcePackageId" class="def">lookupSourcePackageId</a> :: <a href="Distribution-Simple-PackageIndex.html#t:PackageIndex">PackageIndex</a> a -&gt; <a href="Distribution-Types-PackageId.html#t:PackageId">PackageId</a> -&gt; [a] <a href="src/Distribution-Simple-PackageIndex.html#lookupSourcePackageId" class="link">Source</a> <a href="#v:lookupSourcePackageId" class="selflink">#</a></p><div class="doc"><p>Does a lookup by source package id (name &amp; version).</p><p>There can be multiple installed packages with the same source <code><a href="Distribution-Types-PackageId.html#t:PackageId">PackageId</a></code>
 but different <code><a href="Distribution-Types-UnitId.html#t:UnitId">UnitId</a></code>. They are returned in order of
 preference, with the most preferred first.</p></div></div><div class="top"><p class="src"><a id="v:lookupPackageId" class="def">lookupPackageId</a> :: <a href="Distribution-Simple-PackageIndex.html#t:PackageIndex">PackageIndex</a> a -&gt; <a href="Distribution-Types-PackageId.html#t:PackageId">PackageId</a> -&gt; <a href="../base-4.10.0.0/Data-Maybe.html#t:Maybe">Maybe</a> a <a href="src/Distribution-Simple-PackageIndex.html#lookupPackageId" class="link">Source</a> <a href="#v:lookupPackageId" class="selflink">#</a></p><div class="doc"><p>Convenient alias of <code><a href="Distribution-Simple-PackageIndex.html#v:lookupSourcePackageId">lookupSourcePackageId</a></code>, but assuming only
 one package per package ID.</p></div></div><div class="top"><p class="src"><a id="v:lookupPackageName" class="def">lookupPackageName</a> :: <a href="Distribution-Simple-PackageIndex.html#t:PackageIndex">PackageIndex</a> a -&gt; <a href="Distribution-Types-PackageName.html#t:PackageName">PackageName</a> -&gt; [(<a href="Distribution-Version.html#t:Version">Version</a>, [a])] <a href="src/Distribution-Simple-PackageIndex.html#lookupPackageName" class="link">Source</a> <a href="#v:lookupPackageName" class="selflink">#</a></p><div class="doc"><p>Does a lookup by source package name.</p></div></div><div class="top"><p class="src"><a id="v:lookupDependency" class="def">lookupDependency</a> :: <a href="Distribution-Simple-PackageIndex.html#t:InstalledPackageIndex">InstalledPackageIndex</a> -&gt; <a href="Distribution-Types-Dependency.html#t:Dependency">Dependency</a> -&gt; [(<a href="Distribution-Version.html#t:Version">Version</a>, [<a href="Distribution-InstalledPackageInfo.html#t:InstalledPackageInfo">InstalledPackageInfo</a>])] <a href="src/Distribution-Simple-PackageIndex.html#lookupDependency" class="link">Source</a> <a href="#v:lookupDependency" class="selflink">#</a></p><div class="doc"><p>Does a lookup by source package name and a range of versions.</p><p>We get back any number of versions of the specified package name, all
 satisfying the version range constraint.</p><p>This does NOT work for internal dependencies, DO NOT use this
 function on those; use <code><a href="Distribution-Simple-PackageIndex.html#v:lookupInternalDependency">lookupInternalDependency</a></code> instead.</p><p>INVARIANT: List of eligible <code><a href="Distribution-InstalledPackageInfo.html#t:InstalledPackageInfo">InstalledPackageInfo</a></code> is non-empty.</p></div></div><div class="top"><p class="src"><a id="v:lookupInternalDependency" class="def">lookupInternalDependency</a> :: <a href="Distribution-Simple-PackageIndex.html#t:InstalledPackageIndex">InstalledPackageIndex</a> -&gt; <a href="Distribution-Types-Dependency.html#t:Dependency">Dependency</a> -&gt; <a href="../base-4.10.0.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Distribution-Types-UnqualComponentName.html#t:UnqualComponentName">UnqualComponentName</a> -&gt; [(<a href="Distribution-Version.html#t:Version">Version</a>, [<a href="Distribution-InstalledPackageInfo.html#t:InstalledPackageInfo">InstalledPackageInfo</a>])] <a href="src/Distribution-Simple-PackageIndex.html#lookupInternalDependency" class="link">Source</a> <a href="#v:lookupInternalDependency" class="selflink">#</a></p><div class="doc"><p>Does a lookup by source package name and a range of versions.</p><p>We get back any number of versions of the specified package name, all
 satisfying the version range constraint.</p><p>INVARIANT: List of eligible <code><a href="Distribution-InstalledPackageInfo.html#t:InstalledPackageInfo">InstalledPackageInfo</a></code> is non-empty.</p></div></div><h2 id="g:6">Case-insensitive searches</h2><div class="top"><p class="src"><a id="v:searchByName" class="def">searchByName</a> :: <a href="Distribution-Simple-PackageIndex.html#t:PackageIndex">PackageIndex</a> a -&gt; <a href="../base-4.10.0.0/Data-String.html#t:String">String</a> -&gt; <a href="Distribution-Simple-PackageIndex.html#t:SearchResult">SearchResult</a> [a] <a href="src/Distribution-Simple-PackageIndex.html#searchByName" class="link">Source</a> <a href="#v:searchByName" class="selflink">#</a></p><div class="doc"><p>Does a case-insensitive search by package name.</p><p>If there is only one package that compares case-insensitively to this name
 then the search is unambiguous and we get back all versions of that package.
 If several match case-insensitively but one matches exactly then it is also
 unambiguous.</p><p>If however several match case-insensitively and none match exactly then we
 have an ambiguous result, and we get back all the versions of all the
 packages. The list of ambiguous results is split by exact package name. So
 it is a non-empty list of non-empty lists.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:SearchResult" class="def">SearchResult</a> a <a href="src/Distribution-Simple-PackageIndex.html#SearchResult" class="link">Source</a> <a href="#t:SearchResult" class="selflink">#</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:None" class="def">None</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:Unambiguous" class="def">Unambiguous</a> a</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:Ambiguous" class="def">Ambiguous</a> [a]</td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><a id="v:searchByNameSubstring" class="def">searchByNameSubstring</a> :: <a href="Distribution-Simple-PackageIndex.html#t:PackageIndex">PackageIndex</a> a -&gt; <a href="../base-4.10.0.0/Data-String.html#t:String">String</a> -&gt; [a] <a href="src/Distribution-Simple-PackageIndex.html#searchByNameSubstring" class="link">Source</a> <a href="#v:searchByNameSubstring" class="selflink">#</a></p><div class="doc"><p>Does a case-insensitive substring search by package name.</p><p>That is, all packages that contain the given string in their name.</p></div></div><h2 id="g:7">Bulk queries</h2><div class="top"><p class="src"><a id="v:allPackages" class="def">allPackages</a> :: <a href="Distribution-Simple-PackageIndex.html#t:PackageIndex">PackageIndex</a> a -&gt; [a] <a href="src/Distribution-Simple-PackageIndex.html#allPackages" class="link">Source</a> <a href="#v:allPackages" class="selflink">#</a></p><div class="doc"><p>Get all the packages from the index.</p></div></div><div class="top"><p class="src"><a id="v:allPackagesByName" class="def">allPackagesByName</a> :: <a href="Distribution-Simple-PackageIndex.html#t:PackageIndex">PackageIndex</a> a -&gt; [(<a href="Distribution-Types-PackageName.html#t:PackageName">PackageName</a>, [a])] <a href="src/Distribution-Simple-PackageIndex.html#allPackagesByName" class="link">Source</a> <a href="#v:allPackagesByName" class="selflink">#</a></p><div class="doc"><p>Get all the packages from the index.</p><p>They are grouped by package name (case-sensitively).</p><p>(Doesn't include private libraries.)</p></div></div><div class="top"><p class="src"><a id="v:allPackagesBySourcePackageId" class="def">allPackagesBySourcePackageId</a> :: <a href="Distribution-Package.html#t:HasUnitId">HasUnitId</a> a =&gt; <a href="Distribution-Simple-PackageIndex.html#t:PackageIndex">PackageIndex</a> a -&gt; [(<a href="Distribution-Types-PackageId.html#t:PackageId">PackageId</a>, [a])] <a href="src/Distribution-Simple-PackageIndex.html#allPackagesBySourcePackageId" class="link">Source</a> <a href="#v:allPackagesBySourcePackageId" class="selflink">#</a></p><div class="doc"><p>Get all the packages from the index.</p><p>They are grouped by source package id (package name and version).</p><p>(Doesn't include private libraries)</p></div></div><div class="top"><p class="src"><a id="v:allPackagesBySourcePackageIdAndLibName" class="def">allPackagesBySourcePackageIdAndLibName</a> :: <a href="Distribution-Package.html#t:HasUnitId">HasUnitId</a> a =&gt; <a href="Distribution-Simple-PackageIndex.html#t:PackageIndex">PackageIndex</a> a -&gt; [((<a href="Distribution-Types-PackageId.html#t:PackageId">PackageId</a>, <a href="../base-4.10.0.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Distribution-Types-UnqualComponentName.html#t:UnqualComponentName">UnqualComponentName</a>), [a])] <a href="src/Distribution-Simple-PackageIndex.html#allPackagesBySourcePackageIdAndLibName" class="link">Source</a> <a href="#v:allPackagesBySourcePackageIdAndLibName" class="selflink">#</a></p><div class="doc"><p>Get all the packages from the index.</p><p>They are grouped by source package id and library name.</p><p>This DOES include internal libraries.</p></div></div><h2 id="g:8">Special queries</h2><div class="top"><p class="src"><a id="v:brokenPackages" class="def">brokenPackages</a> :: <a href="Distribution-Package.html#t:PackageInstalled">PackageInstalled</a> a =&gt; <a href="Distribution-Simple-PackageIndex.html#t:PackageIndex">PackageIndex</a> a -&gt; [(a, [<a href="Distribution-Types-UnitId.html#t:UnitId">UnitId</a>])] <a href="src/Distribution-Simple-PackageIndex.html#brokenPackages" class="link">Source</a> <a href="#v:brokenPackages" class="selflink">#</a></p><div class="doc"><p>All packages that have immediate dependencies that are not in the index.</p><p>Returns such packages along with the dependencies that they're missing.</p></div></div><div class="top"><p class="src"><a id="v:dependencyClosure" class="def">dependencyClosure</a> :: <a href="Distribution-Simple-PackageIndex.html#t:InstalledPackageIndex">InstalledPackageIndex</a> -&gt; [<a href="Distribution-Types-UnitId.html#t:UnitId">UnitId</a>] -&gt; <a href="../base-4.10.0.0/Data-Either.html#t:Either">Either</a> <a href="Distribution-Simple-PackageIndex.html#t:InstalledPackageIndex">InstalledPackageIndex</a> [(<a href="Distribution-InstalledPackageInfo.html#t:InstalledPackageInfo">InstalledPackageInfo</a>, [<a href="Distribution-Types-UnitId.html#t:UnitId">UnitId</a>])] <a href="src/Distribution-Simple-PackageIndex.html#dependencyClosure" class="link">Source</a> <a href="#v:dependencyClosure" class="selflink">#</a></p><div class="doc"><p>Tries to take the transitive closure of the package dependencies.</p><p>If the transitive closure is complete then it returns that subset of the
 index. Otherwise it returns the broken packages as in <code><a href="Distribution-Simple-PackageIndex.html#v:brokenPackages">brokenPackages</a></code>.</p><ul><li>Note that if the result is <code>Right []</code> it is because at least one of
 the original given <code><a href="Distribution-Types-PackageId.html#t:PackageId">PackageId</a></code>s do not occur in the index.</li></ul></div></div><div class="top"><p class="src"><a id="v:reverseDependencyClosure" class="def">reverseDependencyClosure</a> :: <a href="Distribution-Package.html#t:PackageInstalled">PackageInstalled</a> a =&gt; <a href="Distribution-Simple-PackageIndex.html#t:PackageIndex">PackageIndex</a> a -&gt; [<a href="Distribution-Types-UnitId.html#t:UnitId">UnitId</a>] -&gt; [a] <a href="src/Distribution-Simple-PackageIndex.html#reverseDependencyClosure" class="link">Source</a> <a href="#v:reverseDependencyClosure" class="selflink">#</a></p><div class="doc"><p>Takes the transitive closure of the packages reverse dependencies.</p><ul><li>The given <code><a href="Distribution-Types-PackageId.html#t:PackageId">PackageId</a></code>s must be in the index.</li></ul></div></div><div class="top"><p class="src"><a id="v:topologicalOrder" class="def">topologicalOrder</a> :: <a href="Distribution-Package.html#t:PackageInstalled">PackageInstalled</a> a =&gt; <a href="Distribution-Simple-PackageIndex.html#t:PackageIndex">PackageIndex</a> a -&gt; [a] <a href="src/Distribution-Simple-PackageIndex.html#topologicalOrder" class="link">Source</a> <a href="#v:topologicalOrder" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:reverseTopologicalOrder" class="def">reverseTopologicalOrder</a> :: <a href="Distribution-Package.html#t:PackageInstalled">PackageInstalled</a> a =&gt; <a href="Distribution-Simple-PackageIndex.html#t:PackageIndex">PackageIndex</a> a -&gt; [a] <a href="src/Distribution-Simple-PackageIndex.html#reverseTopologicalOrder" class="link">Source</a> <a href="#v:reverseTopologicalOrder" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:dependencyInconsistencies" class="def">dependencyInconsistencies</a> :: <a href="Distribution-Simple-PackageIndex.html#t:InstalledPackageIndex">InstalledPackageIndex</a> -&gt; [(DepUniqueKey, [(<a href="Distribution-Types-UnitId.html#t:UnitId">UnitId</a>, [<a href="Distribution-InstalledPackageInfo.html#t:InstalledPackageInfo">InstalledPackageInfo</a>])])] <a href="src/Distribution-Simple-PackageIndex.html#dependencyInconsistencies" class="link">Source</a> <a href="#v:dependencyInconsistencies" class="selflink">#</a></p><div class="doc"><p>Given a package index where we assume we want to use all the packages
 (use <code><a href="Distribution-Simple-PackageIndex.html#v:dependencyClosure">dependencyClosure</a></code> if you need to get such a index subset) find out
 if the dependencies within it use consistent versions of each package.
 Return all cases where multiple packages depend on different versions of
 some other package.</p><p>Each element in the result is a package name along with the packages that
 depend on it and the versions they require. These are guaranteed to be
 distinct.</p></div></div><div class="top"><p class="src"><a id="v:dependencyCycles" class="def">dependencyCycles</a> :: <a href="Distribution-Package.html#t:PackageInstalled">PackageInstalled</a> a =&gt; <a href="Distribution-Simple-PackageIndex.html#t:PackageIndex">PackageIndex</a> a -&gt; [[a]] <a href="src/Distribution-Simple-PackageIndex.html#dependencyCycles" class="link">Source</a> <a href="#v:dependencyCycles" class="selflink">#</a></p><div class="doc"><p>Find if there are any cycles in the dependency graph. If there are no
 cycles the result is <code>[]</code>.</p><p>This actually computes the strongly connected components. So it gives us a
 list of groups of packages where within each group they all depend on each
 other, directly or indirectly.</p></div></div><div class="top"><p class="src"><a id="v:dependencyGraph" class="def">dependencyGraph</a> :: <a href="Distribution-Package.html#t:PackageInstalled">PackageInstalled</a> a =&gt; <a href="Distribution-Simple-PackageIndex.html#t:PackageIndex">PackageIndex</a> a -&gt; (<a href="../containers-0.5.10.2/Data-Graph.html#t:Graph">Graph</a>, <a href="../containers-0.5.10.2/Data-Graph.html#t:Vertex">Vertex</a> -&gt; a, <a href="Distribution-Types-UnitId.html#t:UnitId">UnitId</a> -&gt; <a href="../base-4.10.0.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../containers-0.5.10.2/Data-Graph.html#t:Vertex">Vertex</a>) <a href="src/Distribution-Simple-PackageIndex.html#dependencyGraph" class="link">Source</a> <a href="#v:dependencyGraph" class="selflink">#</a></p><div class="doc"><p>Builds a graph of the package dependencies.</p><p>Dependencies on other packages that are not in the index are discarded.
 You can check if there are any such dependencies with <code><a href="Distribution-Simple-PackageIndex.html#v:brokenPackages">brokenPackages</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:moduleNameIndex" class="def">moduleNameIndex</a> :: <a href="Distribution-Simple-PackageIndex.html#t:InstalledPackageIndex">InstalledPackageIndex</a> -&gt; <a href="Distribution-Compat-Prelude-Internal.html#t:Map">Map</a> <a href="Distribution-ModuleName.html#t:ModuleName">ModuleName</a> [<a href="Distribution-InstalledPackageInfo.html#t:InstalledPackageInfo">InstalledPackageInfo</a>] <a href="src/Distribution-Simple-PackageIndex.html#moduleNameIndex" class="link">Source</a> <a href="#v:moduleNameIndex" class="selflink">#</a></p><div class="doc"><p>A rough approximation of GHC's module finder, takes a
 <code><a href="Distribution-Simple-PackageIndex.html#t:InstalledPackageIndex">InstalledPackageIndex</a></code> and turns it into a map from module names to their
 source packages.  It's used to initialize the <code>build-deps</code> field in <code>cabal
 init</code>.</p></div></div><h1 id="g:9">Backwards compatibility</h1><div class="top"><p class="src"><a id="v:deleteInstalledPackageId" class="def">deleteInstalledPackageId</a> :: <a href="Distribution-Types-UnitId.html#t:UnitId">UnitId</a> -&gt; <a href="Distribution-Simple-PackageIndex.html#t:InstalledPackageIndex">InstalledPackageIndex</a> -&gt; <a href="Distribution-Simple-PackageIndex.html#t:InstalledPackageIndex">InstalledPackageIndex</a> <a href="src/Distribution-Simple-PackageIndex.html#deleteInstalledPackageId" class="link">Source</a> <a href="#v:deleteInstalledPackageId" class="selflink">#</a></p><div class="doc"><div class="warning"><p>Deprecated: Use deleteUnitId instead</p></div><p>Backwards compatibility wrapper for Cabal pre-1.24.</p></div></div><div class="top"><p class="src"><a id="v:lookupInstalledPackageId" class="def">lookupInstalledPackageId</a> :: <a href="Distribution-Simple-PackageIndex.html#t:PackageIndex">PackageIndex</a> a -&gt; <a href="Distribution-Types-UnitId.html#t:UnitId">UnitId</a> -&gt; <a href="../base-4.10.0.0/Data-Maybe.html#t:Maybe">Maybe</a> a <a href="src/Distribution-Simple-PackageIndex.html#lookupInstalledPackageId" class="link">Source</a> <a href="#v:lookupInstalledPackageId" class="selflink">#</a></p><div class="doc"><div class="warning"><p>Deprecated: Use lookupUnitId instead</p></div><p>Backwards compatibility for Cabal pre-1.24.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.18.2</p></div></body></html>