<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>GHCi.ObjLink</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/GHCi-ObjLink.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">ghci-8.3: The library supporting GHC's interactive interpreter</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">GHCi.ObjLink</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Primarily, this module consists of an interface to the C-land
 dynamic linker.</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><a href="#v:initObjLinker">initObjLinker</a> :: <a href="GHCi-ObjLink.html#t:ShouldRetainCAFs">ShouldRetainCAFs</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> ()</li><li class="src short"><span class="keyword">data</span> <a href="#t:ShouldRetainCAFs">ShouldRetainCAFs</a><ul class="subs"><li>= <a href="#v:RetainCAFs">RetainCAFs</a></li><li>| <a href="#v:DontRetainCAFs">DontRetainCAFs</a></li></ul></li><li class="src short"><a href="#v:loadDLL">loadDLL</a> :: <a href="../base-4.10.0.0/Data-String.html#t:String">String</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> (<a href="../base-4.10.0.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../base-4.10.0.0/Data-String.html#t:String">String</a>)</li><li class="src short"><a href="#v:loadArchive">loadArchive</a> :: <a href="../base-4.10.0.0/Data-String.html#t:String">String</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> ()</li><li class="src short"><a href="#v:loadObj">loadObj</a> :: <a href="../base-4.10.0.0/Data-String.html#t:String">String</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> ()</li><li class="src short"><a href="#v:unloadObj">unloadObj</a> :: <a href="../base-4.10.0.0/Data-String.html#t:String">String</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> ()</li><li class="src short"><a href="#v:purgeObj">purgeObj</a> :: <a href="../base-4.10.0.0/Data-String.html#t:String">String</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> ()</li><li class="src short"><a href="#v:lookupSymbol">lookupSymbol</a> :: <a href="../base-4.10.0.0/Data-String.html#t:String">String</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> (<a href="../base-4.10.0.0/Data-Maybe.html#t:Maybe">Maybe</a> (<a href="../base-4.10.0.0/Foreign-Ptr.html#t:Ptr">Ptr</a> a))</li><li class="src short"><a href="#v:lookupClosure">lookupClosure</a> :: <a href="../base-4.10.0.0/Data-String.html#t:String">String</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> (<a href="../base-4.10.0.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="GHCi-RemoteTypes.html#t:HValueRef">HValueRef</a>)</li><li class="src short"><a href="#v:resolveObjs">resolveObjs</a> :: <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> <a href="../base-4.10.0.0/Data-Bool.html#t:Bool">Bool</a></li><li class="src short"><a href="#v:addLibrarySearchPath">addLibrarySearchPath</a> :: <a href="../base-4.10.0.0/Data-String.html#t:String">String</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> (<a href="../base-4.10.0.0/Foreign-Ptr.html#t:Ptr">Ptr</a> ())</li><li class="src short"><a href="#v:removeLibrarySearchPath">removeLibrarySearchPath</a> :: <a href="../base-4.10.0.0/Foreign-Ptr.html#t:Ptr">Ptr</a> () -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> <a href="../base-4.10.0.0/Data-Bool.html#t:Bool">Bool</a></li><li class="src short"><a href="#v:findSystemLibrary">findSystemLibrary</a> :: <a href="../base-4.10.0.0/Data-String.html#t:String">String</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> (<a href="../base-4.10.0.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../base-4.10.0.0/Data-String.html#t:String">String</a>)</li></ul></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><a id="v:initObjLinker" class="def">initObjLinker</a> :: <a href="GHCi-ObjLink.html#t:ShouldRetainCAFs">ShouldRetainCAFs</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> () <a href="src/GHCi-ObjLink.html#initObjLinker" class="link">Source</a> <a href="#v:initObjLinker" class="selflink">#</a></p></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:ShouldRetainCAFs" class="def">ShouldRetainCAFs</a> <a href="src/GHCi-ObjLink.html#ShouldRetainCAFs" class="link">Source</a> <a href="#t:ShouldRetainCAFs" class="selflink">#</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:RetainCAFs" class="def">RetainCAFs</a></td><td class="doc"><p>Retain CAFs unconditionally in linked Haskell code.
 Note that this prevents any code from being unloaded.
 It should not be necessary unless you are GHCi or
 hs-plugins, which needs to be able call any function
 in the compiled code.</p></td></tr><tr><td class="src"><a id="v:DontRetainCAFs" class="def">DontRetainCAFs</a></td><td class="doc"><p>Do not retain CAFs.  Everything reachable from foreign
 exports will be retained, due to the StablePtrs
 created by the module initialisation code.  unloadObj
 frees these StablePtrs, which will allow the CAFs to
 be GC'd and the code to be removed.</p></td></tr></table></div></div><div class="top"><p class="src"><a id="v:loadDLL" class="def">loadDLL</a> :: <a href="../base-4.10.0.0/Data-String.html#t:String">String</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> (<a href="../base-4.10.0.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../base-4.10.0.0/Data-String.html#t:String">String</a>) <a href="src/GHCi-ObjLink.html#loadDLL" class="link">Source</a> <a href="#v:loadDLL" class="selflink">#</a></p><div class="doc"><p>loadDLL loads a dynamic library using the OS's native linker
 (i.e. dlopen() on Unix, LoadLibrary() on Windows).  It takes either
 an absolute pathname to the file, or a relative filename
 (e.g. &quot;libfoo.so&quot; or &quot;foo.dll&quot;).  In the latter case, loadDLL
 searches the standard locations for the appropriate library.</p></div></div><div class="top"><p class="src"><a id="v:loadArchive" class="def">loadArchive</a> :: <a href="../base-4.10.0.0/Data-String.html#t:String">String</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> () <a href="src/GHCi-ObjLink.html#loadArchive" class="link">Source</a> <a href="#v:loadArchive" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:loadObj" class="def">loadObj</a> :: <a href="../base-4.10.0.0/Data-String.html#t:String">String</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> () <a href="src/GHCi-ObjLink.html#loadObj" class="link">Source</a> <a href="#v:loadObj" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:unloadObj" class="def">unloadObj</a> :: <a href="../base-4.10.0.0/Data-String.html#t:String">String</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> () <a href="src/GHCi-ObjLink.html#unloadObj" class="link">Source</a> <a href="#v:unloadObj" class="selflink">#</a></p><div class="doc"><p><code>unloadObj</code> drops the given dynamic library from the symbol table
 as well as enables the library to be removed from memory during
 a future major GC.</p></div></div><div class="top"><p class="src"><a id="v:purgeObj" class="def">purgeObj</a> :: <a href="../base-4.10.0.0/Data-String.html#t:String">String</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> () <a href="src/GHCi-ObjLink.html#purgeObj" class="link">Source</a> <a href="#v:purgeObj" class="selflink">#</a></p><div class="doc"><p><code>purgeObj</code> drops the symbols for the dynamic library from the symbol
 table. Unlike <code><a href="GHCi-ObjLink.html#v:unloadObj">unloadObj</a></code>, the library will not be dropped memory during
 a future major GC.</p></div></div><div class="top"><p class="src"><a id="v:lookupSymbol" class="def">lookupSymbol</a> :: <a href="../base-4.10.0.0/Data-String.html#t:String">String</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> (<a href="../base-4.10.0.0/Data-Maybe.html#t:Maybe">Maybe</a> (<a href="../base-4.10.0.0/Foreign-Ptr.html#t:Ptr">Ptr</a> a)) <a href="src/GHCi-ObjLink.html#lookupSymbol" class="link">Source</a> <a href="#v:lookupSymbol" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:lookupClosure" class="def">lookupClosure</a> :: <a href="../base-4.10.0.0/Data-String.html#t:String">String</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> (<a href="../base-4.10.0.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="GHCi-RemoteTypes.html#t:HValueRef">HValueRef</a>) <a href="src/GHCi-ObjLink.html#lookupClosure" class="link">Source</a> <a href="#v:lookupClosure" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:resolveObjs" class="def">resolveObjs</a> :: <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> <a href="../base-4.10.0.0/Data-Bool.html#t:Bool">Bool</a> <a href="src/GHCi-ObjLink.html#resolveObjs" class="link">Source</a> <a href="#v:resolveObjs" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:addLibrarySearchPath" class="def">addLibrarySearchPath</a> :: <a href="../base-4.10.0.0/Data-String.html#t:String">String</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> (<a href="../base-4.10.0.0/Foreign-Ptr.html#t:Ptr">Ptr</a> ()) <a href="src/GHCi-ObjLink.html#addLibrarySearchPath" class="link">Source</a> <a href="#v:addLibrarySearchPath" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:removeLibrarySearchPath" class="def">removeLibrarySearchPath</a> :: <a href="../base-4.10.0.0/Foreign-Ptr.html#t:Ptr">Ptr</a> () -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> <a href="../base-4.10.0.0/Data-Bool.html#t:Bool">Bool</a> <a href="src/GHCi-ObjLink.html#removeLibrarySearchPath" class="link">Source</a> <a href="#v:removeLibrarySearchPath" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:findSystemLibrary" class="def">findSystemLibrary</a> :: <a href="../base-4.10.0.0/Data-String.html#t:String">String</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> (<a href="../base-4.10.0.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../base-4.10.0.0/Data-String.html#t:String">String</a>) <a href="src/GHCi-ObjLink.html#findSystemLibrary" class="link">Source</a> <a href="#v:findSystemLibrary" class="selflink">#</a></p></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.18.2</p></div></body></html>